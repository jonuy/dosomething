<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: Queue operations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Queue operations</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalQueue.html">DrupalQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceDrupalQueueInterface.html">DrupalQueueInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceDrupalReliableQueueInterface.html">DrupalReliableQueueInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystemQueue.html">SystemQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html">MemoryQueue</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Queue items to allow later processing.</p>
<p>The queue system allows placing items in a queue and processing them later. The system tries to ensure that only one consumer can process an item.</p>
<p>Before a queue can be used it needs to be created by <a class="el" href="interfaceDrupalQueueInterface.html#a5a657d8c1d5bb429b3e594fa0c883ad3">DrupalQueueInterface::createQueue()</a>.</p>
<p>Items can be added to the queue by passing an arbitrary data object to <a class="el" href="interfaceDrupalQueueInterface.html#a1bdef6341808aaf8b3de821b7b71f137">DrupalQueueInterface::createItem()</a>.</p>
<p>To process an item, call <a class="el" href="interfaceDrupalQueueInterface.html#a2f0f2ccc1f4d55c0890897ea85e75954">DrupalQueueInterface::claimItem()</a> and specify how long you want to have a lease for working on that item. When finished processing, the item needs to be deleted by calling <a class="el" href="interfaceDrupalQueueInterface.html#aa61212089c1bcc410e8f87f8e619e351">DrupalQueueInterface::deleteItem()</a>. If the consumer dies, the item will be made available again by the <a class="el" href="interfaceDrupalQueueInterface.html">DrupalQueueInterface</a> implementation once the lease expires. Another consumer will then be able to receive it when calling <a class="el" href="interfaceDrupalQueueInterface.html#a2f0f2ccc1f4d55c0890897ea85e75954">DrupalQueueInterface::claimItem()</a>. Due to this, the processing code should be aware that an item might be handed over for processing more than once.</p>
<p>The $item object used by the <a class="el" href="interfaceDrupalQueueInterface.html">DrupalQueueInterface</a> can contain arbitrary metadata depending on the implementation. Systems using the interface should only rely on the data property which will contain the information passed to <a class="el" href="interfaceDrupalQueueInterface.html#a1bdef6341808aaf8b3de821b7b71f137">DrupalQueueInterface::createItem()</a>. The full queue item returned by <a class="el" href="interfaceDrupalQueueInterface.html#a2f0f2ccc1f4d55c0890897ea85e75954">DrupalQueueInterface::claimItem()</a> needs to be passed to <a class="el" href="interfaceDrupalQueueInterface.html#aa61212089c1bcc410e8f87f8e619e351">DrupalQueueInterface::deleteItem()</a> once processing is completed.</p>
<p>There are two kinds of queue backends available: reliable, which preserves the order of messages and guarantees that every item will be executed at least once. The non-reliable kind only does a best effort to preserve order in messages and to execute them at least once but there is a small chance that some items get lost. For example, some distributed back-ends like Amazon SQS will be managing jobs for a large set of producers and consumers where a strict FIFO ordering will likely not be preserved. Another example would be an in-memory queue backend which might lose items if it crashes. However, such a backend would be able to deal with significantly more writes than a reliable queue and for many tasks this is more important. See <a class="el" href="aggregator_8module.html#adbe7d09140773c5485cda52dd03bdab5">aggregator_cron()</a> for an example of how to effectively utilize a non-reliable queue. Another example is doing Twitter statistics -- the small possibility of losing a few items is insignificant next to power of the queue being able to keep up with writes. As described in the processing section, regardless of the queue being reliable or not, the processing code should be aware that an item might be handed over for processing more than once (because the processing code might time out before it finishes). </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
