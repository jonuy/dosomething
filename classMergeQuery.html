<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: MergeQuery Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MergeQuery Class Reference<br/>
<small>
[<a class="el" href="group__database.html">Database abstraction layer</a>]</small>
</h1><!-- doxytag: class="MergeQuery" --><!-- doxytag: inherits="Query,QueryConditionInterface" --><div class="dynheader">
Inheritance diagram for MergeQuery:</div>
<div class="dynsection">
 <div class="center">
  <img src="classMergeQuery.gif" usemap="#MergeQuery_map" alt=""/>
  <map id="MergeQuery_map" name="MergeQuery_map">
<area href="classQuery.html" alt="Query" shape="rect" coords="0,56,166,80"/>
<area href="interfaceQueryConditionInterface.html" alt="QueryConditionInterface" shape="rect" coords="176,56,342,80"/>
<area href="interfaceQueryPlaceholderInterface.html" alt="QueryPlaceholderInterface" shape="rect" coords="0,0,166,24"/>
</map>
 </div>
</div>

<p><a href="classMergeQuery-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a05ba5cf13796317567a0344cf58a028c">__construct</a> (<a class="el" href="classDatabaseConnection.html">DatabaseConnection</a> $connection, $table, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#ad5b51b48eaec3821181cf8e6c09bf29e">updateFields</a> (array $fields)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a09f35077e2adc871dcdd75efedbeabe0">expression</a> ($field, $expression, array $arguments=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a1c1fef20258dad469a0853fdaddaae4e">insertFields</a> (array $fields, array $values=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a630cdd152352b1229cc712ec261139cf">useDefaults</a> (array $fields)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#ae58f2865c72dfc4c310ec4c17fd4e72d">fields</a> (array $fields, array $values=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#aa34f8ac97b0571d49fbc20557dfce97b">key</a> (array $fields, array $values=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a40d55b36952248da6d8eabb0eb1a8430">condition</a> ($field, $value=NULL, $operator=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a010c4f710e0e242d9d89383a49573376">isNull</a> ($field)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a6eda0759442dcb9cfa940e5ced5cc7ba">isNotNull</a> ($field)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a0a92a08ad6933ecc4a796e9d50ea85f5">exists</a> (<a class="el" href="interfaceSelectQueryInterface.html">SelectQueryInterface</a> $select)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a3749f7ccb2e71b8ff1570161418cbf2b">notExists</a> (<a class="el" href="interfaceSelectQueryInterface.html">SelectQueryInterface</a> $select)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a759f840d106e79a119d9130d09123b8d">conditions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#aa059b4fd2916e10075582091bfa03975">arguments</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a1d46b2fc285ec9f402ac53800e3cd58f">where</a> ($snippet, $args=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a33436167b6e2ddc710b2a51db146ea67">compile</a> (<a class="el" href="classDatabaseConnection.html">DatabaseConnection</a> $connection, <a class="el" href="interfaceQueryPlaceholderInterface.html">QueryPlaceholderInterface</a> $queryPlaceholder)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#ab6c0c905db976734e61d6ef997bd3a6a">compiled</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a66c98a8761c91bb633c4ea09ce0c467c">__toString</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#aeea46fdb119752efd2048d66b9fe8de8">execute</a> ()</td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a42f1aad21544decc65082fc10fd2d68a">STATUS_INSERT</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#ad79d3ece9a03a3a63bef6560e90fc776">STATUS_UPDATE</a> = 2</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a0dbb5c2ac711fede2344a02cc49b0efb">conditionTable</a> ($table)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae375df4f0a8f48bf72fe6ab37260fd80"></a><!-- doxytag: member="MergeQuery::$table" ref="ae375df4f0a8f48bf72fe6ab37260fd80" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$table</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html#a8f593caec31bdbc33f24bd741a58a6e5">$conditionTable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e1b39641ffd4d38d1a2841093e9e7a2"></a><!-- doxytag: member="MergeQuery::$insertFields" ref="a9e1b39641ffd4d38d1a2841093e9e7a2" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$insertFields</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb3068d044d43b3e42e79a669fa12d2b"></a><!-- doxytag: member="MergeQuery::$defaultFields" ref="aeb3068d044d43b3e42e79a669fa12d2b" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$defaultFields</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aac37e8468f4dcc9c32d4f9cc35500a63"></a><!-- doxytag: member="MergeQuery::$insertValues" ref="aac37e8468f4dcc9c32d4f9cc35500a63" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$insertValues</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af645d2050434800e71ad0752f2bd7733"></a><!-- doxytag: member="MergeQuery::$updateFields" ref="af645d2050434800e71ad0752f2bd7733" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$updateFields</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6f164b0b45b4b6b87b3cdee3e33d6a1d"></a><!-- doxytag: member="MergeQuery::$expressionFields" ref="a6f164b0b45b4b6b87b3cdee3e33d6a1d" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$expressionFields</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2aa680e4b114585b291446f9f0d887e4"></a><!-- doxytag: member="MergeQuery::$needsUpdate" ref="a2aa680e4b114585b291446f9f0d887e4" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$needsUpdate</b> = FALSE</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>General class for an abstracted MERGE query operation.</p>
<p>An ANSI SQL:2003 compatible database would run the following query:</p>
<div class="fragment"><pre class="fragment"> MERGE INTO table_name_1 USING table_name_2 ON (<a class="code" href="classMergeQuery.html#a40d55b36952248da6d8eabb0eb1a8430">condition</a>)
   WHEN MATCHED THEN
   UPDATE SET column1 = value1 [, column2 = value2 ...]
   WHEN NOT MATCHED THEN
   INSERT (column1 [, column2 ...]) VALUES (value1 [, value2 ...
</pre></div><p>Other databases (most notably MySQL, PostgreSQL and SQLite) will emulate this statement by running a SELECT and then INSERT or UPDATE.</p>
<p>By default, the two table names are identical and they are passed into the the constructor. table_name_2 can be specified by the <a class="el" href="classMergeQuery.html#a0dbb5c2ac711fede2344a02cc49b0efb">MergeQuery::conditionTable()</a> method. It can be either a string or a subquery.</p>
<p>The condition is built exactly like <a class="el" href="classSelectQuery.html">SelectQuery</a> or <a class="el" href="classUpdateQuery.html">UpdateQuery</a> conditions, the UPDATE query part is built similarly like an <a class="el" href="classUpdateQuery.html">UpdateQuery</a> and finally the INSERT query part is built similarly like an <a class="el" href="classInsertQuery.html">InsertQuery</a>. However, both <a class="el" href="classUpdateQuery.html">UpdateQuery</a> and <a class="el" href="classInsertQuery.html">InsertQuery</a> has a fields method so <a class="el" href="classMergeQuery.html#ad5b51b48eaec3821181cf8e6c09bf29e">MergeQuery::updateFields()</a> and <a class="el" href="classMergeQuery.html#a1c1fef20258dad469a0853fdaddaae4e">MergeQuery::insertFields()</a> needs to be called instead. <a class="el" href="classMergeQuery.html#ae58f2865c72dfc4c310ec4c17fd4e72d">MergeQuery::fields()</a> can also be called which calls both of these methods as the common case is to use the same column-value pairs for both INSERT and UPDATE. However, this is not mandatory. Another convinient wrapper is <a class="el" href="classMergeQuery.html#aa34f8ac97b0571d49fbc20557dfce97b">MergeQuery::key()</a> which adds the same column-value pairs to the condition and the INSERT query part.</p>
<p>Several methods (<a class="el" href="classMergeQuery.html#aa34f8ac97b0571d49fbc20557dfce97b">key()</a>, <a class="el" href="classMergeQuery.html#ae58f2865c72dfc4c310ec4c17fd4e72d">fields()</a>, <a class="el" href="classMergeQuery.html#a1c1fef20258dad469a0853fdaddaae4e">insertFields()</a>) can be called to set a key-value pair for the INSERT query part. Subsequent calls for the same fields override the earlier ones. The same is true for UPDATE and <a class="el" href="classMergeQuery.html#aa34f8ac97b0571d49fbc20557dfce97b">key()</a>, <a class="el" href="classMergeQuery.html#ae58f2865c72dfc4c310ec4c17fd4e72d">fields()</a> and <a class="el" href="classMergeQuery.html#ad5b51b48eaec3821181cf8e6c09bf29e">updateFields()</a>. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a05ba5cf13796317567a0344cf58a028c"></a><!-- doxytag: member="MergeQuery::__construct" ref="a05ba5cf13796317567a0344cf58a028c" args="(DatabaseConnection $connection, $table, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDatabaseConnection.html">DatabaseConnection</a> $&nbsp;</td>
          <td class="paramname"> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs a <a class="el" href="classMergeQuery.html">MergeQuery</a> object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classDatabaseConnection.html">DatabaseConnection</a></em>&nbsp;</td><td>$connection A <a class="el" href="classDatabaseConnection.html">DatabaseConnection</a> object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$table Name of the table to associate with this query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$options Array of database options. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a66c98a8761c91bb633c4ea09ce0c467c"></a><!-- doxytag: member="MergeQuery::__toString" ref="a66c98a8761c91bb633c4ea09ce0c467c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::__toString </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements PHP magic __toString method to convert the query to a string.</p>
<p>In the degenerate case, there is no string-able query as this operation is potentially two queries.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>string The prepared query statement. </dd></dl>

<p>Reimplemented from <a class="el" href="classQuery.html#a16c3a3265666b784d49ce18a6fda9a8a">Query</a>.</p>

</div>
</div>
<a class="anchor" id="aa059b4fd2916e10075582091bfa03975"></a><!-- doxytag: member="MergeQuery::arguments" ref="aa059b4fd2916e10075582091bfa03975" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::arguments </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#ac2349e02d5332412182cf472ba1a1b1e">QueryConditionInterface::arguments()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#ac2349e02d5332412182cf472ba1a1b1e">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a33436167b6e2ddc710b2a51db146ea67"></a><!-- doxytag: member="MergeQuery::compile" ref="a33436167b6e2ddc710b2a51db146ea67" args="(DatabaseConnection $connection, QueryPlaceholderInterface $queryPlaceholder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::compile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDatabaseConnection.html">DatabaseConnection</a> $&nbsp;</td>
          <td class="paramname"> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfaceQueryPlaceholderInterface.html">QueryPlaceholderInterface</a> $&nbsp;</td>
          <td class="paramname"> <em>queryPlaceholder</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#ad409672ac9ac50787eec52ecdf5a60b1">QueryConditionInterface::compile()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#ad409672ac9ac50787eec52ecdf5a60b1">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="ab6c0c905db976734e61d6ef997bd3a6a"></a><!-- doxytag: member="MergeQuery::compiled" ref="ab6c0c905db976734e61d6ef997bd3a6a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::compiled </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a4aac3f4505275edecad9c22351e591cb">QueryConditionInterface::compiled()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a4aac3f4505275edecad9c22351e591cb">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a40d55b36952248da6d8eabb0eb1a8430"></a><!-- doxytag: member="MergeQuery::condition" ref="a40d55b36952248da6d8eabb0eb1a8430" args="($field, $value=NULL, $operator=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::condition </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>value</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>operator</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#aa6d9d96fa17441b5222d1ffddd4c1799">QueryConditionInterface::condition()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#aa6d9d96fa17441b5222d1ffddd4c1799">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a759f840d106e79a119d9130d09123b8d"></a><!-- doxytag: member="MergeQuery::conditions" ref="a759f840d106e79a119d9130d09123b8d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">&amp; MergeQuery::conditions </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a894cc290ed61feb3693b1d459ae86888">QueryConditionInterface::conditions()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a894cc290ed61feb3693b1d459ae86888">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a0dbb5c2ac711fede2344a02cc49b0efb"></a><!-- doxytag: member="MergeQuery::conditionTable" ref="a0dbb5c2ac711fede2344a02cc49b0efb" args="($table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::conditionTable </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the table or subquery to be used for the condition.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table name or the subquery to be used. Use a <a class="el" href="classSelectQuery.html">SelectQuery</a> object to pass in a subquery.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> The called object. </dd></dl>

</div>
</div>
<a class="anchor" id="aeea46fdb119752efd2048d66b9fe8de8"></a><!-- doxytag: member="MergeQuery::execute" ref="aeea46fdb119752efd2048d66b9fe8de8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::execute </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Runs the query against the database. </p>

<p>Reimplemented from <a class="el" href="classQuery.html#a9f2326187a94f3337a7838687b1e6929">Query</a>.</p>

</div>
</div>
<a class="anchor" id="a0a92a08ad6933ecc4a796e9d50ea85f5"></a><!-- doxytag: member="MergeQuery::exists" ref="a0a92a08ad6933ecc4a796e9d50ea85f5" args="(SelectQueryInterface $select)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::exists </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceSelectQueryInterface.html">SelectQueryInterface</a> $&nbsp;</td>
          <td class="paramname"> <em>select</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a27a52b6e84393275ad2c54eaf1bd764a">QueryConditionInterface::exists()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a27a52b6e84393275ad2c54eaf1bd764a">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a09f35077e2adc871dcdd75efedbeabe0"></a><!-- doxytag: member="MergeQuery::expression" ref="a09f35077e2adc871dcdd75efedbeabe0" args="($field, $expression, array $arguments=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::expression </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>arguments</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Specifies fields to be updated as an expression.</p>
<p>Expression fields are cases such as counter = counter + 1. This method takes precedence over <a class="el" href="classMergeQuery.html#ad5b51b48eaec3821181cf8e6c09bf29e">MergeQuery::updateFields()</a> and it's wrappers, <a class="el" href="classMergeQuery.html#aa34f8ac97b0571d49fbc20557dfce97b">MergeQuery::key()</a> and <a class="el" href="classMergeQuery.html#ae58f2865c72dfc4c310ec4c17fd4e72d">MergeQuery::fields()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>The field to set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$expression</em>&nbsp;</td><td>The field will be set to the value of this expression. This parameter may include named placeholders. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$arguments</em>&nbsp;</td><td>If specified, this is an array of key/value pairs for named placeholders corresponding to the expression.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> The called object. </dd></dl>

</div>
</div>
<a class="anchor" id="ae58f2865c72dfc4c310ec4c17fd4e72d"></a><!-- doxytag: member="MergeQuery::fields" ref="ae58f2865c72dfc4c310ec4c17fd4e72d" args="(array $fields, array $values=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::fields </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>values</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets common field-value pairs in the INSERT and UPDATE query parts.</p>
<p>This method should only be called once. It may be called either with a single associative array or two indexed arrays. If called with an associative array, the keys are taken to be the fields and the values are taken to be the corresponding values to set. If called with two arrays, the first array is taken as the fields and the second array is taken as the corresponding values.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An array of fields to insert, or an associative array of fields and values. The keys of the array are taken to be the fields and the values are taken to be corresponding values to insert. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$values</em>&nbsp;</td><td>An array of values to set into the database. The values must be specified in the same order as the $fields array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> The called object. </dd></dl>

</div>
</div>
<a class="anchor" id="a1c1fef20258dad469a0853fdaddaae4e"></a><!-- doxytag: member="MergeQuery::insertFields" ref="a1c1fef20258dad469a0853fdaddaae4e" args="(array $fields, array $values=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::insertFields </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>values</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds a set of field-&gt;value pairs to be inserted.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An array of fields on which to insert. This array may be indexed or associative. If indexed, the array is taken to be the list of fields. If associative, the keys of the array are taken to be the fields and the values are taken to be corresponding values to insert. If a $values argument is provided, $fields must be indexed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$values</em>&nbsp;</td><td>An array of fields to insert into the database. The values must be specified in the same order as the $fields array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> The called object. </dd></dl>

</div>
</div>
<a class="anchor" id="a6eda0759442dcb9cfa940e5ced5cc7ba"></a><!-- doxytag: member="MergeQuery::isNotNull" ref="a6eda0759442dcb9cfa940e5ced5cc7ba" args="($field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::isNotNull </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a8bbb6acc9c72911b165cf6eb1dc31453">QueryConditionInterface::isNotNull()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a8bbb6acc9c72911b165cf6eb1dc31453">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a010c4f710e0e242d9d89383a49573376"></a><!-- doxytag: member="MergeQuery::isNull" ref="a010c4f710e0e242d9d89383a49573376" args="($field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::isNull </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a2978b536a3fe62b21e940366c9cb5923">QueryConditionInterface::isNull()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a2978b536a3fe62b21e940366c9cb5923">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="aa34f8ac97b0571d49fbc20557dfce97b"></a><!-- doxytag: member="MergeQuery::key" ref="aa34f8ac97b0571d49fbc20557dfce97b" args="(array $fields, array $values=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::key </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>values</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the key field(s) to be used as conditions for this query.</p>
<p>This method should only be called once. It may be called either with a single associative array or two indexed arrays. If called with an associative array, the keys are taken to be the fields and the values are taken to be the corresponding values to set. If called with two arrays, the first array is taken as the fields and the second array is taken as the corresponding values.</p>
<p>The fields are copied to the condition of the query and the INSERT part. If no other method is called, the UPDATE will become a no-op.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An array of fields to set, or an associative array of fields and values. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$values</em>&nbsp;</td><td>An array of values to set into the database. The values must be specified in the same order as the $fields array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> The called object. </dd></dl>

</div>
</div>
<a class="anchor" id="a3749f7ccb2e71b8ff1570161418cbf2b"></a><!-- doxytag: member="MergeQuery::notExists" ref="a3749f7ccb2e71b8ff1570161418cbf2b" args="(SelectQueryInterface $select)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::notExists </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceSelectQueryInterface.html">SelectQueryInterface</a> $&nbsp;</td>
          <td class="paramname"> <em>select</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a8aae11796846850edbf8caa3a9d4afcd">QueryConditionInterface::notExists()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a8aae11796846850edbf8caa3a9d4afcd">QueryConditionInterface</a>.</p>

</div>
</div>
<a class="anchor" id="ad5b51b48eaec3821181cf8e6c09bf29e"></a><!-- doxytag: member="MergeQuery::updateFields" ref="ad5b51b48eaec3821181cf8e6c09bf29e" args="(array $fields)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::updateFields </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>fields</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds a set of field-&gt;value pairs to be updated.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An associative array of fields to write into the database. The array keys are the field names and the values are the values to which to set them.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> The called object. </dd></dl>

</div>
</div>
<a class="anchor" id="a630cdd152352b1229cc712ec261139cf"></a><!-- doxytag: member="MergeQuery::useDefaults" ref="a630cdd152352b1229cc712ec261139cf" args="(array $fields)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::useDefaults </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>fields</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Specifies fields for which the database-defaults should be used.</p>
<p>If you want to force a given field to use the database-defined default, not NULL or undefined, use this method to instruct the database to use default values explicitly. In most cases this will not be necessary unless you are inserting a row that is all default values, as you cannot specify no values in an INSERT query.</p>
<p>Specifying a field both in <a class="el" href="classMergeQuery.html#ae58f2865c72dfc4c310ec4c17fd4e72d">fields()</a> and in <a class="el" href="classMergeQuery.html#a630cdd152352b1229cc712ec261139cf">useDefaults()</a> is an error and will not execute.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$fields</em>&nbsp;</td><td>An array of values for which to use the default values specified in the table definition.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> The called object. </dd></dl>

</div>
</div>
<a class="anchor" id="a1d46b2fc285ec9f402ac53800e3cd58f"></a><!-- doxytag: member="MergeQuery::where" ref="a1d46b2fc285ec9f402ac53800e3cd58f" args="($snippet, $args=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::where </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>snippet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>args</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a42c03c74dd81ef6d77041e67ec12e735">QueryConditionInterface::where()</a>. </p>

<p>Implements <a class="el" href="interfaceQueryConditionInterface.html#a42c03c74dd81ef6d77041e67ec12e735">QueryConditionInterface</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a8f593caec31bdbc33f24bd741a58a6e5"></a><!-- doxytag: member="MergeQuery::$conditionTable" ref="a8f593caec31bdbc33f24bd741a58a6e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergeQuery::$conditionTable<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The table or subquery to be used for the condition. </p>

</div>
</div>
<a class="anchor" id="a42f1aad21544decc65082fc10fd2d68a"></a><!-- doxytag: member="MergeQuery::STATUS_INSERT" ref="a42f1aad21544decc65082fc10fd2d68a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classMergeQuery.html#a42f1aad21544decc65082fc10fd2d68a">MergeQuery::STATUS_INSERT</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returned by <a class="el" href="classMergeQuery.html#aeea46fdb119752efd2048d66b9fe8de8">execute()</a> if an INSERT query has been executed. </p>

</div>
</div>
<a class="anchor" id="ad79d3ece9a03a3a63bef6560e90fc776"></a><!-- doxytag: member="MergeQuery::STATUS_UPDATE" ref="ad79d3ece9a03a3a63bef6560e90fc776" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classMergeQuery.html#ad79d3ece9a03a3a63bef6560e90fc776">MergeQuery::STATUS_UPDATE</a> = 2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returned by <a class="el" href="classMergeQuery.html#aeea46fdb119752efd2048d66b9fe8de8">execute()</a> if an UPDATE query has been executed. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>html/includes/database/<a class="el" href="query_8inc.html">query.inc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
