<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: html/includes/batch.inc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>html/includes/batch.inc File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a43cd9cb0044756355a8e3c68356fbb16">batch_load</a> ($id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a5535c7cfeae572bda2c11f3e597a55b6">_batch_page</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a1d38b90eeddc5da76b02e87fb6158ed1">_batch_start</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#ac8152d29181479967c4bdc7e0caf920e">_batch_progress_page_js</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a200def74deec79748ee5accf5117db6d">_batch_do</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#ab233b667c1237a8e177e1e6aa1b890ba">_batch_progress_page_nojs</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a0e08303b9f24da1acff2fd1b41a7bc32">_batch_api_percentage</a> ($total, $current)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a1a536764a1a9bf283bcceddc03b462d7">_batch_current_set</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a48dd7f59b745d8e01fce39996d0c826e">_batch_next_set</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a7e7b4cbc351842ca1b27cc780b0f219b">_batch_finished</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a85d830f44fb762da6e9fdb838180c85f">_batch_shutdown</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Batch processing API for processes to run in multiple HTTP requests.</p>
<p>Note that batches are usually invoked by form submissions, which is why the core interaction functions of the batch processing API live in form.inc.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>form.inc </dd>
<dd>
<a class="el" href="group__batch.html#ga9ff3f18b3bdd1d62ab7ac681a22a7170">batch_set()</a> </dd>
<dd>
<a class="el" href="group__batch.html#gab17f59692632a482cee4f65f27d082f7">batch_process()</a> </dd>
<dd>
<a class="el" href="group__batch.html#ga971f5246c6e8e536d0b20529fb2e2638">batch_get()</a> </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0e08303b9f24da1acff2fd1b41a7bc32"></a><!-- doxytag: member="batch.inc::_batch_api_percentage" ref="a0e08303b9f24da1acff2fd1b41a7bc32" args="($total, $current)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_api_percentage </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>total</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>current</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Formats the percent completion for a batch set.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$total</em>&nbsp;</td><td>The total number of operations. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$current</em>&nbsp;</td><td>The number of the current operation. This may be a floating point number rather than an integer in the case of a multi-step operation that is not yet complete; in that case, the fractional part of $current represents the fraction of the operation that has been completed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The properly formatted percentage, as a string. We output percentages using the correct number of decimal places so that we never print "100%" until we are finished, but we also never print more decimal places than are meaningful.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1a536764a1a9bf283bcceddc03b462d7"></a><!-- doxytag: member="batch.inc::_batch_current_set" ref="a1a536764a1a9bf283bcceddc03b462d7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">&amp; _batch_current_set </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the batch set being currently processed. </p>

</div>
</div>
<a class="anchor" id="a200def74deec79748ee5accf5117db6d"></a><!-- doxytag: member="batch.inc::_batch_do" ref="a200def74deec79748ee5accf5117db6d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_do </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Does one execution pass with JavaScript and returns progress to the browser.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="batch_8inc.html#ac8152d29181479967c4bdc7e0caf920e">_batch_progress_page_js()</a> </dd>
<dd>
<a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7e7b4cbc351842ca1b27cc780b0f219b"></a><!-- doxytag: member="batch.inc::_batch_finished" ref="a7e7b4cbc351842ca1b27cc780b0f219b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_finished </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ends the batch processing.</p>
<p>Call the 'finished' callback of each batch set to allow custom handling of the results and resolve page redirection. </p>

</div>
</div>
<a class="anchor" id="a48dd7f59b745d8e01fce39996d0c826e"></a><!-- doxytag: member="batch.inc::_batch_next_set" ref="a48dd7f59b745d8e01fce39996d0c826e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_next_set </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieves the next set in a batch.</p>
<p>If there is a subsequent set in this batch, assign it as the new set to process and execute its form submit handler (if defined), which may add further sets to this batch.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if a subsequent set was found in the batch. </dd></dl>

</div>
</div>
<a class="anchor" id="a5535c7cfeae572bda2c11f3e597a55b6"></a><!-- doxytag: member="batch.inc::_batch_page" ref="a5535c7cfeae572bda2c11f3e597a55b6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_page </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Renders the batch processing page based on the current state of the batch.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="batch_8inc.html#a85d830f44fb762da6e9fdb838180c85f">_batch_shutdown()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af411ff0cae660684809c5f6a8dbc0353"></a><!-- doxytag: member="batch.inc::_batch_process" ref="af411ff0cae660684809c5f6a8dbc0353" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_process </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Processes sets in a batch.</p>
<p>If the batch was marked for progressive execution (default), this executes as many operations in batch sets until an execution time of 1 second has been exceeded. It will continue with the next operation of the same batch set in the next request.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An array containing a completion value (in percent) and a status message. </dd></dl>

</div>
</div>
<a class="anchor" id="ac8152d29181479967c4bdc7e0caf920e"></a><!-- doxytag: member="batch.inc::_batch_progress_page_js" ref="ac8152d29181479967c4bdc7e0caf920e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_progress_page_js </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Outputs a batch processing page with JavaScript support.</p>
<p>This initializes the batch and error messages. Note that in JavaScript-based processing, the batch processing page is displayed only once and updated via AHAH requests, so only the first batch set gets to define the page title. Titles specified by subsequent batch sets are not displayed.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__batch.html#ga9ff3f18b3bdd1d62ab7ac681a22a7170">batch_set()</a> </dd>
<dd>
<a class="el" href="batch_8inc.html#a200def74deec79748ee5accf5117db6d">_batch_do()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab233b667c1237a8e177e1e6aa1b890ba"></a><!-- doxytag: member="batch.inc::_batch_progress_page_nojs" ref="ab233b667c1237a8e177e1e6aa1b890ba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_progress_page_nojs </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Outputs a batch processing page without JavaScript support.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a85d830f44fb762da6e9fdb838180c85f"></a><!-- doxytag: member="batch.inc::_batch_shutdown" ref="a85d830f44fb762da6e9fdb838180c85f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_shutdown </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Shutdown function: Stores the current batch data for the next request.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="batch_8inc.html#a5535c7cfeae572bda2c11f3e597a55b6">_batch_page()</a> </dd>
<dd>
<a class="el" href="group__php__wrappers.html#gac7eaf11b49995f7f539f5c830a65b34f">drupal_register_shutdown_function()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1d38b90eeddc5da76b02e87fb6158ed1"></a><!-- doxytag: member="batch.inc::_batch_start" ref="a1d38b90eeddc5da76b02e87fb6158ed1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_batch_start </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the batch processing.</p>
<p>JavaScript-enabled clients are identified by the 'has_js' cookie set in drupal.js. If no JavaScript-enabled page has been visited during the current user's browser session, the non-JavaScript version is returned. </p>

</div>
</div>
<a class="anchor" id="a43cd9cb0044756355a8e3c68356fbb16"></a><!-- doxytag: member="batch.inc::batch_load" ref="a43cd9cb0044756355a8e3c68356fbb16" args="($id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">batch_load </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a batch from the database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$id</em>&nbsp;</td><td>The ID of the batch to load. When a progressive batch is being processed, the relevant ID is found in $_REQUEST['id'].</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An array representing the batch, or FALSE if no batch was found. </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
