<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: Field Language API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Field Language API</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#gafbd7a022815887d2aadf983656571e98">field_multilingual_settings_changed</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#ga3dbd9611836d9bba15c15f0a8ae83c9b">field_available_languages</a> ($entity_type, $field)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#gaf7105831bb68e11809f92c990b50fb6c">_field_language_suggestion</a> ($available_languages, $language_suggestion, $field_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#ga78c369e7b76edbb662d8f2e04bc82ad4">field_content_languages</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#gae2315cbfa6724de32eeea9e06a1811a7">field_is_translatable</a> ($entity_type, $field)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#ga56d98c14a956746f91373b68b404a66b">field_has_translation_handler</a> ($entity_type, $handler=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#ga3c8ddbf445782a8ac352279c606aa30c">field_valid_language</a> ($langcode, $default=TRUE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__field__language.html#gaff79088cd3951d2127adad1a2c13ad3e">field_language</a> ($entity_type, $entity, $field_name=NULL, $langcode=NULL)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Handling of multilingual fields.</p>
<p>Fields natively implement multilingual support, and all fields use the following structure: </p>
<div class="fragment"><pre class="fragment"> $entity-&gt;{$field_name}[$langcode][$delta][$column_name]
</pre></div><p> Every field can hold a single or multiple value for each language belonging to the available languages set:</p>
<ul>
<li>For untranslatable fields this set only contains LANGUAGE_NONE.</li>
<li>For translatable fields this set can contain any language code. By default it is the list returned by <a class="el" href="group__field__language.html#ga78c369e7b76edbb662d8f2e04bc82ad4">field_content_languages()</a>, which contains all installed languages with the addition of LANGUAGE_NONE. This default can be altered by modules implementing <a class="el" href="group__field__attach.html#gaea2e719de3ad070e161d0d386dd18303">hook_field_available_languages_alter()</a>.</li>
</ul>
<p>The available languages for a particular field are returned by <a class="el" href="group__field__language.html#ga3dbd9611836d9bba15c15f0a8ae83c9b">field_available_languages()</a>. Whether a field is translatable is determined by calling <a class="el" href="group__field__language.html#gae2315cbfa6724de32eeea9e06a1811a7">field_is_translatable()</a>, which checks the $field['translatable'] property returned by <a class="el" href="group__field__info.html#ga74cfc942cd2baa5c49780b08c5d357d4">field_info_field()</a>, and whether there is at least one translation handler available for the field. A translation handler is a module registering itself via <a class="el" href="group__hooks.html#gaf02318e9d0e8cdbf6d187b271b9969a8">hook_entity_info()</a> to handle field translations.</p>
<p>By default, <a class="el" href="group__field__attach.html#ga65f891a5eea6513f8505f5cfc5894896">_field_invoke()</a> and <a class="el" href="group__field__attach.html#ga791aeba11e29038daf3e798dbea0df60">_field_invoke_multiple()</a> are processing a field in all available languages, unless they are given a language suggestion. Based on that suggestion, <a class="el" href="group__field__language.html#gaf7105831bb68e11809f92c990b50fb6c">_field_language_suggestion()</a> determines the languages to act on.</p>
<p>Most field_attach_*() functions act on all available languages, except for the following:</p>
<ul>
<li><a class="el" href="group__field__attach.html#gac5bd0213dae78f7c1b3235f3acdde2c6">field_attach_form()</a> only takes a single language code, specifying which language the field values will be submitted in.</li>
<li><a class="el" href="group__field__attach.html#gaa752a8fd31173fd2308d71eb059e00c7">field_attach_view()</a> requires the language the entity will be displayed in. Since it is unknown whether a field translation exists for the requested language, the translation handler is responsible for performing one of the following actions:<ul>
<li>Ignore missing translations, i.e. do not show any field values for the requested language. For example, see <a class="el" href="locale_8module.html#a2e2bf06bf347a63df595c58aad152428">locale_field_language_alter()</a>.</li>
<li>Provide a value in a different language as fallback. By default, the fallback logic is applied separately to each field to ensure that there is a value for each field to display. The field language fallback logic relies on the global language fallback configuration. Therefore, the displayed field values can be in the requested language, but may be different if no values for the requested language are available. The default language fallback rules inspect all the enabled languages ordered by their weight. This behavior can be altered or even disabled by modules implementing <a class="el" href="group__field__attach.html#ga6411d5b5a528850a6e53c87ff899cabc">hook_field_language_alter()</a>, making it possible to choose the first approach. The display language for each field is returned by <a class="el" href="group__field__language.html#gaff79088cd3951d2127adad1a2c13ad3e">field_language()</a>.</li>
</ul>
</li>
</ul>
<p>See <a class="el" href="group__field.html">Field API </a> for information about the other parts of the Field API. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaf7105831bb68e11809f92c990b50fb6c"></a><!-- doxytag: member="field.multilingual.inc::_field_language_suggestion" ref="gaf7105831bb68e11809f92c990b50fb6c" args="($available_languages, $language_suggestion, $field_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_field_language_suggestion </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>available_languages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>language_suggestion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process the given language suggestion based on the available languages.</p>
<p>If a non-empty language suggestion is provided it must appear among the available languages, otherwise it will be ignored.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$available_languages</em>&nbsp;</td><td>An array of valid language codes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$language_suggestion</em>&nbsp;</td><td>A language code or an array of language codes keyed by field name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field_name</em>&nbsp;</td><td>The name of the field being processed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An array of valid language codes. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3dbd9611836d9bba15c15f0a8ae83c9b"></a><!-- doxytag: member="field.multilingual.inc::field_available_languages" ref="ga3dbd9611836d9bba15c15f0a8ae83c9b" args="($entity_type, $field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">field_available_languages </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>entity_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Collects the available languages for the given entity type and field.</p>
<p>If the given field has language support enabled, an array of available languages will be returned, otherwise only LANGUAGE_NONE will be returned. Since the default value for a 'translatable' entity property is FALSE, we ensure that only entities that are able to handle translations actually get translatable fields.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$entity_type</em>&nbsp;</td><td>The type of the entity the field is attached to, e.g. 'node' or 'user'. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>A field structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An array of valid language codes. </dd></dl>

</div>
</div>
<a class="anchor" id="ga78c369e7b76edbb662d8f2e04bc82ad4"></a><!-- doxytag: member="field.multilingual.inc::field_content_languages" ref="ga78c369e7b76edbb662d8f2e04bc82ad4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">field_content_languages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns available content languages.</p>
<p>The languages that may be associated to fields include LANGUAGE_NONE.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An array of language codes. </dd></dl>

</div>
</div>
<a class="anchor" id="ga56d98c14a956746f91373b68b404a66b"></a><!-- doxytag: member="field.multilingual.inc::field_has_translation_handler" ref="ga56d98c14a956746f91373b68b404a66b" args="($entity_type, $handler=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">field_has_translation_handler </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>entity_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>handler</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if a module is registered as a translation handler for a given entity.</p>
<p>If no handler is passed, simply check if there is any translation handler enabled for the given entity type.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$entity_type</em>&nbsp;</td><td>The type of the entity whose fields are to be translated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$handler</em>&nbsp;</td><td>(optional) The name of the handler to be checked. Defaults to NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE, if the given handler is allowed to manage field translations. If no handler is passed, TRUE means there is at least one registered translation handler. </dd></dl>

</div>
</div>
<a class="anchor" id="gae2315cbfa6724de32eeea9e06a1811a7"></a><!-- doxytag: member="field.multilingual.inc::field_is_translatable" ref="gae2315cbfa6724de32eeea9e06a1811a7" args="($entity_type, $field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">field_is_translatable </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>entity_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks whether a field has language support.</p>
<p>A field has language support enabled if its 'translatable' property is set to TRUE, and its entity type has at least one translation handler registered.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$entity_type</em>&nbsp;</td><td>The type of the entity the field is attached to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>A field data structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if the field can be translated. </dd></dl>

</div>
</div>
<a class="anchor" id="gaff79088cd3951d2127adad1a2c13ad3e"></a><!-- doxytag: member="field.multilingual.inc::field_language" ref="gaff79088cd3951d2127adad1a2c13ad3e" args="($entity_type, $entity, $field_name=NULL, $langcode=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">field_language </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>entity_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field_name</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>langcode</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the display language for the fields attached to the given entity.</p>
<p>The actual language for each given field is determined based on the requested language and the actual data available in the fields themselves. If there is no registered translation handler for the given entity type, the display language to be used is just LANGUAGE_NONE, as no other language code is allowed by <a class="el" href="group__field__language.html#ga3dbd9611836d9bba15c15f0a8ae83c9b">field_available_languages()</a>. If translation handlers are found, we let modules provide alternative display languages for fields not having the requested language available. Core language fallback rules are provided by <a class="el" href="locale_8module.html#a434eb64757d6496331a45365258fbecc">locale_field_language_fallback()</a> which is called by <a class="el" href="locale_8module.html#a2e2bf06bf347a63df595c58aad152428">locale_field_language_alter()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$entity_type</em>&nbsp;</td><td>The type of $entity. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$entity</em>&nbsp;</td><td>The entity to be displayed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$field_name</em>&nbsp;</td><td>(optional) The name of the field to be displayed. Defaults to NULL. If no value is specified, the display languages for every field attached to the given entity will be returned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$langcode</em>&nbsp;</td><td>(optional) The language code $entity has to be displayed in. Defaults to NULL. If no value is given the current language will be used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A language code if a field name is specified, an array of language codes keyed by field name otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gafbd7a022815887d2aadf983656571e98"></a><!-- doxytag: member="field.multilingual.inc::field_multilingual_settings_changed" ref="gafbd7a022815887d2aadf983656571e98" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">field_multilingual_settings_changed </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#ga87a996b741bb1787b2451a2b842e20e8">hook_multilingual_settings_changed()</a>. </p>

</div>
</div>
<a class="anchor" id="ga3c8ddbf445782a8ac352279c606aa30c"></a><!-- doxytag: member="field.multilingual.inc::field_valid_language" ref="ga3c8ddbf445782a8ac352279c606aa30c" args="($langcode, $default=TRUE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">field_valid_language </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>langcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>default</em> = <code>TRUE</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ensures that a given language code is valid.</p>
<p>Checks whether the given language is one of the enabled languages. Otherwise, it returns the current, global language; or the site's default language, if the additional parameter $default is TRUE.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$langcode</em>&nbsp;</td><td>The language code to validate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$default</em>&nbsp;</td><td>Whether to return the default language code or the current language code in case $langcode is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A valid language code. </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
