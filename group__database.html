<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: Database abstraction layer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Database abstraction layer</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html">DatabaseConnection</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html">Database</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionNoActiveException.html">DatabaseTransactionNoActiveException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionNameNonUniqueException.html">DatabaseTransactionNameNonUniqueException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionCommitFailedException.html">DatabaseTransactionCommitFailedException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionExplicitCommitNotAllowedException.html">DatabaseTransactionExplicitCommitNotAllowedException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionOutOfOrderException.html">DatabaseTransactionOutOfOrderException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInvalidMergeQueryException.html">InvalidMergeQueryException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFieldsOverlapException.html">FieldsOverlapException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoFieldsException.html">NoFieldsException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnectionNotDefinedException.html">DatabaseConnectionNotDefinedException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseDriverNotSpecifiedException.html">DatabaseDriverNotSpecifiedException</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransaction.html">DatabaseTransaction</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceDatabaseStatementInterface.html">DatabaseStatementInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseStatementBase.html">DatabaseStatementBase</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseStatementEmpty.html">DatabaseStatementEmpty</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection__mysql.html">DatabaseConnection_mysql</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInsertQuery__mysql.html">InsertQuery_mysql</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTruncateQuery__mysql.html">TruncateQuery_mysql</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection__pgsql.html">DatabaseConnection_pgsql</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSelectQuery__pgsql.html">SelectQuery_pgsql</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseStatementPrefetch.html">DatabaseStatementPrefetch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryConditionInterface.html">QueryConditionInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryAlterableInterface.html">QueryAlterableInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryPlaceholderInterface.html">QueryPlaceholderInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html">Query</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInsertQuery.html">InsertQuery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeleteQuery.html">DeleteQuery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTruncateQuery.html">TruncateQuery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUpdateQuery.html">UpdateQuery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html">MergeQuery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseCondition.html">DatabaseCondition</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryExtendableInterface.html">QueryExtendableInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceSelectQueryInterface.html">SelectQueryInterface</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSelectQueryExtender.html">SelectQueryExtender</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSelectQuery.html">SelectQuery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection__sqlite.html">DatabaseConnection_sqlite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseStatement__sqlite.html">DatabaseStatement_sqlite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInsertQuery__sqlite.html">InsertQuery_sqlite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUpdateQuery__sqlite.html">UpdateQuery_sqlite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeleteQuery__sqlite.html">DeleteQuery_sqlite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTruncateQuery__sqlite.html">TruncateQuery_sqlite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSelectQuery__sqlite.html">SelectQuery_sqlite</a></td></tr>
<tr><td colspan="2"><h2>Files</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysql_2query_8inc.html">query.inc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgsql_2query_8inc.html">query.inc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8inc.html">query.inc</a></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga9f09406f95a22d365c9faa8721f57126">POSTGRESQL_NEXTID_LOCK</a> </td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gafa3b6cb2b2f61479cc63a4150c62da9b">db_query</a> ($query, array $args=array(), array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf">db_query_range</a> ($query, $from, $count, array $args=array(), array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gaac717e09516a8acb0ff82b3a990c13a6">db_query_temporary</a> ($query, array $args=array(), array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gaadfbffaf30ff5eb14f1bd88619351345">db_insert</a> ($table, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga429c73a1bdc6dbb18c4a4a8a2235beaf">db_merge</a> ($table, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga40967197ee5d6a23a5c5a77e627067fe">db_update</a> ($table, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga72f0ccecc0ba181de16c6e3451150f2c">db_delete</a> ($table, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gaf6b4b59f572821cfd043317b81eeb71e">db_truncate</a> ($table, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga9e030cee657d64e3d8e524c65814cc9f">db_select</a> ($table, $alias=NULL, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gabdd0e69f5b2c63f8ad9e76f0fdf552be">db_transaction</a> ($name=NULL, array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga954d1bbb12742f285927e43f9489fdaf">db_set_active</a> ($key= 'default')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga3bc27db8c5946da0cab63d9b6314d48d">db_escape_table</a> ($table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga7e3c82a45a3e894ce2b4a5a37fa69246">db_escape_field</a> ($field)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga4e86622a079f0992dbb987e66320be7a">db_like</a> ($string)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gabf958ef859f66154f7fd705eda7a06af">db_driver</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga3ee89e12a6f70888bfe4ac30f89df442">db_close</a> (array $options=array())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#gab0a2cb3e94525a74407740043b821c5b">db_next_id</a> ($existing_id=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga1a7695a360b8c2219fe1998dfc272080">db_or</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga39ab6e9c3b5316eb4d8fe8f52af91acc">db_and</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga85bb17ee005f930dd2caa93f0752d0e8">db_xor</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database.html#ga7e591c732d1eb7da6813ef79867a9859">db_condition</a> ($conjunction)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Allow the use of different database servers using the same code base.</p>
<p>Drupal provides a database abstraction layer to provide developers with the ability to support multiple database servers easily. The intent of this layer is to preserve the syntax and power of SQL as much as possible, but also allow developers a way to leverage more complex functionality in a unified way. It also provides a structured interface for dynamically constructing queries when appropriate, and enforcing security checks and similar good practices.</p>
<p>The system is built atop PHP's PDO (PHP Data Objects) database API and inherits much of its syntax and semantics.</p>
<p>Most Drupal database SELECT queries are performed by a call to <a class="el" href="group__database.html#gafa3b6cb2b2f61479cc63a4150c62da9b">db_query()</a> or <a class="el" href="group__database.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf">db_query_range()</a>. Module authors should also consider using the <a class="el" href="classPagerDefault.html">PagerDefault</a> Extender for queries that return results that need to be presented on multiple pages, and the Tablesort Extender for generating appropriate queries for sortable tables.</p>
<p>For example, one might wish to return a list of the most recent 10 nodes authored by a given user. Instead of directly issuing the SQL query </p>
<div class="fragment"><pre class="fragment"> SELECT n.nid, n.title, n.created FROM node n WHERE n.uid = $uid LIMIT 0, 10;
</pre></div><p> one would instead call the Drupal functions: </p>
<div class="fragment"><pre class="fragment"> $result = <a class="code" href="group__database.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf">db_query_range</a>(<span class="stringliteral">&apos;SELECT n.nid, n.title, n.created</span>
<span class="stringliteral">   FROM {node} n WHERE n.uid = :uid&apos;</span>, 0, 10, array(<span class="stringliteral">&apos;:uid&apos;</span> =&gt; $uid));
 <span class="keywordflow">foreach</span> ($result as $record) {
   <span class="comment">// Perform operations on $record-&gt;title, etc. here.</span>
 }
</pre></div><p> Curly braces are used around "node" to provide table prefixing via <a class="el" href="classDatabaseConnection.html#a10dfbe0177bc8c79a8589cc84afe24dd">DatabaseConnection::prefixTables()</a>. The explicit use of a user ID is pulled out into an argument passed to <a class="el" href="group__database.html#gafa3b6cb2b2f61479cc63a4150c62da9b">db_query()</a> so that SQL injection attacks from user input can be caught and nullified. The LIMIT syntax varies between database servers, so that is abstracted into <a class="el" href="group__database.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf">db_query_range()</a> arguments. Finally, note the PDO-based ability to iterate over the result set using foreach ().</p>
<p>All queries are passed as a prepared statement string. A prepared statement is a "template" of a query that omits literal or variable values in favor of placeholders. The values to place into those placeholders are passed separately, and the database driver handles inserting the values into the query in a secure fashion. That means you should never quote or string-escape a value to be inserted into the query.</p>
<p>There are two formats for placeholders: named and unnamed. Named placeholders are strongly preferred in all cases as they are more flexible and self-documenting. Named placeholders should start with a colon ":" and can be followed by one or more letters, numbers or underscores.</p>
<p>Named placeholders begin with a colon followed by a unique string. Example: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE uid=:uid;
</pre></div><p>":uid" is a placeholder that will be replaced with a literal value when the query is executed. A given placeholder label cannot be repeated in a given query, even if the value should be the same. When using named placeholders, the array of arguments to the query must be an associative array where keys are a placeholder label (e.g., :uid) and the value is the corresponding value to use. The array may be in any order.</p>
<p>Unnamed placeholders are simply a question mark. Example: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE uid=?;
</pre></div><p>In this case, the array of arguments must be an indexed array of values to use in the exact same order as the placeholders in the query.</p>
<p>Note that placeholders should be a "complete" value. For example, when running a LIKE query the SQL wildcard character, %, should be part of the value, not the query itself. Thus, the following is incorrect: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE title LIKE :title%;
</pre></div><p> It should instead read: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE title LIKE :title;
</pre></div><p> and the value for :title should include a % as appropriate. Again, note the lack of quotation marks around :title. Because the value is not inserted into the query as one big string but as an explicitly separate value, the database server knows where the query ends and a value begins. That is considerably more secure against SQL injection than trying to remember which values need quotation marks and string escaping and which don't.</p>
<p>INSERT, UPDATE, and DELETE queries need special care in order to behave consistently across all different databases. Therefore, they use a special object-oriented API for defining a query structurally. For example, rather than: </p>
<div class="fragment"><pre class="fragment"> INSERT INTO node (nid, title, body) VALUES (1, &apos;my title&apos;, &apos;my body&apos;);
</pre></div><p> one would instead write: </p>
<div class="fragment"><pre class="fragment"> $fields = array(<span class="stringliteral">&apos;nid&apos;</span> =&gt; 1, <span class="stringliteral">&apos;title&apos;</span> =&gt; <span class="stringliteral">&apos;my title&apos;</span>, <span class="stringliteral">&apos;body&apos;</span> =&gt; <span class="stringliteral">&apos;my body&apos;</span>);
 <a class="code" href="group__database.html#gaadfbffaf30ff5eb14f1bd88619351345">db_insert</a>(<span class="stringliteral">&apos;node&apos;</span>)-&gt;fields($fields)-&gt;execute();
</pre></div><p> This method allows databases that need special data type handling to do so, while also allowing optimizations such as multi-insert queries. UPDATE and DELETE queries have a similar pattern.</p>
<p>Drupal also supports transactions, including a transparent fallback for databases that do not support transactions. To start a new transaction, simply call $txn = <a class="el" href="group__database.html#gabdd0e69f5b2c63f8ad9e76f0fdf552be">db_transaction()</a>; in your own code. The transaction will remain open for as long as the variable $txn remains in scope. When $txn is destroyed, the transaction will be committed. If your transaction is nested inside of another then Drupal will track each transaction and only commit the outer-most transaction when the last transaction object goes out out of scope, that is, all relevant queries completed successfully.</p>
<p>Example: </p>
<div class="fragment"><pre class="fragment"> function my_transaction_function() {
   <span class="comment">// The transaction opens here.</span>
   $txn = <a class="code" href="group__database.html#gabdd0e69f5b2c63f8ad9e76f0fdf552be">db_transaction</a>();

   <span class="keywordflow">try</span> {
     $id = <a class="code" href="group__database.html#gaadfbffaf30ff5eb14f1bd88619351345">db_insert</a>(<span class="stringliteral">&apos;example&apos;</span>)
       -&gt;fields(array(
         <span class="stringliteral">&apos;field1&apos;</span> =&gt; <span class="stringliteral">&apos;mystring&apos;</span>,
         <span class="stringliteral">&apos;field2&apos;</span> =&gt; 5,
       ))
       -&gt;execute();

     my_other_function($id);

     <span class="keywordflow">return</span> $id;
   }
   <span class="keywordflow">catch</span> (<a class="code" href="classException.html">Exception</a> $e) {
     <span class="comment">// Something went wrong somewhere, so roll back now.</span>
     $txn-&gt;rollback();
     <span class="comment">// Log the exception to watchdog.</span>
     <a class="code" href="bootstrap_8inc.html#aba38f35647efce6b4099dc59131e216b">watchdog_exception</a>(<span class="stringliteral">&apos;type&apos;</span>, $e);
   }

   <span class="comment">// $txn goes out of scope here.  Unless the transaction was rolled back, it</span>
   <span class="comment">// gets automatically committed here.</span>
 }

 function my_other_function($id) {
   <span class="comment">// The transaction is still open here.</span>

   <span class="keywordflow">if</span> ($id % 2 == 0) {
     <a class="code" href="group__database.html#ga40967197ee5d6a23a5c5a77e627067fe">db_update</a>(<span class="stringliteral">&apos;example&apos;</span>)
       -&gt;condition(<span class="stringliteral">&apos;id&apos;</span>, $id)
       -&gt;fields(array(<span class="stringliteral">&apos;field2&apos;</span> =&gt; 10))
       -&gt;execute();
   }
 }
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a href="http://drupal.org/developing/api/database">http://drupal.org/developing/api/database</a> </dd></dl>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga9f09406f95a22d365c9faa8721f57126"></a><!-- doxytag: member="database.inc::POSTGRESQL_NEXTID_LOCK" ref="ga9f09406f95a22d365c9faa8721f57126" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__database.html#ga9f09406f95a22d365c9faa8721f57126">POSTGRESQL_NEXTID_LOCK</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The name by which to obtain a lock for retrive the next insert id. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga39ab6e9c3b5316eb4d8fe8f52af91acc"></a><!-- doxytag: member="database.inc::db_and" ref="ga39ab6e9c3b5316eb4d8fe8f52af91acc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_and </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classDatabaseCondition.html">DatabaseCondition</a>, set to "AND" all conditions together.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classDatabaseCondition.html">DatabaseCondition</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga3ee89e12a6f70888bfe4ac30f89df442"></a><!-- doxytag: member="database.inc::db_close" ref="ga3ee89e12a6f70888bfe4ac30f89df442" args="(array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_close </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Closes the active database connection.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control which connection is closed. Only the target key has any meaning in this case. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7e591c732d1eb7da6813ef79867a9859"></a><!-- doxytag: member="database.inc::db_condition" ref="ga7e591c732d1eb7da6813ef79867a9859" args="($conjunction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_condition </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>conjunction</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classDatabaseCondition.html">DatabaseCondition</a>, set to the specified conjunction.</p>
<p>Internal API function call. The <a class="el" href="group__database.html#ga39ab6e9c3b5316eb4d8fe8f52af91acc">db_and()</a>, <a class="el" href="group__database.html#ga1a7695a360b8c2219fe1998dfc272080">db_or()</a>, and <a class="el" href="group__database.html#ga85bb17ee005f930dd2caa93f0752d0e8">db_xor()</a> functions are preferred.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$conjunction</em>&nbsp;</td><td>The conjunction to use for query conditions (AND, OR or XOR). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classDatabaseCondition.html">DatabaseCondition</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga72f0ccecc0ba181de16c6e3451150f2c"></a><!-- doxytag: member="database.inc::db_delete" ref="ga72f0ccecc0ba181de16c6e3451150f2c" args="($table, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_delete </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classDeleteQuery.html">DeleteQuery</a> object for the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table from which to delete. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classDeleteQuery.html">DeleteQuery</a> A new <a class="el" href="classDeleteQuery.html">DeleteQuery</a> object for this connection. </dd></dl>

</div>
</div>
<a class="anchor" id="gabf958ef859f66154f7fd705eda7a06af"></a><!-- doxytag: member="database.inc::db_driver" ref="gabf958ef859f66154f7fd705eda7a06af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_driver </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieves the name of the currently active database driver.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The name of the currently active database driver. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7e3c82a45a3e894ce2b4a5a37fa69246"></a><!-- doxytag: member="database.inc::db_escape_field" ref="ga7e3c82a45a3e894ce2b4a5a37fa69246" args="($field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_escape_field </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>field</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Restricts a dynamic column or constraint name to safe characters.</p>
<p>Only keeps alphanumeric and underscores.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$field</em>&nbsp;</td><td>The field name to escape.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The escaped field name as a string. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3bc27db8c5946da0cab63d9b6314d48d"></a><!-- doxytag: member="database.inc::db_escape_table" ref="ga3bc27db8c5946da0cab63d9b6314d48d" args="($table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_escape_table </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Restricts a dynamic table name to safe characters.</p>
<p>Only keeps alphanumeric and underscores.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table name to escape.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The escaped table name as a string. </dd></dl>

</div>
</div>
<a class="anchor" id="gaadfbffaf30ff5eb14f1bd88619351345"></a><!-- doxytag: member="database.inc::db_insert" ref="gaadfbffaf30ff5eb14f1bd88619351345" args="($table, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_insert </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classInsertQuery.html">InsertQuery</a> object for the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table into which to insert. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classInsertQuery.html">InsertQuery</a> A new <a class="el" href="classInsertQuery.html">InsertQuery</a> object for this connection. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4e86622a079f0992dbb987e66320be7a"></a><!-- doxytag: member="database.inc::db_like" ref="ga4e86622a079f0992dbb987e66320be7a" args="($string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_like </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>string</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Escapes characters that work as wildcard characters in a LIKE pattern.</p>
<p>The wildcard characters "%" and "_" as well as backslash are prefixed with a backslash. Use this to do a search for a verbatim string without any wildcard behavior.</p>
<p>For example, the following does a case-insensitive query for all rows whose name starts with $prefix: </p>
<div class="fragment"><pre class="fragment"> $result = <a class="code" href="group__database.html#gafa3b6cb2b2f61479cc63a4150c62da9b">db_query</a>(
   <span class="stringliteral">&apos;SELECT * FROM person WHERE name LIKE :pattern&apos;</span>,
   array(<span class="stringliteral">&apos;:pattern&apos;</span> =&gt; <a class="code" href="group__database.html#ga4e86622a079f0992dbb987e66320be7a">db_like</a>($prefix) . <span class="charliteral">&apos;%&apos;</span>)
 );
</pre></div><p>Backslash is defined as escape character for LIKE patterns in <a class="el" href="classDatabaseCondition.html#afb4e820b6d1719bf940526beef27dc7a">DatabaseCondition::mapConditionOperator()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$string</em>&nbsp;</td><td>The string to escape.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The escaped string. </dd></dl>

</div>
</div>
<a class="anchor" id="ga429c73a1bdc6dbb18c4a4a8a2235beaf"></a><!-- doxytag: member="database.inc::db_merge" ref="ga429c73a1bdc6dbb18c4a4a8a2235beaf" args="($table, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_merge </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classMergeQuery.html">MergeQuery</a> object for the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table into which to merge. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classMergeQuery.html">MergeQuery</a> A new <a class="el" href="classMergeQuery.html">MergeQuery</a> object for this connection. </dd></dl>

</div>
</div>
<a class="anchor" id="gab0a2cb3e94525a74407740043b821c5b"></a><!-- doxytag: member="database.inc::db_next_id" ref="gab0a2cb3e94525a74407740043b821c5b" args="($existing_id=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_next_id </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>existing_id</em> = <code>0</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieves a unique id.</p>
<p>Use this function if for some reason you can't use a serial field. Using a serial field is preferred, and <a class="el" href="classInsertQuery.html#a9bcd2f989e2ae0173bd6f58b6ede12fc">InsertQuery::execute()</a> returns the value of the last ID inserted.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$existing_id</em>&nbsp;</td><td>After a database import, it might be that the sequences table is behind, so by passing in a minimum ID, it can be assured that we never issue the same ID.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An integer number larger than any number returned before for this sequence. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1a7695a360b8c2219fe1998dfc272080"></a><!-- doxytag: member="database.inc::db_or" ref="ga1a7695a360b8c2219fe1998dfc272080" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_or </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classDatabaseCondition.html">DatabaseCondition</a>, set to "OR" all conditions together.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classDatabaseCondition.html">DatabaseCondition</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gafa3b6cb2b2f61479cc63a4150c62da9b"></a><!-- doxytag: member="database.inc::db_query" ref="gafa3b6cb2b2f61479cc63a4150c62da9b" args="($query, array $args=array(), array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_query </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>args</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The following utility functions are simply convenience wrappers.</p>
<p>They should never, ever have any database-specific code in them. Executes an arbitrary query string against the active database.</p>
<p>Use this function for SELECT queries if it is just a simple query string. If the caller or other modules need to change the query, use <a class="el" href="group__database.html#ga9e030cee657d64e3d8e524c65814cc9f">db_select()</a> instead.</p>
<p>Do not use this function for INSERT, UPDATE, or DELETE queries. Those should be handled via <a class="el" href="group__database.html#gaadfbffaf30ff5eb14f1bd88619351345">db_insert()</a>, <a class="el" href="group__database.html#ga40967197ee5d6a23a5c5a77e627067fe">db_update()</a> and <a class="el" href="group__database.html#ga72f0ccecc0ba181de16c6e3451150f2c">db_delete()</a> respectively.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$query</em>&nbsp;</td><td>The prepared statement query to run. Although it will accept both named and unnamed placeholders, named placeholders are strongly preferred as they are more self-documenting. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$args</em>&nbsp;</td><td>An array of values to substitute into the query. If the query uses named placeholders, this is an associative array in any order. If the query uses unnamed placeholders (?), this is an indexed array and the order must match the order of placeholders in the query string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="interfaceDatabaseStatementInterface.html">DatabaseStatementInterface</a> A prepared statement object, already executed.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classDatabaseConnection.html#a190539d6c494ef2d7ac90d21226de5a5">DatabaseConnection::defaultOptions()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gadd8bfb4984a4c69ac741b2bb20d6b9bf"></a><!-- doxytag: member="database.inc::db_query_range" ref="gadd8bfb4984a4c69ac741b2bb20d6b9bf" args="($query, $from, $count, array $args=array(), array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_query_range </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>args</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes a query against the active database, restricted to a range.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$query</em>&nbsp;</td><td>The prepared statement query to run. Although it will accept both named and unnamed placeholders, named placeholders are strongly preferred as they are more self-documenting. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$from</em>&nbsp;</td><td>The first record from the result set to return. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$count</em>&nbsp;</td><td>The number of records to return from the result set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$args</em>&nbsp;</td><td>An array of values to substitute into the query. If the query uses named placeholders, this is an associative array in any order. If the query uses unnamed placeholders (?), this is an indexed array and the order must match the order of placeholders in the query string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="interfaceDatabaseStatementInterface.html">DatabaseStatementInterface</a> A prepared statement object, already executed.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classDatabaseConnection.html#a190539d6c494ef2d7ac90d21226de5a5">DatabaseConnection::defaultOptions()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaac717e09516a8acb0ff82b3a990c13a6"></a><!-- doxytag: member="database.inc::db_query_temporary" ref="gaac717e09516a8acb0ff82b3a990c13a6" args="($query, array $args=array(), array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_query_temporary </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>args</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes a query string and saves the result set to a temporary table.</p>
<p>The execution of the query string happens against the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$query</em>&nbsp;</td><td>The prepared statement query to run. Although it will accept both named and unnamed placeholders, named placeholders are strongly preferred as they are more self-documenting. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$args</em>&nbsp;</td><td>An array of values to substitute into the query. If the query uses named placeholders, this is an associative array in any order. If the query uses unnamed placeholders (?), this is an indexed array and the order must match the order of placeholders in the query string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The name of the temporary table.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classDatabaseConnection.html#a190539d6c494ef2d7ac90d21226de5a5">DatabaseConnection::defaultOptions()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga9e030cee657d64e3d8e524c65814cc9f"></a><!-- doxytag: member="database.inc::db_select" ref="ga9e030cee657d64e3d8e524c65814cc9f" args="($table, $alias=NULL, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_select </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>alias</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classSelectQuery.html">SelectQuery</a> object for the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The base table for this query. May be a string or another <a class="el" href="classSelectQuery.html">SelectQuery</a> object. If a query object is passed, it will be used as a subselect. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$alias</em>&nbsp;</td><td>The alias for the base table of this query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classSelectQuery.html">SelectQuery</a> A new <a class="el" href="classSelectQuery.html">SelectQuery</a> object for this connection. </dd></dl>

</div>
</div>
<a class="anchor" id="ga954d1bbb12742f285927e43f9489fdaf"></a><!-- doxytag: member="database.inc::db_set_active" ref="ga954d1bbb12742f285927e43f9489fdaf" args="($key= 'default')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_set_active </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>key</em> = <code>'default'</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets a new active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$key</em>&nbsp;</td><td>The key in the $databases array to set as the default database.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The key of the formerly active database. </dd></dl>

</div>
</div>
<a class="anchor" id="gabdd0e69f5b2c63f8ad9e76f0fdf552be"></a><!-- doxytag: member="database.inc::db_transaction" ref="gabdd0e69f5b2c63f8ad9e76f0fdf552be" args="($name=NULL, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_transaction </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new transaction object for the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$name Optional name of the transaction. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$options An array of options to control how the transaction operates:</p>
<ul>
<li>target: The database target name.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classDatabaseTransaction.html">DatabaseTransaction</a> A new <a class="el" href="classDatabaseTransaction.html">DatabaseTransaction</a> object for this connection. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf6b4b59f572821cfd043317b81eeb71e"></a><!-- doxytag: member="database.inc::db_truncate" ref="gaf6b4b59f572821cfd043317b81eeb71e" args="($table, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_truncate </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classTruncateQuery.html">TruncateQuery</a> object for the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table from which to delete. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classTruncateQuery.html">TruncateQuery</a> A new <a class="el" href="classTruncateQuery.html">TruncateQuery</a> object for this connection. </dd></dl>

</div>
</div>
<a class="anchor" id="ga40967197ee5d6a23a5c5a77e627067fe"></a><!-- doxytag: member="database.inc::db_update" ref="ga40967197ee5d6a23a5c5a77e627067fe" args="($table, array $options=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_update </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>options</em> = <code>array()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classUpdateQuery.html">UpdateQuery</a> object for the active database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$table</em>&nbsp;</td><td>The table to update. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$options</em>&nbsp;</td><td>An array of options to control how the query operates.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classUpdateQuery.html">UpdateQuery</a> A new <a class="el" href="classUpdateQuery.html">UpdateQuery</a> object for this connection. </dd></dl>

</div>
</div>
<a class="anchor" id="ga85bb17ee005f930dd2caa93f0752d0e8"></a><!-- doxytag: member="database.inc::db_xor" ref="ga85bb17ee005f930dd2caa93f0752d0e8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_xor </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a new <a class="el" href="classDatabaseCondition.html">DatabaseCondition</a>, set to "XOR" all conditions together.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classDatabaseCondition.html">DatabaseCondition</a> </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
