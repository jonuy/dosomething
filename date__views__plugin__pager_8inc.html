<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: html/profiles/dosomething/modules/contrib/date/date_views/includes/date_views_plugin_pager.inc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>html/profiles/dosomething/modules/contrib/date/date_views/includes/date_views_plugin_pager.inc File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdate__views__plugin__pager.html">date_views_plugin_pager</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Date pager. Works with a Date argument, the argument filters the <a class="el" href="classview.html">view</a> and the pager provides back/next navigation.</p>
<p>USER NOTES:</p>
<p>To use this, add a pager to a <a class="el" href="classview.html">view</a>, and choose the option to 'Page by date'. There are several settings:</p>
<ul>
<li>The pager id: Set an id to be used as the identifier in the url for pager values, defaults to 'date'.</li>
<li>Pager position: Choose whether to display the date pager above, below, or both above and below the content.</li>
<li>Link format: Choose whether the pager links will be in the simple 'calendar/2011-12' format or the more complex 'calendar/?date=2011-12' pager format. The second one is more likely to work correctly if the pager is used in blocks and panels.</li>
</ul>
<p>The pager works in combination with a Date argument and it will use the date fields and granularity set in that argument to create its back/next links. If the <a class="el" href="classview.html">view</a> has no Date argument, the pager can do nothing. The argument can either be a 'Date' argument that lets you select one or more date fields in the argument, or the simple 'Content' argument for an individual date field. It must be an argument that uses the date argument handler.</p>
<p>DEVELOPER NOTES</p>
<p>The pager could technically create a query of its own rather than depending on the date argument to set the query, but it has only a limited set of tools to work with because it is a plugin, not a handler: it has no knowledge about relationships, it cannot use the ensure_my_table() function, plugins are not even invoked in pre_query(), so can't do anything there.</p>
<p>My conclusion was that the date pager simply is not powerful enough to create its own queries for date fields, which require very complex queries. Instead, we can combine this with a date argument and let the argument create the query and let the pager just provide the back/next links. If there is no date argument, the pager will do nothing.</p>
<p>There are still other problems. The pager is not even initialized until after all the handlers have created their queries, so it has no chance to alter values ahead of that. And the argument has no knowledge of the pager, so it can't check for pager values before the query is created.</p>
<p>The solution used here is to let the argument create the original query. The pager query runs after that, so the pager checks to see if there is a pager value that needs to be used in the query. The date argument has identified the placeholders it used in the query. So if a change is needed, we can swap the pager value into the query created by the date argument and adjust the $view-&gt;date_info values set by the argument accordingly so the theme will pick up the new information. </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
