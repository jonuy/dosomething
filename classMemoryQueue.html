<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: MemoryQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MemoryQueue Class Reference<br/>
<small>
[<a class="el" href="group__queue.html">Queue operations</a>]</small>
</h1><!-- doxytag: class="MemoryQueue" --><!-- doxytag: inherits="DrupalQueueInterface" --><div class="dynheader">
Inheritance diagram for MemoryQueue:</div>
<div class="dynsection">
 <div class="center">
  <img src="classMemoryQueue.gif" usemap="#MemoryQueue_map" alt=""/>
  <map id="MemoryQueue_map" name="MemoryQueue_map">
<area href="interfaceDrupalQueueInterface.html" alt="DrupalQueueInterface" shape="rect" coords="0,0,138,24"/>
<area href="classBatchMemoryQueue.html" alt="BatchMemoryQueue" shape="rect" coords="0,112,138,136"/>
</map>
 </div>
</div>

<p><a href="classMemoryQueue-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#a83e620eced2895763ebad69f615462b2">__construct</a> ($name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#a5d8fe8085407a1a77c505ba8532b9c50">createItem</a> ($data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#a266edfebcf6567707f3e2dafc3200491">numberOfItems</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#a24cba156a854a7b4b6c81c3d2614508d">claimItem</a> ($lease_time=30)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#a3091327204bb8b2e9c13baf32142f7f5">deleteItem</a> ($item)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#ad835863a58ca48f31f8cb1e3807b88cf">releaseItem</a> ($item)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#a94e1da7e8b4cccb445acb8500e0b39a5">createQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMemoryQueue.html#a055cd4bf4b319accf5ffa2c6f22685f1">deleteQueue</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c2d4dee239a697d91541bc1ad580eb4"></a><!-- doxytag: member="MemoryQueue::$queue" ref="a7c2d4dee239a697d91541bc1ad580eb4" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$queue</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aead361610d119b99b7e9f11fd46e008a"></a><!-- doxytag: member="MemoryQueue::$id_sequence" ref="aead361610d119b99b7e9f11fd46e008a" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$id_sequence</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Static queue implementation.</p>
<p>This allows "undelayed" variants of processes relying on the Queue interface. The queue data resides in memory. It should only be used for items that will be queued and dequeued within a given page request. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a83e620eced2895763ebad69f615462b2"></a><!-- doxytag: member="MemoryQueue::__construct" ref="a83e620eced2895763ebad69f615462b2" args="($name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::__construct </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Start working with a queue.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$name</em>&nbsp;</td><td>Arbitrary string. The name of the queue to work with. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a24cba156a854a7b4b6c81c3d2614508d"></a><!-- doxytag: member="MemoryQueue::claimItem" ref="a24cba156a854a7b4b6c81c3d2614508d" args="($lease_time=30)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::claimItem </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>lease_time</em> = <code>30</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Claim an item in the queue for processing.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$lease_time</em>&nbsp;</td><td>How long the processing is expected to take in seconds, defaults to an hour. After this lease expires, the item will be reset and another consumer can claim the item. For idempotent tasks (which can be run multiple times without side effects), shorter lease times would result in lower latency in case a consumer fails. For tasks that should not be run more than once (non-idempotent), a larger lease time will make it more rare for a given task to run multiple times in cases of failure, at the cost of higher latency. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>On success we return an item object. If the queue is unable to claim an item it returns false. This implies a best effort to retrieve an item and either the queue is empty or there is some other non-recoverable problem. </dd></dl>

<p>Implements <a class="el" href="interfaceDrupalQueueInterface.html#a2f0f2ccc1f4d55c0890897ea85e75954">DrupalQueueInterface</a>.</p>

<p>Reimplemented in <a class="el" href="classBatchMemoryQueue.html#aca687797fff1fee4a86293e8c32190ad">BatchMemoryQueue</a>.</p>

</div>
</div>
<a class="anchor" id="a5d8fe8085407a1a77c505ba8532b9c50"></a><!-- doxytag: member="MemoryQueue::createItem" ref="a5d8fe8085407a1a77c505ba8532b9c50" args="($data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::createItem </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add a queue item and store it directly to the queue.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$data</em>&nbsp;</td><td>Arbitrary data to be associated with the new task in the queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if the item was successfully created and was (best effort) added to the queue, otherwise FALSE. We don't guarantee the item was committed to disk etc, but as far as we know, the item is now in the queue. </dd></dl>

<p>Implements <a class="el" href="interfaceDrupalQueueInterface.html#a1bdef6341808aaf8b3de821b7b71f137">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a94e1da7e8b4cccb445acb8500e0b39a5"></a><!-- doxytag: member="MemoryQueue::createQueue" ref="a94e1da7e8b4cccb445acb8500e0b39a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::createQueue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a queue.</p>
<p>Called during installation and should be used to perform any necessary initialization operations. This should not be confused with the constructor for these objects, which is called every time an object is instantiated to operate on a queue. This operation is only needed the first time a given queue is going to be initialized (for example, to make a new database table or directory to hold tasks for the queue -- it depends on the queue implementation if this is necessary at all). </p>

<p>Implements <a class="el" href="interfaceDrupalQueueInterface.html#a5a657d8c1d5bb429b3e594fa0c883ad3">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a3091327204bb8b2e9c13baf32142f7f5"></a><!-- doxytag: member="MemoryQueue::deleteItem" ref="a3091327204bb8b2e9c13baf32142f7f5" args="($item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::deleteItem </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>item</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete a finished item from the queue.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$item</em>&nbsp;</td><td>The item returned by <a class="el" href="interfaceDrupalQueueInterface.html#a2f0f2ccc1f4d55c0890897ea85e75954">DrupalQueueInterface::claimItem()</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceDrupalQueueInterface.html#aa61212089c1bcc410e8f87f8e619e351">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a055cd4bf4b319accf5ffa2c6f22685f1"></a><!-- doxytag: member="MemoryQueue::deleteQueue" ref="a055cd4bf4b319accf5ffa2c6f22685f1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::deleteQueue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete a queue and every item in the queue. </p>

<p>Implements <a class="el" href="interfaceDrupalQueueInterface.html#ad403fed96dbd86e64a8a48c33fe5f2bc">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a266edfebcf6567707f3e2dafc3200491"></a><!-- doxytag: member="MemoryQueue::numberOfItems" ref="a266edfebcf6567707f3e2dafc3200491" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::numberOfItems </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve the number of items in the queue.</p>
<p>This is intended to provide a "best guess" count of the number of items in the queue. Depending on the implementation and the setup, the accuracy of the results of this function may vary.</p>
<p>e.g. On a busy system with a large number of consumers and items, the result might only be valid for a fraction of a second and not provide an accurate representation.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An integer estimate of the number of items in the queue. </dd></dl>

<p>Implements <a class="el" href="interfaceDrupalQueueInterface.html#aee5a22d355c9e6246690d0ed79fe306b">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="ad835863a58ca48f31f8cb1e3807b88cf"></a><!-- doxytag: member="MemoryQueue::releaseItem" ref="ad835863a58ca48f31f8cb1e3807b88cf" args="($item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MemoryQueue::releaseItem </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>item</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Release an item that the worker could not process, so another worker can come in and process it before the timeout expires.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$item</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>boolean </dd></dl>

<p>Implements <a class="el" href="interfaceDrupalQueueInterface.html#a7f4ce9d592779327cd24dbf90566da67">DrupalQueueInterface</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>html/modules/system/<a class="el" href="system_8queue_8inc.html">system.queue.inc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
