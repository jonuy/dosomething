<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: html/modules/tracker/tracker.module File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>html/modules/tracker/tracker.module File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a34ce08561a0ee7c41d382a89c9ad351d">tracker_help</a> ($path, $arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a9f1821155039eab4ea1f8e4893113c75">tracker_menu</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a8c6e69f3f4bb29bcae1b0b858393839c">tracker_cron</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#ac4856efc2417df78e8bf35c9703a057f">_tracker_myrecent_access</a> ($account)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#aaf6435001007410f28f708aba215179a">_tracker_user_access</a> ($account)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#ac8a528a31cb636901922ff27ae512a73">tracker_node_insert</a> ($node, $arg=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a3b4c27688afa88c4f96739274091e997">tracker_node_update</a> ($node, $arg=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a2b027e86cbf4a3b871485ba3166f54c0">tracker_node_delete</a> ($node, $arg=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#ae2eb7d292f5bc837380129a38cbe10ff">tracker_comment_update</a> ($comment)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#aa2b8956283fed818e733b2e1ebaf79a9">tracker_comment_publish</a> ($comment)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#affcdc2f73a4cc6a602507927d739fd94">tracker_comment_unpublish</a> ($comment)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#abe592f3f5d21a4930f7f56177043efbb">tracker_comment_delete</a> ($comment)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a742289477e9eedbcebe46fd6742241b1">_tracker_add</a> ($nid, $uid, $changed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a9595bd37607687d5271ca52aaa91eed7">_tracker_calculate_changed</a> ($nid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tracker_8module.html#a414225e6ad54c9fa8ca5578c83599a6f">_tracker_remove</a> ($nid, $uid=NULL, $changed=NULL)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Tracks recent content posted by a user or users. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a742289477e9eedbcebe46fd6742241b1"></a><!-- doxytag: member="tracker.module::_tracker_add" ref="a742289477e9eedbcebe46fd6742241b1" args="($nid, $uid, $changed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_tracker_add </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>changed</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates indexing tables when a node is added, updated, or commented on.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$nid</em>&nbsp;</td><td>A node ID. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$uid</em>&nbsp;</td><td>The node or comment author. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$changed</em>&nbsp;</td><td>The node updated timestamp or comment timestamp. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9595bd37607687d5271ca52aaa91eed7"></a><!-- doxytag: member="tracker.module::_tracker_calculate_changed" ref="a9595bd37607687d5271ca52aaa91eed7" args="($nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_tracker_calculate_changed </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>nid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determines the max timestamp between $node-&gt;changed and the last comment.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$nid</em>&nbsp;</td><td>A node ID.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The $node-&gt;changed timestamp, or most recent comment timestamp, whichever is the greatest. </dd></dl>

</div>
</div>
<a class="anchor" id="ac4856efc2417df78e8bf35c9703a057f"></a><!-- doxytag: member="tracker.module::_tracker_myrecent_access" ref="ac4856efc2417df78e8bf35c9703a057f" args="($account)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_tracker_myrecent_access </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>account</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Access callback for tracker/user_uid_optional. </p>

</div>
</div>
<a class="anchor" id="a414225e6ad54c9fa8ca5578c83599a6f"></a><!-- doxytag: member="tracker.module::_tracker_remove" ref="a414225e6ad54c9fa8ca5578c83599a6f" args="($nid, $uid=NULL, $changed=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_tracker_remove </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>uid</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>changed</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cleans up indexed data when nodes or comments are removed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$nid</em>&nbsp;</td><td>The node ID. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$uid</em>&nbsp;</td><td>The author of the node or comment. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$changed</em>&nbsp;</td><td>The last changed timestamp of the node. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aaf6435001007410f28f708aba215179a"></a><!-- doxytag: member="tracker.module::_tracker_user_access" ref="aaf6435001007410f28f708aba215179a" args="($account)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_tracker_user_access </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>account</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Access callback for user/user/track. </p>

</div>
</div>
<a class="anchor" id="abe592f3f5d21a4930f7f56177043efbb"></a><!-- doxytag: member="tracker.module::tracker_comment_delete" ref="abe592f3f5d21a4930f7f56177043efbb" args="($comment)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_comment_delete </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>comment</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#gab8d94c5665313a2d174628cc219f0395">hook_comment_delete()</a>. </p>

</div>
</div>
<a class="anchor" id="aa2b8956283fed818e733b2e1ebaf79a9"></a><!-- doxytag: member="tracker.module::tracker_comment_publish" ref="aa2b8956283fed818e733b2e1ebaf79a9" args="($comment)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_comment_publish </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>comment</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#ga4c4be9019e5cc7f92e8ccc03b595a64b">hook_comment_publish()</a>.</p>
<p>This actually handles the insert and update of published nodes since <a class="el" href="comment_8module.html#a4ef5d3d2161511e0d09a560fb5004e82">comment_save()</a> calls <a class="el" href="group__hooks.html#ga4c4be9019e5cc7f92e8ccc03b595a64b">hook_comment_publish()</a> for all published comments. </p>

</div>
</div>
<a class="anchor" id="affcdc2f73a4cc6a602507927d739fd94"></a><!-- doxytag: member="tracker.module::tracker_comment_unpublish" ref="affcdc2f73a4cc6a602507927d739fd94" args="($comment)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_comment_unpublish </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>comment</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#gaed97e1a1eaedd7b482f881ea2b8a3876">hook_comment_unpublish()</a>. </p>

</div>
</div>
<a class="anchor" id="ae2eb7d292f5bc837380129a38cbe10ff"></a><!-- doxytag: member="tracker.module::tracker_comment_update" ref="ae2eb7d292f5bc837380129a38cbe10ff" args="($comment)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_comment_update </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>comment</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#ga63e0b41e7dbaadbf352b0a9c246d5ae5">hook_comment_update()</a>.</p>
<p>Comment module doesn't call <a class="el" href="group__hooks.html#gaed97e1a1eaedd7b482f881ea2b8a3876">hook_comment_unpublish()</a> when saving individual comments so we need to check for those here. </p>

</div>
</div>
<a class="anchor" id="a8c6e69f3f4bb29bcae1b0b858393839c"></a><!-- doxytag: member="tracker.module::tracker_cron" ref="a8c6e69f3f4bb29bcae1b0b858393839c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_cron </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#gaf07f1e3d98112fc2ba6920cf7ee6fb16">hook_cron()</a>.</p>
<p>Updates tracking information for any items still to be tracked. The variable 'tracker_index_nid' is set to ((the last node ID that was indexed) - 1) and used to select the nodes to be processed. If there are no remaining nodes to process, 'tracker_index_nid' will be 0. </p>

</div>
</div>
<a class="anchor" id="a34ce08561a0ee7c41d382a89c9ad351d"></a><!-- doxytag: member="tracker.module::tracker_help" ref="a34ce08561a0ee7c41d382a89c9ad351d" args="($path, $arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_help </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#ga5589c2714a782738e8851c4c90231f0e">hook_help()</a>. </p>

</div>
</div>
<a class="anchor" id="a9f1821155039eab4ea1f8e4893113c75"></a><!-- doxytag: member="tracker.module::tracker_menu" ref="a9f1821155039eab4ea1f8e4893113c75" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_menu </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__hooks.html#ga5c95244fea59b25666e409759e133ded">hook_menu()</a>. </p>

</div>
</div>
<a class="anchor" id="a2b027e86cbf4a3b871485ba3166f54c0"></a><!-- doxytag: member="tracker.module::tracker_node_delete" ref="a2b027e86cbf4a3b871485ba3166f54c0" args="($node, $arg=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_node_delete </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arg</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__node__api__hooks.html#ga66ea0473a9950dc961802e801e5042e9">hook_node_delete()</a>.</p>
<p>Deletes tracking information for a node. </p>

</div>
</div>
<a class="anchor" id="ac8a528a31cb636901922ff27ae512a73"></a><!-- doxytag: member="tracker.module::tracker_node_insert" ref="ac8a528a31cb636901922ff27ae512a73" args="($node, $arg=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_node_insert </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arg</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__node__api__hooks.html#ga8b40dc62e46e5055c205d2a723dc3548">hook_node_insert()</a>.</p>
<p>Adds new tracking information for this node since it's new. </p>

</div>
</div>
<a class="anchor" id="a3b4c27688afa88c4f96739274091e997"></a><!-- doxytag: member="tracker.module::tracker_node_update" ref="a3b4c27688afa88c4f96739274091e997" args="($node, $arg=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tracker_node_update </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arg</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements <a class="el" href="group__node__api__hooks.html#gac66c767cc922fcbfdaf17252e5d87d9d">hook_node_update()</a>.</p>
<p>Adds tracking information for this node since it's been updated. </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
