<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DoSomething.org: DrupalCacheArray Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DrupalCacheArray Class Reference</h1><!-- doxytag: class="DrupalCacheArray" --><div class="dynheader">
Inheritance diagram for DrupalCacheArray:</div>
<div class="dynsection">
 <div class="center">
  <img src="classDrupalCacheArray.gif" usemap="#DrupalCacheArray_map" alt=""/>
  <map id="DrupalCacheArray_map" name="DrupalCacheArray_map">
<area href="classSchemaCache.html" alt="SchemaCache" shape="rect" coords="0,56,120,80"/>
</map>
 </div>
</div>

<p><a href="classDrupalCacheArray-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gadbc374d9057276944d38062e769a1a99">__construct</a> ($cid, $bin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#gabec90ca8c02f7c14dfbf66fd9e6bb5dd">offsetExists</a> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga57be4d1b39bee68ee1c395c1cd9a2de5">offsetGet</a> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga0d3377e6f4b8c592f006a75f8eadf21a">offsetSet</a> ($offset, $value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga8bb43551e89c35590c56a49f8fb54e3f">offsetUnset</a> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga63c3aa47f3a451f0c5182800d29d5d9f">__destruct</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adbc374d9057276944d38062e769a1a99"></a><!-- doxytag: member="DrupalCacheArray::__construct" ref="adbc374d9057276944d38062e769a1a99" args="($cid, $bin)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>__construct</b> ($cid, $bin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray.html#a0d87b8b0e005c00bbf7fa6ed11cd1e26">initializeRegistry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abec90ca8c02f7c14dfbf66fd9e6bb5dd"></a><!-- doxytag: member="DrupalCacheArray::offsetExists" ref="abec90ca8c02f7c14dfbf66fd9e6bb5dd" args="($offset)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>offsetExists</b> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57be4d1b39bee68ee1c395c1cd9a2de5"></a><!-- doxytag: member="DrupalCacheArray::offsetGet" ref="a57be4d1b39bee68ee1c395c1cd9a2de5" args="($offset)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>offsetGet</b> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a33d892a839b353177e2483f6946178e9"></a><!-- doxytag: member="DrupalCacheArray::resolveCacheMiss" ref="a33d892a839b353177e2483f6946178e9" args="($offset)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>resolveCacheMiss</b> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d99af903ba2660c09ca835e63c79118"></a><!-- doxytag: member="DrupalCacheArray::set" ref="a9d99af903ba2660c09ca835e63c79118" args="($data, $lock=TRUE)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>set</b> ($data, $lock=TRUE)</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga27687007f42979bdb8999683f3270c4a">persist</a> ($offset, $persist=TRUE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga33d892a839b353177e2483f6946178e9">resolveCacheMiss</a> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga9d99af903ba2660c09ca835e63c79118">set</a> ($data, $lock=TRUE)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray.html#a616fba4b18bafdf4cc6e34c4b5696d58">$cid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga29eeef3160c70f129c447e796e330cdb">$bin</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga0ba2e712f18ec2c8ee8bf97d115c85d1">$keysToPersist</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi.html#ga696fd96aa3639a9d7d968961db9d5819">$storage</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray.html#a7e5f106aba0180abc924fee9b2137dd3">$persistable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray.html#a31477bbed77e94f393202701a2179643">$completeRegistry</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Provides a caching wrapper to be used in place of large array structures.</p>
<p>This class should be extended by systems that need to cache large amounts of data and have it represented as an array to calling functions. These arrays can become very large, so ArrayAccess is used to allow different strategies to be used for caching internally (lazy loading, building caches over time etc.). This can dramatically reduce the amount of data that needs to be loaded from cache backends on each request, and memory usage from static caches of that same data.</p>
<p>Note that array_* functions do not work with ArrayAccess. Systems using <a class="el" href="classDrupalCacheArray.html">DrupalCacheArray</a> should use this only internally. If providing API functions that return the full array, this can be cached separately or returned directly. However since <a class="el" href="classDrupalCacheArray.html">DrupalCacheArray</a> holds partial content by design, it should be a normal PHP array or otherwise contain the full structure.</p>
<p>Note also that due to limitations in PHP prior to 5.3.4, it is impossible to write directly to the contents of nested arrays contained in this object. Only writes to the top-level array elements are possible. So if you previously had set $object['foo'] = array(1, 2, 'bar' =&gt; 'baz'), but later want to change the value of 'bar' from 'baz' to 'foobar', you cannot do so a targeted write like $object['foo']['bar'] = 'foobar'. Instead, you must overwrite the entire top-level 'foo' array with the entire set of new values: $object['foo'] = array(1, 2, 'bar' =&gt; 'foobar'). Due to this same limitation, attempts to create references to any contained data, nested or otherwise, will fail silently. So $var = &amp;$object['foo'] will not throw an error, and $var will be populated with the contents of $object['foo'], but that data will be passed by value, not reference. For more information on the PHP limitation, see the note in the official PHP documentation at· <a href="http://php.net/manual/en/arrayaccess.offsetget.php">http://php.net/manual/en/arrayaccess.offsetget.php</a> on ArrayAccess::offsetGet().</p>
<p>By default, the class accounts for caches where calling functions might request keys in the array that won't exist even after a cache rebuild. This prevents situations where a cache rebuild would be triggered over and over due to a 'missing' item. These cases are stored internally as a value of NULL. This means that the <a class="el" href="group__schemaapi.html#ga57be4d1b39bee68ee1c395c1cd9a2de5">offsetGet()</a> and <a class="el" href="group__schemaapi.html#gabec90ca8c02f7c14dfbf66fd9e6bb5dd">offsetExists()</a> methods must be overridden if caching an array where the top level values can legitimately be NULL, and where $object-&gt;<a class="el" href="group__schemaapi.html#gabec90ca8c02f7c14dfbf66fd9e6bb5dd">offsetExists()</a> needs to correctly return (equivalent to array_key_exists() vs. isset()). This should not be necessary in the majority of cases.</p>
<p>Classes extending this class must override at least the <a class="el" href="group__schemaapi.html#ga33d892a839b353177e2483f6946178e9">resolveCacheMiss()</a> method to have a working implementation.</p>
<p><a class="el" href="group__schemaapi.html#ga0d3377e6f4b8c592f006a75f8eadf21a">offsetSet()</a> is not overridden by this class by default. In practice this means that assigning an offset via arrayAccess will only apply while the object is in scope and will not be written back to the persistent cache. This follows a similar pattern to static vs. persistent caching in procedural code. Extending classes may wish to alter this behavior, for example by overriding <a class="el" href="group__schemaapi.html#ga0d3377e6f4b8c592f006a75f8eadf21a">offsetSet()</a> and adding an automatic call to <a class="el" href="group__schemaapi.html#ga27687007f42979bdb8999683f3270c4a">persist()</a>.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classSchemaCache.html">SchemaCache</a></dd></dl>
<p>Builds the run-time theme registry.</p>
<p>Extends <a class="el" href="classDrupalCacheArray.html">DrupalCacheArray</a> to allow the theme registry to be accessed as a complete registry, while internally caching only the parts of the registry that are actually in use on the site. On cache misses the complete theme registry is loaded and used to update the run-time cache. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0d87b8b0e005c00bbf7fa6ed11cd1e26"></a><!-- doxytag: member="DrupalCacheArray::initializeRegistry" ref="a0d87b8b0e005c00bbf7fa6ed11cd1e26" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DrupalCacheArray::initializeRegistry </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the full theme registry.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An array with the keys of the full theme registry, but the values initialized to NULL. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a616fba4b18bafdf4cc6e34c4b5696d58"></a><!-- doxytag: member="DrupalCacheArray::$cid" ref="a616fba4b18bafdf4cc6e34c4b5696d58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DrupalCacheArray::$cid<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A cid to pass to <a class="el" href="includes_2cache_8inc.html#a48081f36334909f561ef4f538fa640d2">cache_set()</a> and <a class="el" href="includes_2cache_8inc.html#a9d873815c28909b61c3a6188b383f8a3">cache_get()</a>. </p>

</div>
</div>
<a class="anchor" id="a31477bbed77e94f393202701a2179643"></a><!-- doxytag: member="DrupalCacheArray::$completeRegistry" ref="a31477bbed77e94f393202701a2179643" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DrupalCacheArray::$completeRegistry<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The complete theme registry array. </p>

</div>
</div>
<a class="anchor" id="a7e5f106aba0180abc924fee9b2137dd3"></a><!-- doxytag: member="DrupalCacheArray::$persistable" ref="a7e5f106aba0180abc924fee9b2137dd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DrupalCacheArray::$persistable<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whether the partial registry can be persisted to the cache.</p>
<p>This is only allowed if all modules and the request method is GET. <a class="el" href="includes_2theme_8inc.html#a7c25609a935874541a19657affd30fff">theme()</a> should be very rarely called on POST requests and this avoids polluting the runtime cache. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>html/includes/<a class="el" href="bootstrap_8inc.html">bootstrap.inc</a></li>
<li>html/includes/<a class="el" href="includes_2theme_8inc.html">theme.inc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Nov 2013 for DoSomething.org by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
