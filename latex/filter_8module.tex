\hypertarget{filter_8module}{
\section{html/modules/filter/filter.module File Reference}
\label{filter_8module}\index{html/modules/filter/filter.module@{html/modules/filter/filter.module}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{filter_8module_acb973dd946fba16056fe3d0af900af6b}{filter\_\-help} (\$path, \$arg)
\item 
\hyperlink{filter_8module_a1ceba1ca80bae00ae5eaf6eeb2758409}{filter\_\-theme} ()
\item 
\hyperlink{filter_8module_a23474cb2d3629f4e84d3f691e2504a84}{filter\_\-element\_\-info} ()
\item 
\hyperlink{filter_8module_a13c5612763d7d98499832594ac3d5466}{filter\_\-menu} ()
\item 
\hyperlink{filter_8module_a22551a22d0b2436acc928c4f9832e616}{\_\-filter\_\-disable\_\-format\_\-access} (\$format)
\item 
\hyperlink{filter_8module_a8243109666d5f44bc7cc130743abaab3}{filter\_\-format\_\-load} (\$format\_\-id)
\item 
\hyperlink{filter_8module_a3522ef59e8cc0abe0a448cb92b0d9212}{filter\_\-format\_\-save} (\$format)
\item 
\hyperlink{filter_8module_a2d4a8c1b750647973b3130d077a598ca}{filter\_\-format\_\-disable} (\$format)
\item 
\hyperlink{filter_8module_a2145846ce416161a821a055c9169a3a1}{filter\_\-format\_\-exists} (\$format\_\-id)
\item 
\hyperlink{filter_8module_a3f678da61808bcc3d299fcb01f52e79a}{filter\_\-admin\_\-format\_\-title} (\$format)
\item 
\hyperlink{filter_8module_a58d1bbec04cb733d1107e1741627c167}{filter\_\-permission} ()
\item 
\hyperlink{filter_8module_a9e1efa58f39dde566c1c966740db1df0}{filter\_\-permission\_\-name} (\$format)
\item 
\hyperlink{filter_8module_ac9fcc24aa485e1c24fa1abf036dea521}{filter\_\-modules\_\-enabled} (\$modules)
\item 
\hyperlink{filter_8module_a7e24767aad57c1c96b57d58a12afef56}{filter\_\-modules\_\-disabled} (\$modules)
\item 
\hyperlink{filter_8module_a9768cd98262e5de87ebcc1b2bb507b7b}{filter\_\-formats} (\$account=NULL)
\item 
\hyperlink{filter_8module_a01762171df5ab9dcbbcd6eb47013f681}{filter\_\-formats\_\-reset} ()
\item 
\hyperlink{filter_8module_a53d0e4b419852da83e67f815912603b2}{filter\_\-get\_\-roles\_\-by\_\-format} (\$format)
\item 
\hyperlink{filter_8module_a3df4b9ad5e508bd13115b77401c56285}{filter\_\-get\_\-formats\_\-by\_\-role} (\$rid)
\item 
\hyperlink{filter_8module_a187d29b1feb447737d57276e06655312}{filter\_\-default\_\-format} (\$account=NULL)
\item 
\hyperlink{filter_8module_a8e7d56dc990c1c1e54b296ddb74bcdcd}{filter\_\-fallback\_\-format} ()
\item 
\hyperlink{filter_8module_ad9e4a95f0ee5da1fb64a2c700355c864}{filter\_\-fallback\_\-format\_\-title} ()
\item 
\hyperlink{filter_8module_a9a4d34bbacb92f82ae844fefbd20d32d}{filter\_\-get\_\-filters} ()
\item 
\hyperlink{filter_8module_afa289405136953ef594285021955f7e7}{\_\-filter\_\-list\_\-cmp} (\$a, \$b)
\item 
\hyperlink{filter_8module_a3bbed48afc05f0a85c9f8a5e3bfd785f}{filter\_\-format\_\-allowcache} (\$format\_\-id)
\item 
\hyperlink{filter_8module_aab4f5d65547268e4dd302b7bcc6b7c83}{\_\-filter\_\-format\_\-is\_\-cacheable} (\$format)
\item 
\hyperlink{filter_8module_a29a31789549de093dd96e9d4f58b41a8}{filter\_\-list\_\-format} (\$format\_\-id)
\item 
\hyperlink{group__sanitization_gaa3872d938cf9ba93ed0621a6b26eaa59}{check\_\-markup} (\$text, \$format\_\-id=NULL, \$langcode= '', \$cache=FALSE)
\item 
\hyperlink{filter_8module_a7d09545c482bcb763bd50529bc00644b}{filter\_\-process\_\-format} (\$element)
\item 
\hyperlink{filter_8module_ab57887ced69322fceb2f9e70b6e92650}{filter\_\-form\_\-access\_\-denied} (\$element)
\item 
\hyperlink{group__themeable_gadfd0e06f1e78fbc4f260b84872e1911e}{theme\_\-text\_\-format\_\-wrapper} (\$variables)
\item 
\hyperlink{filter_8module_aff74c90622b601df8e088f6b5c125bb7}{filter\_\-access} (\$format, \$account=NULL)
\item 
\hyperlink{filter_8module_a3b16812bade6a3a5fa942913150249b9}{\_\-filter\_\-tips} (\$format\_\-id, \$long=FALSE)
\item 
\hyperlink{filter_8module_aa7768070b172f41df24931d02c1217fe}{filter\_\-dom\_\-load} (\$text)
\item 
\hyperlink{filter_8module_a4502a9064a1eb7680ff5371b05342ec8}{filter\_\-dom\_\-serialize} (\$dom\_\-document)
\item 
\hyperlink{filter_8module_ad379f826b57d932f08d696282728217c}{filter\_\-dom\_\-serialize\_\-escape\_\-cdata\_\-element} (\$dom\_\-document, \$dom\_\-element, \$comment\_\-start= '//', \$comment\_\-end= '')
\item 
\hyperlink{group__themeable_ga433eeac690ffb684b845d10b301fdbca}{theme\_\-filter\_\-tips\_\-more\_\-info} ()
\item 
\hyperlink{group__themeable_ga1c1be7f8ecbe9bff3d03674a3c4e50ed}{theme\_\-filter\_\-guidelines} (\$variables)
\item 
\hyperlink{group__standard__filters_ga38089b90576e648c56228ee99c9c1767}{filter\_\-filter\_\-info} ()
\item 
\hyperlink{group__standard__filters_ga5e2c3faf03f281dc4ad7a4da6591fc3b}{\_\-filter\_\-html\_\-settings} (\$form, \&\$form\_\-state, \$filter, \$format, \$defaults)
\item 
\hyperlink{group__standard__filters_gaf366f72c1453f7295de4049269067a40}{\_\-filter\_\-html} (\$text, \$filter)
\item 
\hyperlink{group__standard__filters_gae86fb7b9514b6c41202c2e2479074b3b}{\_\-filter\_\-html\_\-tips} (\$filter, \$format, \$long=FALSE)
\item 
\hyperlink{group__standard__filters_ga6e9a9c137838e2ab2b0f6f2623bed95f}{\_\-filter\_\-url\_\-settings} (\$form, \&\$form\_\-state, \$filter, \$format, \$defaults)
\item 
\hyperlink{group__standard__filters_ga3014977a8aa365044b11f94abf04f313}{\_\-filter\_\-url} (\$text, \$filter)
\item 
\hyperlink{group__standard__filters_ga68b2f3e518a53457b06137c5a7525f3c}{\_\-filter\_\-url\_\-parse\_\-full\_\-links} (\$match)
\item 
\hyperlink{group__standard__filters_gae2d1ce14d2a727aba3aa5637513ec7d0}{\_\-filter\_\-url\_\-parse\_\-email\_\-links} (\$match)
\item 
\hyperlink{group__standard__filters_ga37765388ac6d3986ed00dcbfc41d330f}{\_\-filter\_\-url\_\-parse\_\-partial\_\-links} (\$match)
\item 
\hyperlink{group__standard__filters_ga3812d3d44a81e993385890149dc186be}{\_\-filter\_\-url\_\-escape\_\-comments} (\$match, \$escape=NULL)
\item 
\hyperlink{group__standard__filters_gae320ec54b6c197f3263c2d54a4477e55}{\_\-filter\_\-url\_\-trim} (\$text, \$length=NULL)
\item 
\hyperlink{group__standard__filters_ga7f7a390abfeefdfc03ad377037edfb18}{\_\-filter\_\-url\_\-tips} (\$filter, \$format, \$long=FALSE)
\item 
\hyperlink{group__standard__filters_ga3cb6607b3259ac8f9a83f317a63e3ec6}{\_\-filter\_\-htmlcorrector} (\$text)
\item 
\hyperlink{group__standard__filters_ga1dc1e116a15318077568b27534bd41bc}{\_\-filter\_\-autop} (\$text)
\item 
\hyperlink{group__standard__filters_ga21d7f6735341cc56c6e82dfe1d94eaf3}{\_\-filter\_\-autop\_\-tips} (\$filter, \$format, \$long=FALSE)
\item 
\hyperlink{group__standard__filters_ga5ea934ce6b9314fdb97a572fa3530631}{\_\-filter\_\-html\_\-escape} (\$text)
\item 
\hyperlink{group__standard__filters_gaea4abc943473d502360f1448bf66b1a2}{\_\-filter\_\-html\_\-escape\_\-tips} (\$filter, \$format, \$long=FALSE)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Framework for handling the filtering of content. 

\subsection{Function Documentation}
\hypertarget{filter_8module_a22551a22d0b2436acc928c4f9832e616}{
\index{filter.module@{filter.module}!\_\-filter\_\-disable\_\-format\_\-access@{\_\-filter\_\-disable\_\-format\_\-access}}
\index{\_\-filter\_\-disable\_\-format\_\-access@{\_\-filter\_\-disable\_\-format\_\-access}!filter.module@{filter.module}}
\subsubsection[{\_\-filter\_\-disable\_\-format\_\-access}]{\setlength{\rightskip}{0pt plus 5cm}\_\-filter\_\-disable\_\-format\_\-access (\$ {\em format})}}
\label{filter_8module_a22551a22d0b2436acc928c4f9832e616}
Access callback: Checks access for disabling text formats.


\begin{DoxyParams}{Parameters}
\item[{\em \$format}]A text format object.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TRUE if the text format can be disabled by the current user, FALSE otherwise.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a13c5612763d7d98499832594ac3d5466}{filter\_\-menu()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_aab4f5d65547268e4dd302b7bcc6b7c83}{
\index{filter.module@{filter.module}!\_\-filter\_\-format\_\-is\_\-cacheable@{\_\-filter\_\-format\_\-is\_\-cacheable}}
\index{\_\-filter\_\-format\_\-is\_\-cacheable@{\_\-filter\_\-format\_\-is\_\-cacheable}!filter.module@{filter.module}}
\subsubsection[{\_\-filter\_\-format\_\-is\_\-cacheable}]{\setlength{\rightskip}{0pt plus 5cm}\_\-filter\_\-format\_\-is\_\-cacheable (\$ {\em format})}}
\label{filter_8module_aab4f5d65547268e4dd302b7bcc6b7c83}
Helper function to determine whether the output of a given text format can be cached.

The output of a given text format can be cached when all enabled filters in the text format allow caching.


\begin{DoxyParams}{Parameters}
\item[{\em \$format}]The text format object to check.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TRUE if all the filters enabled in the given text format allow caching, FALSE otherwise.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a3522ef59e8cc0abe0a448cb92b0d9212}{filter\_\-format\_\-save()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_afa289405136953ef594285021955f7e7}{
\index{filter.module@{filter.module}!\_\-filter\_\-list\_\-cmp@{\_\-filter\_\-list\_\-cmp}}
\index{\_\-filter\_\-list\_\-cmp@{\_\-filter\_\-list\_\-cmp}!filter.module@{filter.module}}
\subsubsection[{\_\-filter\_\-list\_\-cmp}]{\setlength{\rightskip}{0pt plus 5cm}\_\-filter\_\-list\_\-cmp (\$ {\em a}, \/  \$ {\em b})}}
\label{filter_8module_afa289405136953ef594285021955f7e7}
Sorts an array of filters by filter name.

Callback for uasort() within \hyperlink{filter_8module_a9a4d34bbacb92f82ae844fefbd20d32d}{filter\_\-get\_\-filters()}. \hypertarget{filter_8module_a3b16812bade6a3a5fa942913150249b9}{
\index{filter.module@{filter.module}!\_\-filter\_\-tips@{\_\-filter\_\-tips}}
\index{\_\-filter\_\-tips@{\_\-filter\_\-tips}!filter.module@{filter.module}}
\subsubsection[{\_\-filter\_\-tips}]{\setlength{\rightskip}{0pt plus 5cm}\_\-filter\_\-tips (\$ {\em format\_\-id}, \/  \$ {\em long} = {\ttfamily FALSE})}}
\label{filter_8module_a3b16812bade6a3a5fa942913150249b9}
Retrieves the filter tips.


\begin{DoxyParams}{Parameters}
\item[{\em \$format\_\-id}]The ID of the text format for which to retrieve tips, or -\/1 to return tips for all formats accessible to the current user. \item[{\em \$long}](optional) Boolean indicating whether the long form of tips should be returned. Defaults to FALSE.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An associative array of filtering tips, keyed by filter name. Each filtering tip is an associative array with elements:
\begin{DoxyItemize}
\item tip: Tip text.
\item id: Filter ID. 
\end{DoxyItemize}
\end{DoxyReturn}
\hypertarget{filter_8module_aff74c90622b601df8e088f6b5c125bb7}{
\index{filter.module@{filter.module}!filter\_\-access@{filter\_\-access}}
\index{filter\_\-access@{filter\_\-access}!filter.module@{filter.module}}
\subsubsection[{filter\_\-access}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-access (\$ {\em format}, \/  \$ {\em account} = {\ttfamily NULL})}}
\label{filter_8module_aff74c90622b601df8e088f6b5c125bb7}
Checks if a user has access to a particular text format.


\begin{DoxyParams}{Parameters}
\item[{\em \$format}]An object representing the text format. \item[{\em \$account}](optional) The user account to check access for; if omitted, the currently logged-\/in user is used. Defaults to NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Boolean TRUE if the user is allowed to access the given format. 
\end{DoxyReturn}
\hypertarget{filter_8module_a3f678da61808bcc3d299fcb01f52e79a}{
\index{filter.module@{filter.module}!filter\_\-admin\_\-format\_\-title@{filter\_\-admin\_\-format\_\-title}}
\index{filter\_\-admin\_\-format\_\-title@{filter\_\-admin\_\-format\_\-title}!filter.module@{filter.module}}
\subsubsection[{filter\_\-admin\_\-format\_\-title}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-admin\_\-format\_\-title (\$ {\em format})}}
\label{filter_8module_a3f678da61808bcc3d299fcb01f52e79a}
Displays a text format form title.


\begin{DoxyParams}{Parameters}
\item[{\em object}]\$format A format object.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string The name of the format.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a13c5612763d7d98499832594ac3d5466}{filter\_\-menu()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_a187d29b1feb447737d57276e06655312}{
\index{filter.module@{filter.module}!filter\_\-default\_\-format@{filter\_\-default\_\-format}}
\index{filter\_\-default\_\-format@{filter\_\-default\_\-format}!filter.module@{filter.module}}
\subsubsection[{filter\_\-default\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-default\_\-format (\$ {\em account} = {\ttfamily NULL})}}
\label{filter_8module_a187d29b1feb447737d57276e06655312}
Returns the ID of the default text format for a particular user.

The default text format is the first available format that the user is allowed to access, when the formats are ordered by weight. It should generally be used as a default choice when presenting the user with a list of possible text formats (for example, in a node creation form).

Conversely, when existing content that does not have an assigned text format needs to be filtered for display, the default text format is the wrong choice, because it is not guaranteed to be consistent from user to user, and some trusted users may have an unsafe text format set by default, which should not be used on text of unknown origin. Instead, the fallback format returned by \hyperlink{filter_8module_a8e7d56dc990c1c1e54b296ddb74bcdcd}{filter\_\-fallback\_\-format()} should be used, since that is intended to be a safe, consistent format that is always available to all users.


\begin{DoxyParams}{Parameters}
\item[{\em \$account}](optional) The user account to check. Defaults to the currently logged-\/in user. Defaults to NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The ID of the user's default text format.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a8e7d56dc990c1c1e54b296ddb74bcdcd}{filter\_\-fallback\_\-format()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_aa7768070b172f41df24931d02c1217fe}{
\index{filter.module@{filter.module}!filter\_\-dom\_\-load@{filter\_\-dom\_\-load}}
\index{filter\_\-dom\_\-load@{filter\_\-dom\_\-load}!filter.module@{filter.module}}
\subsubsection[{filter\_\-dom\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-dom\_\-load (\$ {\em text})}}
\label{filter_8module_aa7768070b172f41df24931d02c1217fe}
Parses an HTML snippet and returns it as a DOM object.

This function loads the body part of a partial (X)HTML document and returns a full DOMDocument object that represents this document. You can use \hyperlink{filter_8module_a4502a9064a1eb7680ff5371b05342ec8}{filter\_\-dom\_\-serialize()} to serialize this DOMDocument back to a XHTML snippet.


\begin{DoxyParams}{Parameters}
\item[{\em \$text}]The partial (X)HTML snippet to load. Invalid mark-\/up will be corrected on import. \end{DoxyParams}
\begin{DoxyReturn}{Returns}
A DOMDocument that represents the loaded (X)HTML snippet. 
\end{DoxyReturn}
\hypertarget{filter_8module_a4502a9064a1eb7680ff5371b05342ec8}{
\index{filter.module@{filter.module}!filter\_\-dom\_\-serialize@{filter\_\-dom\_\-serialize}}
\index{filter\_\-dom\_\-serialize@{filter\_\-dom\_\-serialize}!filter.module@{filter.module}}
\subsubsection[{filter\_\-dom\_\-serialize}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-dom\_\-serialize (\$ {\em dom\_\-document})}}
\label{filter_8module_a4502a9064a1eb7680ff5371b05342ec8}
Converts a DOM object back to an HTML snippet.

The function serializes the body part of a DOMDocument back to an XHTML snippet. The resulting XHTML snippet will be properly formatted to be compatible with HTML user agents.


\begin{DoxyParams}{Parameters}
\item[{\em \$dom\_\-document}]A DOMDocument object to serialize, only the tags below the first $<$body$>$ node will be converted.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A valid (X)HTML snippet, as a string. 
\end{DoxyReturn}
\hypertarget{filter_8module_ad379f826b57d932f08d696282728217c}{
\index{filter.module@{filter.module}!filter\_\-dom\_\-serialize\_\-escape\_\-cdata\_\-element@{filter\_\-dom\_\-serialize\_\-escape\_\-cdata\_\-element}}
\index{filter\_\-dom\_\-serialize\_\-escape\_\-cdata\_\-element@{filter\_\-dom\_\-serialize\_\-escape\_\-cdata\_\-element}!filter.module@{filter.module}}
\subsubsection[{filter\_\-dom\_\-serialize\_\-escape\_\-cdata\_\-element}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-dom\_\-serialize\_\-escape\_\-cdata\_\-element (\$ {\em dom\_\-document}, \/  \$ {\em dom\_\-element}, \/  \$ {\em comment\_\-start} = {\ttfamily '//'}, \/  \$ {\em comment\_\-end} = {\ttfamily ''})}}
\label{filter_8module_ad379f826b57d932f08d696282728217c}
Adds comments around the $<$!CDATA section in a dom element.

DOMDocument::loadHTML in \hyperlink{filter_8module_aa7768070b172f41df24931d02c1217fe}{filter\_\-dom\_\-load()} makes CDATA sections from the contents of inline script and style tags. This can cause HTML 4 browsers to throw exceptions.

This function attempts to solve the problem by creating a DocumentFragment and imitating the behavior in \hyperlink{common_8inc_ac4d279ffd40eae67ace8459cd3e6e3b5}{drupal\_\-get\_\-js()}, commenting the CDATA tag.


\begin{DoxyParams}{Parameters}
\item[{\em \$dom\_\-document}]The DOMDocument containing the \$dom\_\-element. \item[{\em \$dom\_\-element}]The element potentially containing a CDATA node. \item[{\em \$comment\_\-start}](optional) A string to use as a comment start marker to escape the CDATA declaration. Defaults to '//'. \item[{\em \$comment\_\-end}](optional) A string to use as a comment end marker to escape the CDATA declaration. Defaults to an empty string. \end{DoxyParams}
\hypertarget{filter_8module_a23474cb2d3629f4e84d3f691e2504a84}{
\index{filter.module@{filter.module}!filter\_\-element\_\-info@{filter\_\-element\_\-info}}
\index{filter\_\-element\_\-info@{filter\_\-element\_\-info}!filter.module@{filter.module}}
\subsubsection[{filter\_\-element\_\-info}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-element\_\-info ()}}
\label{filter_8module_a23474cb2d3629f4e84d3f691e2504a84}
Implements \hyperlink{group__hooks_ga3c5182432eddc82f8b7845e66a365d51}{hook\_\-element\_\-info()}.

\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a7d09545c482bcb763bd50529bc00644b}{filter\_\-process\_\-format()} 

text\_\-format\_\-wrapper() 
\end{DoxySeeAlso}
\hypertarget{filter_8module_a8e7d56dc990c1c1e54b296ddb74bcdcd}{
\index{filter.module@{filter.module}!filter\_\-fallback\_\-format@{filter\_\-fallback\_\-format}}
\index{filter\_\-fallback\_\-format@{filter\_\-fallback\_\-format}!filter.module@{filter.module}}
\subsubsection[{filter\_\-fallback\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-fallback\_\-format ()}}
\label{filter_8module_a8e7d56dc990c1c1e54b296ddb74bcdcd}
Returns the ID of the fallback text format that all users have access to.

The fallback text format is a regular text format in every respect, except it does not participate in the filter permission system and cannot be disabled. It needs to exist because any user who has permission to create formatted content must always have at least one text format they can use.

Because the fallback format is available to all users, it should always be configured securely. For example, when the Filter module is installed, this format is initialized to output plain text. Installation profiles and site administrators have the freedom to configure it further.

Note that the fallback format is completely distinct from the default format, which differs per user and is simply the first format which that user has access to. The default and fallback formats are only guaranteed to be the same for users who do not have access to any other format; otherwise, the fallback format's weight determines its placement with respect to the user's other formats.

Any modules implementing a format deletion functionality must not delete this format.

\begin{DoxyReturn}{Returns}
The ID of the fallback text format.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__hooks_gae4873bf6d76c33475296917d304719e9}{hook\_\-filter\_\-format\_\-disable()} 

\hyperlink{filter_8module_a187d29b1feb447737d57276e06655312}{filter\_\-default\_\-format()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_ad9e4a95f0ee5da1fb64a2c700355c864}{
\index{filter.module@{filter.module}!filter\_\-fallback\_\-format\_\-title@{filter\_\-fallback\_\-format\_\-title}}
\index{filter\_\-fallback\_\-format\_\-title@{filter\_\-fallback\_\-format\_\-title}!filter.module@{filter.module}}
\subsubsection[{filter\_\-fallback\_\-format\_\-title}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-fallback\_\-format\_\-title ()}}
\label{filter_8module_ad9e4a95f0ee5da1fb64a2c700355c864}
Returns the title of the fallback text format.

\begin{DoxyReturn}{Returns}
string The title of the fallback text format. 
\end{DoxyReturn}
\hypertarget{filter_8module_ab57887ced69322fceb2f9e70b6e92650}{
\index{filter.module@{filter.module}!filter\_\-form\_\-access\_\-denied@{filter\_\-form\_\-access\_\-denied}}
\index{filter\_\-form\_\-access\_\-denied@{filter\_\-form\_\-access\_\-denied}!filter.module@{filter.module}}
\subsubsection[{filter\_\-form\_\-access\_\-denied}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-form\_\-access\_\-denied (\$ {\em element})}}
\label{filter_8module_ab57887ced69322fceb2f9e70b6e92650}
Render API callback: Hides the field value of 'text\_\-format' elements.

To not break form processing and previews if a user does not have access to a stored text format, the expanded form elements in \hyperlink{filter_8module_a7d09545c482bcb763bd50529bc00644b}{filter\_\-process\_\-format()} are forced to take over the stored default\_\-values for 'value' and 'format'. However, to prevent the unfiltered, original value from being displayed to the user, we replace it with a friendly notice here.

\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a7d09545c482bcb763bd50529bc00644b}{filter\_\-process\_\-format()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_a3bbed48afc05f0a85c9f8a5e3bfd785f}{
\index{filter.module@{filter.module}!filter\_\-format\_\-allowcache@{filter\_\-format\_\-allowcache}}
\index{filter\_\-format\_\-allowcache@{filter\_\-format\_\-allowcache}!filter.module@{filter.module}}
\subsubsection[{filter\_\-format\_\-allowcache}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-format\_\-allowcache (\$ {\em format\_\-id})}}
\label{filter_8module_a3bbed48afc05f0a85c9f8a5e3bfd785f}
Checks if the text in a certain text format is allowed to be cached.

This function can be used to check whether the result of the filtering process can be cached. A text format may allow caching depending on the filters enabled.


\begin{DoxyParams}{Parameters}
\item[{\em \$format\_\-id}]The text format ID to check.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TRUE if the given text format allows caching, FALSE otherwise. 
\end{DoxyReturn}
\hypertarget{filter_8module_a2d4a8c1b750647973b3130d077a598ca}{
\index{filter.module@{filter.module}!filter\_\-format\_\-disable@{filter\_\-format\_\-disable}}
\index{filter\_\-format\_\-disable@{filter\_\-format\_\-disable}!filter.module@{filter.module}}
\subsubsection[{filter\_\-format\_\-disable}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-format\_\-disable (\$ {\em format})}}
\label{filter_8module_a2d4a8c1b750647973b3130d077a598ca}
Disables a text format.

There is no core facility to re-\/enable a disabled format. It is not deleted to keep information for contrib and to make sure the format ID is never reused. As there might be content using the disabled format, this would lead to data corruption.


\begin{DoxyParams}{Parameters}
\item[{\em \$format}]The text format object to be disabled. \end{DoxyParams}
\hypertarget{filter_8module_a2145846ce416161a821a055c9169a3a1}{
\index{filter.module@{filter.module}!filter\_\-format\_\-exists@{filter\_\-format\_\-exists}}
\index{filter\_\-format\_\-exists@{filter\_\-format\_\-exists}!filter.module@{filter.module}}
\subsubsection[{filter\_\-format\_\-exists}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-format\_\-exists (\$ {\em format\_\-id})}}
\label{filter_8module_a2145846ce416161a821a055c9169a3a1}
Determines if a text format exists.


\begin{DoxyParams}{Parameters}
\item[{\em \$format\_\-id}]The ID of the text format to check.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TRUE if the text format exists, FALSE otherwise. Note that for disabled formats \hyperlink{filter_8module_a2145846ce416161a821a055c9169a3a1}{filter\_\-format\_\-exists()} will return TRUE while \hyperlink{filter_8module_a8243109666d5f44bc7cc130743abaab3}{filter\_\-format\_\-load()} will return FALSE.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a8243109666d5f44bc7cc130743abaab3}{filter\_\-format\_\-load()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_a8243109666d5f44bc7cc130743abaab3}{
\index{filter.module@{filter.module}!filter\_\-format\_\-load@{filter\_\-format\_\-load}}
\index{filter\_\-format\_\-load@{filter\_\-format\_\-load}!filter.module@{filter.module}}
\subsubsection[{filter\_\-format\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-format\_\-load (\$ {\em format\_\-id})}}
\label{filter_8module_a8243109666d5f44bc7cc130743abaab3}
Loads a text format object from the database.


\begin{DoxyParams}{Parameters}
\item[{\em \$format\_\-id}]The format ID.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A fully-\/populated text format object, if the requested format exists and is enabled. If the format does not exist, or exists in the database but has been marked as disabled, FALSE is returned.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a2145846ce416161a821a055c9169a3a1}{filter\_\-format\_\-exists()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_a3522ef59e8cc0abe0a448cb92b0d9212}{
\index{filter.module@{filter.module}!filter\_\-format\_\-save@{filter\_\-format\_\-save}}
\index{filter\_\-format\_\-save@{filter\_\-format\_\-save}!filter.module@{filter.module}}
\subsubsection[{filter\_\-format\_\-save}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-format\_\-save (\$ {\em format})}}
\label{filter_8module_a3522ef59e8cc0abe0a448cb92b0d9212}
Saves a text format object to the database.


\begin{DoxyParams}{Parameters}
\item[{\em \$format}]A format object having the properties:
\begin{DoxyItemize}
\item format: A machine-\/readable name representing the ID of the text format to save. If this corresponds to an existing text format, that format will be updated; otherwise, a new format will be created.
\item name: The title of the text format.
\item status: (optional) An integer indicating whether the text format is enabled (1) or not (0). Defaults to 1.
\item weight: (optional) The weight of the text format, which controls its placement in text format lists. If omitted, the weight is set to 0.
\item filters: (optional) An associative, multi-\/dimensional array of filters assigned to the text format, keyed by the name of each filter and using the properties:
\begin{DoxyItemize}
\item weight: (optional) The weight of the filter in the text format. If omitted, either the currently stored weight is retained (if there is one), or the filter is assigned a weight of 10, which will usually put it at the bottom of the list.
\item status: (optional) A boolean indicating whether the filter is enabled in the text format. If omitted, the filter will be disabled.
\item settings: (optional) An array of configured settings for the filter. See \hyperlink{group__hooks_gaf2a2f2a46589420df896a0d42247f15a}{hook\_\-filter\_\-info()} for details.
\end{DoxyItemize}
\end{DoxyItemize}\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SAVED\_\-NEW or SAVED\_\-UPDATED. 
\end{DoxyReturn}
\hypertarget{filter_8module_a9768cd98262e5de87ebcc1b2bb507b7b}{
\index{filter.module@{filter.module}!filter\_\-formats@{filter\_\-formats}}
\index{filter\_\-formats@{filter\_\-formats}!filter.module@{filter.module}}
\subsubsection[{filter\_\-formats}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-formats (\$ {\em account} = {\ttfamily NULL})}}
\label{filter_8module_a9768cd98262e5de87ebcc1b2bb507b7b}
Retrieves a list of text formats, ordered by weight.


\begin{DoxyParams}{Parameters}
\item[{\em \$account}](optional) If provided, only those formats that are allowed for this user account will be returned. All formats will be returned otherwise. Defaults to NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of text format objects, keyed by the format ID and ordered by weight.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a01762171df5ab9dcbbcd6eb47013f681}{filter\_\-formats\_\-reset()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_a01762171df5ab9dcbbcd6eb47013f681}{
\index{filter.module@{filter.module}!filter\_\-formats\_\-reset@{filter\_\-formats\_\-reset}}
\index{filter\_\-formats\_\-reset@{filter\_\-formats\_\-reset}!filter.module@{filter.module}}
\subsubsection[{filter\_\-formats\_\-reset}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-formats\_\-reset ()}}
\label{filter_8module_a01762171df5ab9dcbbcd6eb47013f681}
Resets the text format caches.

\begin{DoxySeeAlso}{See also}
\hyperlink{filter_8module_a9768cd98262e5de87ebcc1b2bb507b7b}{filter\_\-formats()} 
\end{DoxySeeAlso}
\hypertarget{filter_8module_a9a4d34bbacb92f82ae844fefbd20d32d}{
\index{filter.module@{filter.module}!filter\_\-get\_\-filters@{filter\_\-get\_\-filters}}
\index{filter\_\-get\_\-filters@{filter\_\-get\_\-filters}!filter.module@{filter.module}}
\subsubsection[{filter\_\-get\_\-filters}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-get\_\-filters ()}}
\label{filter_8module_a9a4d34bbacb92f82ae844fefbd20d32d}
Returns a list of all filters provided by modules.

\begin{DoxyReturn}{Returns}
array An array of filter formats. 
\end{DoxyReturn}
\hypertarget{filter_8module_a3df4b9ad5e508bd13115b77401c56285}{
\index{filter.module@{filter.module}!filter\_\-get\_\-formats\_\-by\_\-role@{filter\_\-get\_\-formats\_\-by\_\-role}}
\index{filter\_\-get\_\-formats\_\-by\_\-role@{filter\_\-get\_\-formats\_\-by\_\-role}!filter.module@{filter.module}}
\subsubsection[{filter\_\-get\_\-formats\_\-by\_\-role}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-get\_\-formats\_\-by\_\-role (\$ {\em rid})}}
\label{filter_8module_a3df4b9ad5e508bd13115b77401c56285}
Retrieves a list of text formats that are allowed for a given role.


\begin{DoxyParams}{Parameters}
\item[{\em \$rid}]The user role ID to retrieve text formats for.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of text format objects that are allowed for the role, keyed by the text format ID and ordered by weight. 
\end{DoxyReturn}
\hypertarget{filter_8module_a53d0e4b419852da83e67f815912603b2}{
\index{filter.module@{filter.module}!filter\_\-get\_\-roles\_\-by\_\-format@{filter\_\-get\_\-roles\_\-by\_\-format}}
\index{filter\_\-get\_\-roles\_\-by\_\-format@{filter\_\-get\_\-roles\_\-by\_\-format}!filter.module@{filter.module}}
\subsubsection[{filter\_\-get\_\-roles\_\-by\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-get\_\-roles\_\-by\_\-format (\$ {\em format})}}
\label{filter_8module_a53d0e4b419852da83e67f815912603b2}
Retrieves a list of roles that are allowed to use a given text format.


\begin{DoxyParams}{Parameters}
\item[{\em \$format}]An object representing the text format.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of role names, keyed by role ID. 
\end{DoxyReturn}
\hypertarget{filter_8module_acb973dd946fba16056fe3d0af900af6b}{
\index{filter.module@{filter.module}!filter\_\-help@{filter\_\-help}}
\index{filter\_\-help@{filter\_\-help}!filter.module@{filter.module}}
\subsubsection[{filter\_\-help}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-help (\$ {\em path}, \/  \$ {\em arg})}}
\label{filter_8module_acb973dd946fba16056fe3d0af900af6b}
Implements \hyperlink{group__hooks_ga5589c2714a782738e8851c4c90231f0e}{hook\_\-help()}. \hypertarget{filter_8module_a29a31789549de093dd96e9d4f58b41a8}{
\index{filter.module@{filter.module}!filter\_\-list\_\-format@{filter\_\-list\_\-format}}
\index{filter\_\-list\_\-format@{filter\_\-list\_\-format}!filter.module@{filter.module}}
\subsubsection[{filter\_\-list\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-list\_\-format (\$ {\em format\_\-id})}}
\label{filter_8module_a29a31789549de093dd96e9d4f58b41a8}
Retrieves a list of filters for a given text format.

Note that this function returns all associated filters regardless of whether they are enabled or disabled. All functions working with the filter information outside of filter administration should test for \$filter-\/$>$status before performing actions with the filter.


\begin{DoxyParams}{Parameters}
\item[{\em \$format\_\-id}]The format ID to retrieve filters for.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of filter objects associated to the given text format, keyed by filter name. 
\end{DoxyReturn}
\hypertarget{filter_8module_a13c5612763d7d98499832594ac3d5466}{
\index{filter.module@{filter.module}!filter\_\-menu@{filter\_\-menu}}
\index{filter\_\-menu@{filter\_\-menu}!filter.module@{filter.module}}
\subsubsection[{filter\_\-menu}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-menu ()}}
\label{filter_8module_a13c5612763d7d98499832594ac3d5466}
Implements \hyperlink{group__hooks_ga5c95244fea59b25666e409759e133ded}{hook\_\-menu()}. \hypertarget{filter_8module_a7e24767aad57c1c96b57d58a12afef56}{
\index{filter.module@{filter.module}!filter\_\-modules\_\-disabled@{filter\_\-modules\_\-disabled}}
\index{filter\_\-modules\_\-disabled@{filter\_\-modules\_\-disabled}!filter.module@{filter.module}}
\subsubsection[{filter\_\-modules\_\-disabled}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-modules\_\-disabled (\$ {\em modules})}}
\label{filter_8module_a7e24767aad57c1c96b57d58a12afef56}
Implements \hyperlink{group__hooks_ga591c577fba8ca8dc8ec17f8bf80bdc4c}{hook\_\-modules\_\-disabled()}. \hypertarget{filter_8module_ac9fcc24aa485e1c24fa1abf036dea521}{
\index{filter.module@{filter.module}!filter\_\-modules\_\-enabled@{filter\_\-modules\_\-enabled}}
\index{filter\_\-modules\_\-enabled@{filter\_\-modules\_\-enabled}!filter.module@{filter.module}}
\subsubsection[{filter\_\-modules\_\-enabled}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-modules\_\-enabled (\$ {\em modules})}}
\label{filter_8module_ac9fcc24aa485e1c24fa1abf036dea521}
Implements \hyperlink{group__hooks_ga0eb7c67333e0f40b4a46c0dc4c4a92f3}{hook\_\-modules\_\-enabled()}. \hypertarget{filter_8module_a58d1bbec04cb733d1107e1741627c167}{
\index{filter.module@{filter.module}!filter\_\-permission@{filter\_\-permission}}
\index{filter\_\-permission@{filter\_\-permission}!filter.module@{filter.module}}
\subsubsection[{filter\_\-permission}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-permission ()}}
\label{filter_8module_a58d1bbec04cb733d1107e1741627c167}
Implements \hyperlink{group__hooks_ga2b22b45f4925f2478412477bae329713}{hook\_\-permission()}. \hypertarget{filter_8module_a9e1efa58f39dde566c1c966740db1df0}{
\index{filter.module@{filter.module}!filter\_\-permission\_\-name@{filter\_\-permission\_\-name}}
\index{filter\_\-permission\_\-name@{filter\_\-permission\_\-name}!filter.module@{filter.module}}
\subsubsection[{filter\_\-permission\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-permission\_\-name (\$ {\em format})}}
\label{filter_8module_a9e1efa58f39dde566c1c966740db1df0}
Returns the machine-\/readable permission name for a provided text format.


\begin{DoxyParams}{Parameters}
\item[{\em \$format}]An object representing a text format.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The machine-\/readable permission name, or FALSE if the provided text format is malformed or is the fallback format (which is available to all users). 
\end{DoxyReturn}
\hypertarget{filter_8module_a7d09545c482bcb763bd50529bc00644b}{
\index{filter.module@{filter.module}!filter\_\-process\_\-format@{filter\_\-process\_\-format}}
\index{filter\_\-process\_\-format@{filter\_\-process\_\-format}!filter.module@{filter.module}}
\subsubsection[{filter\_\-process\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-process\_\-format (\$ {\em element})}}
\label{filter_8module_a7d09545c482bcb763bd50529bc00644b}
Expands an element into a base element with text format selector attached.

The form element will be expanded into two separate form elements, one holding the original element, and the other holding the text format selector:
\begin{DoxyItemize}
\item value: Holds the original element, having its type changed to the value of base\_\-type or 'textarea' by default.
\item format: Holds the text format fieldset and the text format selection, using the text format id specified in format or the user's default format by default, if NULL.
\end{DoxyItemize}

The resulting value for the element will be an array holding the value and the format. For example, the value for the body element will be: 
\begin{DoxyCode}
   $form_state['values']['body']['value'] = 'foo';
   $form_state['values']['body']['format'] = 'foo';
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
\item[{\em \$element}]The form element to process. Properties used:
\begin{DoxyItemize}
\item base\_\-type: The form element type to use for the 'value' element. 'textarea' by default.
\item format: (optional) The text format ID to preselect. If NULL or not set, the default format for the current user will be used.
\end{DoxyItemize}\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The expanded element. 
\end{DoxyReturn}
\hypertarget{filter_8module_a1ceba1ca80bae00ae5eaf6eeb2758409}{
\index{filter.module@{filter.module}!filter\_\-theme@{filter\_\-theme}}
\index{filter\_\-theme@{filter\_\-theme}!filter.module@{filter.module}}
\subsubsection[{filter\_\-theme}]{\setlength{\rightskip}{0pt plus 5cm}filter\_\-theme ()}}
\label{filter_8module_a1ceba1ca80bae00ae5eaf6eeb2758409}
Implements \hyperlink{group__hooks_ga013ccb45c7aaab1c16cf9691428c910d}{hook\_\-theme()}. 