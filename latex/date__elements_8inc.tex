\hypertarget{date__elements_8inc}{
\section{html/profiles/dosomething/modules/contrib/date/date\_\-elements.inc File Reference}
\label{date__elements_8inc}\index{html/profiles/dosomething/modules/contrib/date/date\_\-elements.inc@{html/profiles/dosomething/modules/contrib/date/date\_\-elements.inc}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{date__elements_8inc_abed5ce13fbc96267910eba507d2c6989}{date\_\-field\_\-widget\_\-form} (\&\$form, \&\$form\_\-state, \$field, \$instance, \$langcode, \$items, \$delta, \$base)
\item 
\hyperlink{date__elements_8inc_aafe3fa0de290a2166dc60e7a44a7cb53}{date\_\-local\_\-date} (\$item, \$timezone, \$field, \$instance, \$part= 'value')
\item 
\hyperlink{date__elements_8inc_aa01d96bc4c74fb8c7f8c2fc36d05d199}{date\_\-default\_\-value} (\$field, \$instance, \$langcode)
\item 
\hyperlink{date__elements_8inc_aa64b1801dba4cfa8c0ca02099fa7147a}{date\_\-default\_\-value\_\-part} (\$item, \$field, \$instance, \$langcode, \$part= 'value')
\item 
\hyperlink{date__elements_8inc_a9542273df9fca1ba0a55c26573f3744e}{date\_\-combo\_\-element\_\-process} (\$element, \&\$form\_\-state, \$form)
\item 
\hypertarget{date__elements_8inc_ae114e998da4c9d07524054337a7eed15}{
{\bfseries date\_\-element\_\-empty} (\$element, \&\$form\_\-state)}
\label{date__elements_8inc_ae114e998da4c9d07524054337a7eed15}

\item 
\hyperlink{date__elements_8inc_ad3819d1cdfb02b44cf0d4dd424a837ba}{date\_\-combo\_\-validate} (\$element, \&\$form\_\-state)
\item 
\hyperlink{date__elements_8inc_a3767feebcc2853dda728fffca027b312}{date\_\-input\_\-format} (\$element, \$field, \$instance)
\item 
\hyperlink{date__elements_8inc_a526cbfd5a13f0cf7c0f4fcc36fb174cc}{date\_\-date\_\-select\_\-pre\_\-validate\_\-alter} (\&\$element, \&\$form\_\-state, \&\$input)
\item 
\hyperlink{date__elements_8inc_ab74eeed6b68ddd639f767a6973725f6b}{date\_\-date\_\-text\_\-pre\_\-validate\_\-alter} (\&\$element, \&\$form\_\-state, \&\$input)
\item 
\hyperlink{date__elements_8inc_a955d565e21db7029f550ce0f35bda5d2}{date\_\-date\_\-popup\_\-pre\_\-validate\_\-alter} (\&\$element, \&\$form\_\-state, \&\$input)
\item 
\hyperlink{date__elements_8inc_a9de4ee190a27560be3dddbb7f951cf24}{date\_\-empty\_\-end\_\-date} (\&\$element, \&\$form\_\-state, \&\$input)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Date forms and form themes and validation.

All code used in form editing and processing is in this file, included only during form editing. 

\subsection{Function Documentation}
\hypertarget{date__elements_8inc_a9542273df9fca1ba0a55c26573f3744e}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-combo\_\-element\_\-process@{date\_\-combo\_\-element\_\-process}}
\index{date\_\-combo\_\-element\_\-process@{date\_\-combo\_\-element\_\-process}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-combo\_\-element\_\-process}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-combo\_\-element\_\-process (\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \$ {\em form})}}
\label{date__elements_8inc_a9542273df9fca1ba0a55c26573f3744e}
Process an individual date element. \hypertarget{date__elements_8inc_ad3819d1cdfb02b44cf0d4dd424a837ba}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-combo\_\-validate@{date\_\-combo\_\-validate}}
\index{date\_\-combo\_\-validate@{date\_\-combo\_\-validate}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-combo\_\-validate}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-combo\_\-validate (\$ {\em element}, \/  \&\$ {\em form\_\-state})}}
\label{date__elements_8inc_ad3819d1cdfb02b44cf0d4dd424a837ba}
Validate and update a combo element. Don't try this if there were errors before reaching this point. \hypertarget{date__elements_8inc_a955d565e21db7029f550ce0f35bda5d2}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-date\_\-popup\_\-pre\_\-validate\_\-alter@{date\_\-date\_\-popup\_\-pre\_\-validate\_\-alter}}
\index{date\_\-date\_\-popup\_\-pre\_\-validate\_\-alter@{date\_\-date\_\-popup\_\-pre\_\-validate\_\-alter}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-date\_\-popup\_\-pre\_\-validate\_\-alter}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-date\_\-popup\_\-pre\_\-validate\_\-alter (\&\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \&\$ {\em input})}}
\label{date__elements_8inc_a955d565e21db7029f550ce0f35bda5d2}
Implements \hyperlink{date_8api_8php_ae85363c63f938c6742a67b315e925730}{hook\_\-date\_\-popup\_\-pre\_\-validate\_\-alter()}. \hypertarget{date__elements_8inc_a526cbfd5a13f0cf7c0f4fcc36fb174cc}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-date\_\-select\_\-pre\_\-validate\_\-alter@{date\_\-date\_\-select\_\-pre\_\-validate\_\-alter}}
\index{date\_\-date\_\-select\_\-pre\_\-validate\_\-alter@{date\_\-date\_\-select\_\-pre\_\-validate\_\-alter}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-date\_\-select\_\-pre\_\-validate\_\-alter}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-date\_\-select\_\-pre\_\-validate\_\-alter (\&\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \&\$ {\em input})}}
\label{date__elements_8inc_a526cbfd5a13f0cf7c0f4fcc36fb174cc}
Implements \hyperlink{date_8api_8php_a8fa3364916ca73163501f3b9fa319dd6}{hook\_\-date\_\-select\_\-pre\_\-validate\_\-alter()}. \hypertarget{date__elements_8inc_ab74eeed6b68ddd639f767a6973725f6b}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-date\_\-text\_\-pre\_\-validate\_\-alter@{date\_\-date\_\-text\_\-pre\_\-validate\_\-alter}}
\index{date\_\-date\_\-text\_\-pre\_\-validate\_\-alter@{date\_\-date\_\-text\_\-pre\_\-validate\_\-alter}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-date\_\-text\_\-pre\_\-validate\_\-alter}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-date\_\-text\_\-pre\_\-validate\_\-alter (\&\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \&\$ {\em input})}}
\label{date__elements_8inc_ab74eeed6b68ddd639f767a6973725f6b}
Implements \hyperlink{date_8api_8php_a2fc6fc0b5b0092304084ce3ce29741ae}{hook\_\-date\_\-text\_\-pre\_\-validate\_\-alter()}. \hypertarget{date__elements_8inc_aa01d96bc4c74fb8c7f8c2fc36d05d199}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-default\_\-value@{date\_\-default\_\-value}}
\index{date\_\-default\_\-value@{date\_\-default\_\-value}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-default\_\-value}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-default\_\-value (\$ {\em field}, \/  \$ {\em instance}, \/  \$ {\em langcode})}}
\label{date__elements_8inc_aa01d96bc4c74fb8c7f8c2fc36d05d199}
The callback for setting a default value for an empty date field. \hypertarget{date__elements_8inc_aa64b1801dba4cfa8c0ca02099fa7147a}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-default\_\-value\_\-part@{date\_\-default\_\-value\_\-part}}
\index{date\_\-default\_\-value\_\-part@{date\_\-default\_\-value\_\-part}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-default\_\-value\_\-part}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-default\_\-value\_\-part (\$ {\em item}, \/  \$ {\em field}, \/  \$ {\em instance}, \/  \$ {\em langcode}, \/  \$ {\em part} = {\ttfamily 'value'})}}
\label{date__elements_8inc_aa64b1801dba4cfa8c0ca02099fa7147a}
Helper function for the date default value callback to set either 'value' or 'value2' to its default value. \hypertarget{date__elements_8inc_a9de4ee190a27560be3dddbb7f951cf24}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-empty\_\-end\_\-date@{date\_\-empty\_\-end\_\-date}}
\index{date\_\-empty\_\-end\_\-date@{date\_\-empty\_\-end\_\-date}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-empty\_\-end\_\-date}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-empty\_\-end\_\-date (\&\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \&\$ {\em input})}}
\label{date__elements_8inc_a9de4ee190a27560be3dddbb7f951cf24}
Helper function to clear out end date when not being used. \hypertarget{date__elements_8inc_abed5ce13fbc96267910eba507d2c6989}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-field\_\-widget\_\-form@{date\_\-field\_\-widget\_\-form}}
\index{date\_\-field\_\-widget\_\-form@{date\_\-field\_\-widget\_\-form}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-field\_\-widget\_\-form}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-field\_\-widget\_\-form (\&\$ {\em form}, \/  \&\$ {\em form\_\-state}, \/  \$ {\em field}, \/  \$ {\em instance}, \/  \$ {\em langcode}, \/  \$ {\em items}, \/  \$ {\em delta}, \/  \$ {\em base})}}
\label{date__elements_8inc_abed5ce13fbc96267910eba507d2c6989}
Private implementation of hook\_\-widget().

The widget builds out a complex date element in the following way:


\begin{DoxyItemize}
\item A field is pulled out of the database which is comprised of one or more collections of start/end dates.
\end{DoxyItemize}


\begin{DoxyItemize}
\item The dates in this field are all converted from the UTC values stored in the database back to the local time. This is done in process to avoid making this change to dates that are not being processed, like those hidden with access.
\end{DoxyItemize}


\begin{DoxyItemize}
\item If values are empty, the field settings rules are used to determine if the default\_\-values should be empty, now, the same, or use strtotime.
\end{DoxyItemize}


\begin{DoxyItemize}
\item Each start/end combination is created using the date\_\-combo element type defined by the date module. If the timezone is date-\/specific, a timezone selector is added to the first combo element.
\end{DoxyItemize}


\begin{DoxyItemize}
\item The date combo element creates two individual date elements, one each for the start and end field, using the appropriate individual Date API date elements, like selects, textfields, or popups.
\end{DoxyItemize}


\begin{DoxyItemize}
\item In the individual element validation, the data supplied by the user is used to update the individual date values.
\end{DoxyItemize}


\begin{DoxyItemize}
\item In the combo date validation, the timezone is updated, if necessary, then the user input date values are used with that timezone to create date objects, which are used update combo date timezone and offset values.
\end{DoxyItemize}


\begin{DoxyItemize}
\item In the field's submission processing, the new date values, which are in the local timezone, are converted back to their UTC values and stored. 
\end{DoxyItemize}\hypertarget{date__elements_8inc_a3767feebcc2853dda728fffca027b312}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-input\_\-format@{date\_\-input\_\-format}}
\index{date\_\-input\_\-format@{date\_\-input\_\-format}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-input\_\-format}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-input\_\-format (\$ {\em element}, \/  \$ {\em field}, \/  \$ {\em instance})}}
\label{date__elements_8inc_a3767feebcc2853dda728fffca027b312}
Determine the input format for this element. \hypertarget{date__elements_8inc_aafe3fa0de290a2166dc60e7a44a7cb53}{
\index{date\_\-elements.inc@{date\_\-elements.inc}!date\_\-local\_\-date@{date\_\-local\_\-date}}
\index{date\_\-local\_\-date@{date\_\-local\_\-date}!date_elements.inc@{date\_\-elements.inc}}
\subsubsection[{date\_\-local\_\-date}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-local\_\-date (\$ {\em item}, \/  \$ {\em timezone}, \/  \$ {\em field}, \/  \$ {\em instance}, \/  \$ {\em part} = {\ttfamily 'value'})}}
\label{date__elements_8inc_aafe3fa0de290a2166dc60e7a44a7cb53}
Create local date object.

Create a date object set to local time from the field and widget settings and item values. Default values for new entities are set by the default value callback, so don't need to be accounted for here. 