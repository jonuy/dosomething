\hypertarget{classDrupalCacheArray}{
\section{DrupalCacheArray Class Reference}
\label{classDrupalCacheArray}\index{DrupalCacheArray@{DrupalCacheArray}}
}
Inheritance diagram for DrupalCacheArray::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classDrupalCacheArray}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__schemaapi_gadbc374d9057276944d38062e769a1a99}{\_\-\_\-construct} (\$cid, \$bin)
\item 
\hyperlink{group__schemaapi_gabec90ca8c02f7c14dfbf66fd9e6bb5dd}{offsetExists} (\$offset)
\item 
\hyperlink{group__schemaapi_ga57be4d1b39bee68ee1c395c1cd9a2de5}{offsetGet} (\$offset)
\item 
\hyperlink{group__schemaapi_ga0d3377e6f4b8c592f006a75f8eadf21a}{offsetSet} (\$offset, \$value)
\item 
\hyperlink{group__schemaapi_ga8bb43551e89c35590c56a49f8fb54e3f}{offsetUnset} (\$offset)
\item 
\hyperlink{group__schemaapi_ga63c3aa47f3a451f0c5182800d29d5d9f}{\_\-\_\-destruct} ()
\item 
\hypertarget{classDrupalCacheArray_adbc374d9057276944d38062e769a1a99}{
{\bfseries \_\-\_\-construct} (\$cid, \$bin)}
\label{classDrupalCacheArray_adbc374d9057276944d38062e769a1a99}

\item 
\hyperlink{classDrupalCacheArray_a0d87b8b0e005c00bbf7fa6ed11cd1e26}{initializeRegistry} ()
\item 
\hypertarget{classDrupalCacheArray_abec90ca8c02f7c14dfbf66fd9e6bb5dd}{
{\bfseries offsetExists} (\$offset)}
\label{classDrupalCacheArray_abec90ca8c02f7c14dfbf66fd9e6bb5dd}

\item 
\hypertarget{classDrupalCacheArray_a57be4d1b39bee68ee1c395c1cd9a2de5}{
{\bfseries offsetGet} (\$offset)}
\label{classDrupalCacheArray_a57be4d1b39bee68ee1c395c1cd9a2de5}

\item 
\hypertarget{classDrupalCacheArray_a33d892a839b353177e2483f6946178e9}{
{\bfseries resolveCacheMiss} (\$offset)}
\label{classDrupalCacheArray_a33d892a839b353177e2483f6946178e9}

\item 
\hypertarget{classDrupalCacheArray_a9d99af903ba2660c09ca835e63c79118}{
{\bfseries set} (\$data, \$lock=TRUE)}
\label{classDrupalCacheArray_a9d99af903ba2660c09ca835e63c79118}

\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__schemaapi_ga27687007f42979bdb8999683f3270c4a}{persist} (\$offset, \$persist=TRUE)
\item 
\hyperlink{group__schemaapi_ga33d892a839b353177e2483f6946178e9}{resolveCacheMiss} (\$offset)
\item 
\hyperlink{group__schemaapi_ga9d99af903ba2660c09ca835e63c79118}{set} (\$data, \$lock=TRUE)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDrupalCacheArray_a616fba4b18bafdf4cc6e34c4b5696d58}{\$cid}
\item 
\hyperlink{group__schemaapi_ga29eeef3160c70f129c447e796e330cdb}{\$bin}
\item 
\hyperlink{group__schemaapi_ga0ba2e712f18ec2c8ee8bf97d115c85d1}{\$keysToPersist} = array()
\item 
\hyperlink{group__schemaapi_ga696fd96aa3639a9d7d968961db9d5819}{\$storage} = array()
\item 
\hyperlink{classDrupalCacheArray_a7e5f106aba0180abc924fee9b2137dd3}{\$persistable}
\item 
\hyperlink{classDrupalCacheArray_a31477bbed77e94f393202701a2179643}{\$completeRegistry}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provides a caching wrapper to be used in place of large array structures.

This class should be extended by systems that need to cache large amounts of data and have it represented as an array to calling functions. These arrays can become very large, so ArrayAccess is used to allow different strategies to be used for caching internally (lazy loading, building caches over time etc.). This can dramatically reduce the amount of data that needs to be loaded from cache backends on each request, and memory usage from static caches of that same data.

Note that array\_\-$\ast$ functions do not work with ArrayAccess. Systems using \hyperlink{classDrupalCacheArray}{DrupalCacheArray} should use this only internally. If providing API functions that return the full array, this can be cached separately or returned directly. However since \hyperlink{classDrupalCacheArray}{DrupalCacheArray} holds partial content by design, it should be a normal PHP array or otherwise contain the full structure.

Note also that due to limitations in PHP prior to 5.3.4, it is impossible to write directly to the contents of nested arrays contained in this object. Only writes to the top-\/level array elements are possible. So if you previously had set \$object\mbox{[}'foo'\mbox{]} = array(1, 2, 'bar' =$>$ 'baz'), but later want to change the value of 'bar' from 'baz' to 'foobar', you cannot do so a targeted write like \$object\mbox{[}'foo'\mbox{]}\mbox{[}'bar'\mbox{]} = 'foobar'. Instead, you must overwrite the entire top-\/level 'foo' array with the entire set of new values: \$object\mbox{[}'foo'\mbox{]} = array(1, 2, 'bar' =$>$ 'foobar'). Due to this same limitation, attempts to create references to any contained data, nested or otherwise, will fail silently. So \$var = \&\$object\mbox{[}'foo'\mbox{]} will not throw an error, and \$var will be populated with the contents of \$object\mbox{[}'foo'\mbox{]}, but that data will be passed by value, not reference. For more information on the PHP limitation, see the note in the official PHP documentation atÂ· \href{http://php.net/manual/en/arrayaccess.offsetget.php}{\tt http://php.net/manual/en/arrayaccess.offsetget.php} on ArrayAccess::offsetGet().

By default, the class accounts for caches where calling functions might request keys in the array that won't exist even after a cache rebuild. This prevents situations where a cache rebuild would be triggered over and over due to a 'missing' item. These cases are stored internally as a value of NULL. This means that the \hyperlink{group__schemaapi_ga57be4d1b39bee68ee1c395c1cd9a2de5}{offsetGet()} and \hyperlink{group__schemaapi_gabec90ca8c02f7c14dfbf66fd9e6bb5dd}{offsetExists()} methods must be overridden if caching an array where the top level values can legitimately be NULL, and where \$object-\/$>$\hyperlink{group__schemaapi_gabec90ca8c02f7c14dfbf66fd9e6bb5dd}{offsetExists()} needs to correctly return (equivalent to array\_\-key\_\-exists() vs. isset()). This should not be necessary in the majority of cases.

Classes extending this class must override at least the \hyperlink{group__schemaapi_ga33d892a839b353177e2483f6946178e9}{resolveCacheMiss()} method to have a working implementation.

\hyperlink{group__schemaapi_ga0d3377e6f4b8c592f006a75f8eadf21a}{offsetSet()} is not overridden by this class by default. In practice this means that assigning an offset via arrayAccess will only apply while the object is in scope and will not be written back to the persistent cache. This follows a similar pattern to static vs. persistent caching in procedural code. Extending classes may wish to alter this behavior, for example by overriding \hyperlink{group__schemaapi_ga0d3377e6f4b8c592f006a75f8eadf21a}{offsetSet()} and adding an automatic call to \hyperlink{group__schemaapi_ga27687007f42979bdb8999683f3270c4a}{persist()}.

\begin{DoxySeeAlso}{See also}
\hyperlink{classSchemaCache}{SchemaCache}
\end{DoxySeeAlso}
Builds the run-\/time theme registry.

Extends \hyperlink{classDrupalCacheArray}{DrupalCacheArray} to allow the theme registry to be accessed as a complete registry, while internally caching only the parts of the registry that are actually in use on the site. On cache misses the complete theme registry is loaded and used to update the run-\/time cache. 

\subsection{Member Function Documentation}
\hypertarget{classDrupalCacheArray_a0d87b8b0e005c00bbf7fa6ed11cd1e26}{
\index{DrupalCacheArray@{DrupalCacheArray}!initializeRegistry@{initializeRegistry}}
\index{initializeRegistry@{initializeRegistry}!DrupalCacheArray@{DrupalCacheArray}}
\subsubsection[{initializeRegistry}]{\setlength{\rightskip}{0pt plus 5cm}DrupalCacheArray::initializeRegistry ()}}
\label{classDrupalCacheArray_a0d87b8b0e005c00bbf7fa6ed11cd1e26}
Initializes the full theme registry.

\begin{DoxyReturn}{Returns}
An array with the keys of the full theme registry, but the values initialized to NULL. 
\end{DoxyReturn}


\subsection{Member Data Documentation}
\hypertarget{classDrupalCacheArray_a616fba4b18bafdf4cc6e34c4b5696d58}{
\index{DrupalCacheArray@{DrupalCacheArray}!\$cid@{\$cid}}
\index{\$cid@{\$cid}!DrupalCacheArray@{DrupalCacheArray}}
\subsubsection[{\$cid}]{\setlength{\rightskip}{0pt plus 5cm}DrupalCacheArray::\$cid\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDrupalCacheArray_a616fba4b18bafdf4cc6e34c4b5696d58}
A cid to pass to \hyperlink{includes_2cache_8inc_a48081f36334909f561ef4f538fa640d2}{cache\_\-set()} and \hyperlink{includes_2cache_8inc_a9d873815c28909b61c3a6188b383f8a3}{cache\_\-get()}. \hypertarget{classDrupalCacheArray_a31477bbed77e94f393202701a2179643}{
\index{DrupalCacheArray@{DrupalCacheArray}!\$completeRegistry@{\$completeRegistry}}
\index{\$completeRegistry@{\$completeRegistry}!DrupalCacheArray@{DrupalCacheArray}}
\subsubsection[{\$completeRegistry}]{\setlength{\rightskip}{0pt plus 5cm}DrupalCacheArray::\$completeRegistry\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDrupalCacheArray_a31477bbed77e94f393202701a2179643}
The complete theme registry array. \hypertarget{classDrupalCacheArray_a7e5f106aba0180abc924fee9b2137dd3}{
\index{DrupalCacheArray@{DrupalCacheArray}!\$persistable@{\$persistable}}
\index{\$persistable@{\$persistable}!DrupalCacheArray@{DrupalCacheArray}}
\subsubsection[{\$persistable}]{\setlength{\rightskip}{0pt plus 5cm}DrupalCacheArray::\$persistable\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDrupalCacheArray_a7e5f106aba0180abc924fee9b2137dd3}
Whether the partial registry can be persisted to the cache.

This is only allowed if all modules and the request method is GET. \hyperlink{includes_2theme_8inc_a7c25609a935874541a19657affd30fff}{theme()} should be very rarely called on POST requests and this avoids polluting the runtime cache. 

The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
html/includes/\hyperlink{bootstrap_8inc}{bootstrap.inc}\item 
html/includes/\hyperlink{includes_2theme_8inc}{theme.inc}\end{DoxyCompactItemize}
