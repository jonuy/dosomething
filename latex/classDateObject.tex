\hypertarget{classDateObject}{
\section{DateObject Class Reference}
\label{classDateObject}\index{DateObject@{DateObject}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDateObject_a9a90ad5b8fd69379eba62dd07e0aaa6e}{\_\-\_\-sleep} ()
\item 
\hyperlink{classDateObject_a6cd3a2ac8b0d69928ba53d04c5486435}{\_\-\_\-wakeup} ()
\item 
\hyperlink{classDateObject_ac39c3670e00202a2c3c213edbc8deec8}{\_\-\_\-toString} ()
\item 
\hyperlink{classDateObject_a51c14ca40ce3c847f12057055a7899cc}{\_\-\_\-construct} (\$time= 'now', \$tz=NULL, \$format=NULL)
\item 
\hyperlink{classDateObject_a9974bc28e7a0bc4e8fece41fa065bb53}{merge} (FeedsDateTime \$other)
\item 
\hyperlink{classDateObject_a2492f42b3e5db5668b9c3cca250767ee}{setTimezone} (\$tz, \$force=FALSE)
\item 
\hyperlink{classDateObject_ad85e273d0e5ddb394f3e3f0fcd68a19b}{format} (\$format, \$force=FALSE)
\item 
\hyperlink{classDateObject_adcf20b89e2c909ffc82567efcf7d1465}{addGranularity} (\$g)
\item 
\hyperlink{classDateObject_a46c9b0df6160a5253f90adbac4e1848f}{removeGranularity} (\$g)
\item 
\hyperlink{classDateObject_a7b8143706b36b592b071b76ddf14d9ff}{hasGranularity} (\$g=NULL)
\item 
\hyperlink{classDateObject_aa4dfd0e15b696446ac26c0a6bc5284c6}{validGranularity} (\$granularity=NULL, \$flexible=FALSE)
\item 
\hyperlink{classDateObject_aff6e57eec29c7706d59c6dc7e0d8e9f9}{hasTime} ()
\item 
\hyperlink{classDateObject_af83b95282617a2d2ec4dded415f84ed7}{completeDate} ()
\item 
\hyperlink{classDateObject_a38ea3db16bafb0f1b10acaeb0ee74f97}{limitGranularity} (\$granularity)
\item 
\hyperlink{classDateObject_a470d11f41df750e2d8ff522c33d98238}{toArray} (\$force=FALSE)
\item 
\hyperlink{classDateObject_ac98a3b4209dd6df8da10e327ff501b2e}{toISO} (\$arr, \$full=FALSE)
\item 
\hyperlink{classDateObject_a0a5d9d34e563019feb0079e89ccae619}{setFuzzyDate} (\$date, \$format=NULL, \$default= 'first')
\item 
\hyperlink{classDateObject_ad79130b614d7207bd4f93577de7d881d}{arrayErrors} (\$arr)
\item 
\hyperlink{classDateObject_a58a7653254c911f52b506e028b5bc35a}{difference} (\$date2\_\-in, \$measure= 'seconds', \$absolute=TRUE)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDateObject_a06ca53202c51f234c64a9a60fe2febf7}{
{\bfseries \$granularity} = array()}
\label{classDateObject_a06ca53202c51f234c64a9a60fe2febf7}

\item 
\hypertarget{classDateObject_aac238b35e22ef08a8d9d4c3d274be1f2}{
{\bfseries \$errors} = array()}
\label{classDateObject_aac238b35e22ef08a8d9d4c3d274be1f2}

\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDateObject_af37aa470a0a1debd8a1b46c0dbaf843f}{setGranularityFromTime} (\$time, \$tz)
\item 
\hyperlink{classDateObject_a46f98ee14391ce5aff22406b65858949}{parse} (\$date, \$tz, \$format)
\item 
\hyperlink{classDateObject_a6dfed6663a0da8662e3cbfa1886d8396}{forceValid} (\$part, \$value, \$default= 'first', \$month=NULL, \$year=NULL)
\end{DoxyCompactItemize}
\subsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDateObject_a92f733e719f64037b1542ee9eb505198}{
static {\bfseries \$allgranularity} = array('year', 'month', 'day', 'hour', 'minute', 'second', 'timezone')}
\label{classDateObject_a92f733e719f64037b1542ee9eb505198}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Extend PHP DateTime class with granularity handling, merge functionality and slightly more flexible initialization parameters.

This class is a Drupal independent extension of the $>$= PHP 5.2 DateTime class.

\begin{DoxySeeAlso}{See also}
FeedsDateTimeElement class 
\end{DoxySeeAlso}


\subsection{Member Function Documentation}
\hypertarget{classDateObject_a51c14ca40ce3c847f12057055a7899cc}{
\index{DateObject@{DateObject}!\_\-\_\-construct@{\_\-\_\-construct}}
\index{\_\-\_\-construct@{\_\-\_\-construct}!DateObject@{DateObject}}
\subsubsection[{\_\-\_\-construct}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::\_\-\_\-construct (\$ {\em time} = {\ttfamily 'now'}, \/  \$ {\em tz} = {\ttfamily NULL}, \/  \$ {\em format} = {\ttfamily NULL})}}
\label{classDateObject_a51c14ca40ce3c847f12057055a7899cc}
Constructs a date object.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$time A date/time string or array. Defaults to 'now'. \item[{\em object$|$string$|$null}]\$tz PHP DateTimeZone object, string or NULL allowed. Defaults to NULL. \item[{\em string}]\$format PHP date() type format for parsing. Doesn't support timezones; if you have a timezone, send NULL and the default constructor method will hopefully parse it. \$format is recommended in order to use negative or large years, which php's parser fails on. \end{DoxyParams}
\hypertarget{classDateObject_a9a90ad5b8fd69379eba62dd07e0aaa6e}{
\index{DateObject@{DateObject}!\_\-\_\-sleep@{\_\-\_\-sleep}}
\index{\_\-\_\-sleep@{\_\-\_\-sleep}!DateObject@{DateObject}}
\subsubsection[{\_\-\_\-sleep}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::\_\-\_\-sleep ()}}
\label{classDateObject_a9a90ad5b8fd69379eba62dd07e0aaa6e}
Prepares the object during serialization.

We are extending a core class and core classes cannot be serialized.

\begin{DoxyReturn}{Returns}
array Returns an array with the names of the variables that were serialized.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\href{http://bugs.php.net/41334}{\tt http://bugs.php.net/41334} 

\href{http://bugs.php.net/39821}{\tt http://bugs.php.net/39821} 
\end{DoxySeeAlso}
\hypertarget{classDateObject_ac39c3670e00202a2c3c213edbc8deec8}{
\index{DateObject@{DateObject}!\_\-\_\-toString@{\_\-\_\-toString}}
\index{\_\-\_\-toString@{\_\-\_\-toString}!DateObject@{DateObject}}
\subsubsection[{\_\-\_\-toString}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::\_\-\_\-toString ()}}
\label{classDateObject_ac39c3670e00202a2c3c213edbc8deec8}
Returns the date object as a string.

\begin{DoxyReturn}{Returns}
string The date object formatted as a string. 
\end{DoxyReturn}
\hypertarget{classDateObject_a6cd3a2ac8b0d69928ba53d04c5486435}{
\index{DateObject@{DateObject}!\_\-\_\-wakeup@{\_\-\_\-wakeup}}
\index{\_\-\_\-wakeup@{\_\-\_\-wakeup}!DateObject@{DateObject}}
\subsubsection[{\_\-\_\-wakeup}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::\_\-\_\-wakeup ()}}
\label{classDateObject_a6cd3a2ac8b0d69928ba53d04c5486435}
Re-\/builds the object using local variables. \hypertarget{classDateObject_adcf20b89e2c909ffc82567efcf7d1465}{
\index{DateObject@{DateObject}!addGranularity@{addGranularity}}
\index{addGranularity@{addGranularity}!DateObject@{DateObject}}
\subsubsection[{addGranularity}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::addGranularity (\$ {\em g})}}
\label{classDateObject_adcf20b89e2c909ffc82567efcf7d1465}
Adds a granularity entry to the array.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$g A single date part. \end{DoxyParams}
\hypertarget{classDateObject_ad79130b614d7207bd4f93577de7d881d}{
\index{DateObject@{DateObject}!arrayErrors@{arrayErrors}}
\index{arrayErrors@{arrayErrors}!DateObject@{DateObject}}
\subsubsection[{arrayErrors}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::arrayErrors (\$ {\em arr})}}
\label{classDateObject_ad79130b614d7207bd4f93577de7d881d}
Finds possible errors in an array of date part values.

The \hyperlink{classDateObject_a6dfed6663a0da8662e3cbfa1886d8396}{forceValid()} function will change an invalid value to a valid one, so we just need to see if the value got altered.


\begin{DoxyParams}{Parameters}
\item[{\em array}]\$arr An array of date values, keyed by date part.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array An array of error messages, keyed by date part. 
\end{DoxyReturn}
\hypertarget{classDateObject_af83b95282617a2d2ec4dded415f84ed7}{
\index{DateObject@{DateObject}!completeDate@{completeDate}}
\index{completeDate@{completeDate}!DateObject@{DateObject}}
\subsubsection[{completeDate}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::completeDate ()}}
\label{classDateObject_af83b95282617a2d2ec4dded415f84ed7}
Returns whether the input values included a year.

Useful to use pseudo date objects when we only are interested in the time.

\begin{Desc}
\item[\hyperlink{todo__todo000020}{Todo}]\$this-\/$>$completeDate does not actually exist? \end{Desc}
\hypertarget{classDateObject_a58a7653254c911f52b506e028b5bc35a}{
\index{DateObject@{DateObject}!difference@{difference}}
\index{difference@{difference}!DateObject@{DateObject}}
\subsubsection[{difference}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::difference (\$ {\em date2\_\-in}, \/  \$ {\em measure} = {\ttfamily 'seconds'}, \/  \$ {\em absolute} = {\ttfamily TRUE})}}
\label{classDateObject_a58a7653254c911f52b506e028b5bc35a}
Computes difference between two days using a given measure.


\begin{DoxyParams}{Parameters}
\item[{\em object}]\$date2\_\-in The stop date. \item[{\em string}]\$measure (optional) A granularity date part. Defaults to 'seconds'. \item[{\em boolean}]\$absolute (optional) Indicate whether the absolute value of the difference should be returned or if the sign should be retained. Defaults to TRUE. \end{DoxyParams}
\hypertarget{classDateObject_a6dfed6663a0da8662e3cbfa1886d8396}{
\index{DateObject@{DateObject}!forceValid@{forceValid}}
\index{forceValid@{forceValid}!DateObject@{DateObject}}
\subsubsection[{forceValid}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::forceValid (\$ {\em part}, \/  \$ {\em value}, \/  \$ {\em default} = {\ttfamily 'first'}, \/  \$ {\em month} = {\ttfamily NULL}, \/  \$ {\em year} = {\ttfamily NULL})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDateObject_a6dfed6663a0da8662e3cbfa1886d8396}
Converts a date part into something that will produce a valid date.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$part The date part. \item[{\em int}]\$value The date value for this part. \item[{\em string}]\$default (optional) If the fallback should use the first value of the date part, or the current value of the date part. Defaults to 'first'. \item[{\em int}]\$month (optional) Used when the date part is less than 'month' to specify the date. Defaults to NULL. \item[{\em int}]\$year (optional) Used when the date part is less than 'year' to specify the date. Defaults to NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int A valid date value. 
\end{DoxyReturn}
\hypertarget{classDateObject_ad85e273d0e5ddb394f3e3f0fcd68a19b}{
\index{DateObject@{DateObject}!format@{format}}
\index{format@{format}!DateObject@{DateObject}}
\subsubsection[{format}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::format (\$ {\em format}, \/  \$ {\em force} = {\ttfamily FALSE})}}
\label{classDateObject_ad85e273d0e5ddb394f3e3f0fcd68a19b}
Returns date formatted according to given format.

Overrides base format function, formats this date according to its available granularity, unless \$force'ed not to limit to granularity.

Add translation into this so translated names will be provided.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$format A date format string. \item[{\em bool}]\$force Whether or not to limit the granularity. Defaults to FALSE.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string$|$false Returns the formatted date string on success or FALSE on failure. 
\end{DoxyReturn}
\hypertarget{classDateObject_a7b8143706b36b592b071b76ddf14d9ff}{
\index{DateObject@{DateObject}!hasGranularity@{hasGranularity}}
\index{hasGranularity@{hasGranularity}!DateObject@{DateObject}}
\subsubsection[{hasGranularity}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::hasGranularity (\$ {\em g} = {\ttfamily NULL})}}
\label{classDateObject_a7b8143706b36b592b071b76ddf14d9ff}
Checks granularity array for a given entry.


\begin{DoxyParams}{Parameters}
\item[{\em array$|$null}]\$g An array of date parts. Defaults to NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool TRUE if the date part is present in the date's granularity. 
\end{DoxyReturn}
\hypertarget{classDateObject_aff6e57eec29c7706d59c6dc7e0d8e9f9}{
\index{DateObject@{DateObject}!hasTime@{hasTime}}
\index{hasTime@{hasTime}!DateObject@{DateObject}}
\subsubsection[{hasTime}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::hasTime ()}}
\label{classDateObject_aff6e57eec29c7706d59c6dc7e0d8e9f9}
Returns whether this object has time set.

Used primarily for timezone conversion and formatting.

\begin{DoxyReturn}{Returns}
bool TRUE if the date contains time parts, FALSE otherwise. 
\end{DoxyReturn}
\hypertarget{classDateObject_a38ea3db16bafb0f1b10acaeb0ee74f97}{
\index{DateObject@{DateObject}!limitGranularity@{limitGranularity}}
\index{limitGranularity@{limitGranularity}!DateObject@{DateObject}}
\subsubsection[{limitGranularity}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::limitGranularity (\$ {\em granularity})}}
\label{classDateObject_a38ea3db16bafb0f1b10acaeb0ee74f97}
Removes unwanted date parts from a date.

In common usage we should not unset timezone through this.


\begin{DoxyParams}{Parameters}
\item[{\em array}]\$granularity An array of date parts. \end{DoxyParams}
\hypertarget{classDateObject_a9974bc28e7a0bc4e8fece41fa065bb53}{
\index{DateObject@{DateObject}!merge@{merge}}
\index{merge@{merge}!DateObject@{DateObject}}
\subsubsection[{merge}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::merge (FeedsDateTime \$ {\em other})}}
\label{classDateObject_a9974bc28e7a0bc4e8fece41fa065bb53}
Merges two date objects together using the current date values as defaults.


\begin{DoxyParams}{Parameters}
\item[{\em object}]\$other Another date object to merge with.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
object A merged date object. 
\end{DoxyReturn}
\hypertarget{classDateObject_a46f98ee14391ce5aff22406b65858949}{
\index{DateObject@{DateObject}!parse@{parse}}
\index{parse@{parse}!DateObject@{DateObject}}
\subsubsection[{parse}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::parse (\$ {\em date}, \/  \$ {\em tz}, \/  \$ {\em format})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDateObject_a46f98ee14391ce5aff22406b65858949}
Converts a date string into a date object.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$date The date string to parse. \item[{\em object}]\$tz A timezone object. \item[{\em string}]\$format The date format string.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
object Returns the date object. 
\end{DoxyReturn}
\hypertarget{classDateObject_a46c9b0df6160a5253f90adbac4e1848f}{
\index{DateObject@{DateObject}!removeGranularity@{removeGranularity}}
\index{removeGranularity@{removeGranularity}!DateObject@{DateObject}}
\subsubsection[{removeGranularity}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::removeGranularity (\$ {\em g})}}
\label{classDateObject_a46c9b0df6160a5253f90adbac4e1848f}
Removes a granularity entry from the array.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$g A single date part. \end{DoxyParams}
\hypertarget{classDateObject_a0a5d9d34e563019feb0079e89ccae619}{
\index{DateObject@{DateObject}!setFuzzyDate@{setFuzzyDate}}
\index{setFuzzyDate@{setFuzzyDate}!DateObject@{DateObject}}
\subsubsection[{setFuzzyDate}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::setFuzzyDate (\$ {\em date}, \/  \$ {\em format} = {\ttfamily NULL}, \/  \$ {\em default} = {\ttfamily 'first'})}}
\label{classDateObject_a0a5d9d34e563019feb0079e89ccae619}
Forces an incomplete date to be valid.

E.g., add a valid year, month, and day if only the time has been defined.


\begin{DoxyParams}{Parameters}
\item[{\em array$|$string}]\$date An array of date parts or a datetime string with values to be massaged into a valid date object. \item[{\em string}]\$format (optional) The format of the date. Defaults to NULL. \item[{\em string}]\$default (optional) If the fallback should use the first value of the date part, or the current value of the date part. Defaults to 'first'. \end{DoxyParams}
\hypertarget{classDateObject_af37aa470a0a1debd8a1b46c0dbaf843f}{
\index{DateObject@{DateObject}!setGranularityFromTime@{setGranularityFromTime}}
\index{setGranularityFromTime@{setGranularityFromTime}!DateObject@{DateObject}}
\subsubsection[{setGranularityFromTime}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::setGranularityFromTime (\$ {\em time}, \/  \$ {\em tz})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDateObject_af37aa470a0a1debd8a1b46c0dbaf843f}
Determines the granularity of a date based on the constructor's arguments.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$time A date string. \item[{\em bool}]\$tz TRUE if the date has a timezone, FALSE otherwise. \end{DoxyParams}
\hypertarget{classDateObject_a2492f42b3e5db5668b9c3cca250767ee}{
\index{DateObject@{DateObject}!setTimezone@{setTimezone}}
\index{setTimezone@{setTimezone}!DateObject@{DateObject}}
\subsubsection[{setTimezone}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::setTimezone (\$ {\em tz}, \/  \$ {\em force} = {\ttfamily FALSE})}}
\label{classDateObject_a2492f42b3e5db5668b9c3cca250767ee}
Sets the time zone for the current date.

Overrides default DateTime function. Only changes output values if actually had time granularity. This should be used as a \char`\"{}converter\char`\"{} for output, to switch tzs.

In order to set a timezone for a datetime that doesn't have such granularity, \hyperlink{classDateObject_a9974bc28e7a0bc4e8fece41fa065bb53}{merge()} it with one that does.


\begin{DoxyParams}{Parameters}
\item[{\em object}]\$tz A timezone object. \item[{\em bool}]\$force Whether or not to skip a date with no time. Defaults to FALSE. \end{DoxyParams}
\hypertarget{classDateObject_a470d11f41df750e2d8ff522c33d98238}{
\index{DateObject@{DateObject}!toArray@{toArray}}
\index{toArray@{toArray}!DateObject@{DateObject}}
\subsubsection[{toArray}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::toArray (\$ {\em force} = {\ttfamily FALSE})}}
\label{classDateObject_a470d11f41df750e2d8ff522c33d98238}
Returns all standard date parts in an array.

Will return '' for parts in which it lacks granularity.


\begin{DoxyParams}{Parameters}
\item[{\em bool}]\$force Whether or not to limit the granularity. Defaults to FALSE.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array An array of formatted date part values, keyed by date parts. 
\end{DoxyReturn}
\hypertarget{classDateObject_ac98a3b4209dd6df8da10e327ff501b2e}{
\index{DateObject@{DateObject}!toISO@{toISO}}
\index{toISO@{toISO}!DateObject@{DateObject}}
\subsubsection[{toISO}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::toISO (\$ {\em arr}, \/  \$ {\em full} = {\ttfamily FALSE})}}
\label{classDateObject_ac98a3b4209dd6df8da10e327ff501b2e}
Creates an ISO date from an array of values.


\begin{DoxyParams}{Parameters}
\item[{\em array}]\$arr An array of date values keyed by date part. \item[{\em bool}]\$full (optional) Whether to force a full date by filling in missing values. Defaults to FALSE. \end{DoxyParams}
\hypertarget{classDateObject_aa4dfd0e15b696446ac26c0a6bc5284c6}{
\index{DateObject@{DateObject}!validGranularity@{validGranularity}}
\index{validGranularity@{validGranularity}!DateObject@{DateObject}}
\subsubsection[{validGranularity}]{\setlength{\rightskip}{0pt plus 5cm}DateObject::validGranularity (\$ {\em granularity} = {\ttfamily NULL}, \/  \$ {\em flexible} = {\ttfamily FALSE})}}
\label{classDateObject_aa4dfd0e15b696446ac26c0a6bc5284c6}
Determines if a a date is valid for a given granularity.


\begin{DoxyParams}{Parameters}
\item[{\em array$|$null}]\$granularity An array of date parts. Defaults to NULL. \item[{\em bool}]\$flexible TRUE if the granuliarty is flexible, FALSE otherwise. Defaults to FALSE.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool Whether a date is valid for a given granularity. 
\end{DoxyReturn}


The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
html/profiles/dosomething/modules/contrib/date/date\_\-api/\hyperlink{date__api_8module}{date\_\-api.module}\end{DoxyCompactItemize}
