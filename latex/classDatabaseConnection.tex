\hypertarget{classDatabaseConnection}{
\section{DatabaseConnection Class Reference}
\label{classDatabaseConnection}\index{DatabaseConnection@{DatabaseConnection}}
}
Inheritance diagram for DatabaseConnection::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classDatabaseConnection}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDatabaseConnection_ae5f21c56713948d849ff40bc97b53cd9}{
{\bfseries \_\-\_\-construct} (\$dsn, \$username, \$password, \$driver\_\-options=array())}
\label{classDatabaseConnection_ae5f21c56713948d849ff40bc97b53cd9}

\item 
\hyperlink{classDatabaseConnection_a20911bdaaabc2cb0d7af1992ddc96ed5}{destroy} ()
\item 
\hyperlink{classDatabaseConnection_afd8209665716f8866a799ddf2e985d1b}{getConnectionOptions} ()
\item 
\hyperlink{classDatabaseConnection_a10dfbe0177bc8c79a8589cc84afe24dd}{prefixTables} (\$sql)
\item 
\hyperlink{classDatabaseConnection_af9ed26d47fbfce2a25c443c0e73295d7}{tablePrefix} (\$table= 'default')
\item 
\hyperlink{classDatabaseConnection_a3eb8c20adaffdd0f567bbe16d5226554}{prepareQuery} (\$query)
\item 
\hyperlink{classDatabaseConnection_ac4f67f4031517e8c1ee6acfa40427159}{setTarget} (\$target=NULL)
\item 
\hyperlink{classDatabaseConnection_a82dfe273b945f88d173100f0f760efd9}{getTarget} ()
\item 
\hyperlink{classDatabaseConnection_a057f1bce0514e0ce1a555bee7e61930b}{setKey} (\$key)
\item 
\hyperlink{classDatabaseConnection_ad7f059f5a02c65d2d805fe0991982e90}{getKey} ()
\item 
\hyperlink{classDatabaseConnection_aaa0bb7258ae1b10cf8e762bd63c15ac2}{setLogger} (\hyperlink{classDatabaseLog}{DatabaseLog} \$logger)
\item 
\hyperlink{classDatabaseConnection_a9d07ce930cfc948c56fb165494c6b076}{getLogger} ()
\item 
\hyperlink{classDatabaseConnection_a5894f307c1cb799702449f30aa4a092b}{makeSequenceName} (\$table, \$field)
\item 
\hyperlink{classDatabaseConnection_a127563f6bb26ade0aa9480a117be0356}{makeComment} (\$comments)
\item 
\hyperlink{classDatabaseConnection_aff564097281c4496e9d10cb1bccbe98d}{query} (\$query, array \$args=array(), \$options=array())
\item 
\hyperlink{classDatabaseConnection_a13497769ca9329dc4a62ad51b66566d4}{getDriverClass} (\$class, array \$files=array(), \$use\_\-autoload=FALSE)
\item 
\hyperlink{classDatabaseConnection_a31f271cf685087c1a45a0cf74bb2b73e}{select} (\$table, \$alias=NULL, array \$options=array())
\item 
\hyperlink{classDatabaseConnection_aa979bc386e0457a0cb989d762da5afde}{insert} (\$table, array \$options=array())
\item 
\hyperlink{classDatabaseConnection_ada81b5e7e2aa5f9741dc88474a917cff}{merge} (\$table, array \$options=array())
\item 
\hyperlink{classDatabaseConnection_a4c2fb58226e7045cc9f8a6b2edac630e}{update} (\$table, array \$options=array())
\item 
\hyperlink{classDatabaseConnection_af8bf777ee824d3c2c5a3e18e5941ece4}{delete} (\$table, array \$options=array())
\item 
\hyperlink{classDatabaseConnection_a24e86882227b5b337daedcf20458e371}{truncate} (\$table, array \$options=array())
\item 
\hyperlink{classDatabaseConnection_a809aee6bbab9d383927be8f307b7ef7b}{schema} ()
\item 
\hyperlink{classDatabaseConnection_a4ea565fbd6c6d1f258594b23a2e10e20}{escapeTable} (\$table)
\item 
\hyperlink{classDatabaseConnection_aae6a7cba6988731b2b84d645ea4de11c}{escapeField} (\$field)
\item 
\hyperlink{classDatabaseConnection_a400fea30d60f9477eb176d9fee36cfe2}{escapeAlias} (\$field)
\item 
\hyperlink{classDatabaseConnection_a048eda663834d6303ce3e3d0fabc7e75}{escapeLike} (\$string)
\item 
\hyperlink{classDatabaseConnection_ac1ff742bc653f3d67d633c3d1b256229}{inTransaction} ()
\item 
\hyperlink{classDatabaseConnection_a6b2631c56f4951032f30a7c519a4837e}{transactionDepth} ()
\item 
\hyperlink{classDatabaseConnection_a210f69060d31ab1559a8b2231e83a318}{startTransaction} (\$name= '')
\item 
\hyperlink{classDatabaseConnection_aef0f8cd6cbfbc304e721baaa14be14cf}{rollback} (\$savepoint\_\-name= 'drupal\_\-transaction')
\item 
\hyperlink{classDatabaseConnection_a3aa9a595dd90a2b64d6b6c187f25828a}{pushTransaction} (\$name)
\item 
\hyperlink{classDatabaseConnection_a0bca5087efb85e6480b953cc76ccfcb1}{popTransaction} (\$name)
\item 
\hyperlink{classDatabaseConnection_a1c97c77517b969270bb92c5c7e022a5d}{queryRange} (\$query, \$from, \$count, array \$args=array(), array \$options=array())
\item 
\hyperlink{classDatabaseConnection_ae4d9ad286187f493172da04fca77ca8f}{queryTemporary} (\$query, array \$args=array(), array \$options=array())
\item 
\hyperlink{classDatabaseConnection_a4a36a8d7352108c837c51a7172f966c3}{driver} ()
\item 
\hyperlink{classDatabaseConnection_a0c3c9a1fa27838cd1ce5d9cc8d8e6a29}{version} ()
\item 
\hyperlink{classDatabaseConnection_a6f5f74fd00cad354a98cea3ddef509a9}{supportsTransactions} ()
\item 
\hyperlink{classDatabaseConnection_a9ae6d1315a680a7250444d2aa9a3d30b}{supportsTransactionalDDL} ()
\item 
\hyperlink{classDatabaseConnection_a7dd7e76bc813c6a90a6d26a5529d67b0}{databaseType} ()
\item 
\hyperlink{classDatabaseConnection_aef82436b30fa08a6c81c34e11f3b1717}{mapConditionOperator} (\$operator)
\item 
\hyperlink{classDatabaseConnection_a7e938dd2dbf5bbef8e2eb06bda3eeb2f}{commit} ()
\item 
\hyperlink{classDatabaseConnection_a173e333ef1b61541cf37125468a37231}{nextId} (\$existing\_\-id=0)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDatabaseConnection_a190539d6c494ef2d7ac90d21226de5a5}{defaultOptions} ()
\item 
\hyperlink{classDatabaseConnection_a8df68d814aa91a31f57990575d8349b6}{setPrefix} (\$prefix)
\item 
\hyperlink{classDatabaseConnection_a68426a046aed8dcc9a70fcd5734f226c}{filterComment} (\$comment= '')
\item 
\hyperlink{classDatabaseConnection_a4ba47f85f7a45b83de78af6acb1c059a}{expandArguments} (\&\$query, \&\$args)
\item 
\hyperlink{classDatabaseConnection_ade8d68cea197dc7703042ab505ed940d}{popCommittableTransactions} ()
\item 
\hyperlink{classDatabaseConnection_a8726459b0a9478a9a80d36237fa3ba30}{generateTemporaryTableName} ()
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDatabaseConnection_a9437bea57a47a6de0eef12b150fa253b}{
{\bfseries \$target} = NULL}
\label{classDatabaseConnection_a9437bea57a47a6de0eef12b150fa253b}

\item 
\hypertarget{classDatabaseConnection_a8e817a1024b6ecf5800dd6ad8b50a66d}{
{\bfseries \$key} = NULL}
\label{classDatabaseConnection_a8e817a1024b6ecf5800dd6ad8b50a66d}

\item 
\hypertarget{classDatabaseConnection_ad386591ee31049001e12539bca4e7fd8}{
{\bfseries \$logger} = NULL}
\label{classDatabaseConnection_ad386591ee31049001e12539bca4e7fd8}

\item 
\hypertarget{classDatabaseConnection_a7d2925e0d79e26cac1f63fdcaead83ff}{
{\bfseries \$transactionLayers} = array()}
\label{classDatabaseConnection_a7d2925e0d79e26cac1f63fdcaead83ff}

\item 
\hypertarget{classDatabaseConnection_a21303107c83b6ac9e820cc03333ae8d5}{
{\bfseries \$driverClasses} = array()}
\label{classDatabaseConnection_a21303107c83b6ac9e820cc03333ae8d5}

\item 
\hypertarget{classDatabaseConnection_a68f32d2857e06a7f07d5710de1c364b3}{
{\bfseries \$statementClass} = '\hyperlink{classDatabaseStatementBase}{DatabaseStatementBase}'}
\label{classDatabaseConnection_a68f32d2857e06a7f07d5710de1c364b3}

\item 
\hypertarget{classDatabaseConnection_a18cbb0b94d08d514c16bc676a5b15e8b}{
{\bfseries \$transactionSupport} = TRUE}
\label{classDatabaseConnection_a18cbb0b94d08d514c16bc676a5b15e8b}

\item 
\hypertarget{classDatabaseConnection_a96f82258fd4a0da57bfa1b030089c5ef}{
{\bfseries \$transactionalDDLSupport} = FALSE}
\label{classDatabaseConnection_a96f82258fd4a0da57bfa1b030089c5ef}

\item 
\hypertarget{classDatabaseConnection_ad8376cd6d63a46cf77e4f62a8780a4fb}{
{\bfseries \$temporaryNameIndex} = 0}
\label{classDatabaseConnection_ad8376cd6d63a46cf77e4f62a8780a4fb}

\item 
\hypertarget{classDatabaseConnection_adbd61bca7e83c54ec580801d1bca8b08}{
{\bfseries \$connectionOptions} = array()}
\label{classDatabaseConnection_adbd61bca7e83c54ec580801d1bca8b08}

\item 
\hypertarget{classDatabaseConnection_ac51730013a465c8bd81db699b0a1bd59}{
{\bfseries \$schema} = NULL}
\label{classDatabaseConnection_ac51730013a465c8bd81db699b0a1bd59}

\item 
\hypertarget{classDatabaseConnection_a1a56735cc64b105ad7c8ee0c6ef4a7e1}{
{\bfseries \$prefixes} = array()}
\label{classDatabaseConnection_a1a56735cc64b105ad7c8ee0c6ef4a7e1}

\item 
\hypertarget{classDatabaseConnection_aa18b2ac131d2556fa20705016158f2e2}{
{\bfseries \$prefixSearch} = array()}
\label{classDatabaseConnection_aa18b2ac131d2556fa20705016158f2e2}

\item 
\hypertarget{classDatabaseConnection_a456ff1dc845f1803e0d6840f3ad50b7e}{
{\bfseries \$prefixReplace} = array()}
\label{classDatabaseConnection_a456ff1dc845f1803e0d6840f3ad50b7e}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Base \hyperlink{classDatabase}{Database} API class.

This class provides a Drupal-\/specific extension of the PDO database abstraction class in PHP. Every database driver implementation must provide a concrete implementation of it to support special handling required by that database.

\begin{DoxySeeAlso}{See also}
\href{http://php.net/manual/en/book.pdo.php}{\tt http://php.net/manual/en/book.pdo.php} 
\end{DoxySeeAlso}


\subsection{Member Function Documentation}
\hypertarget{classDatabaseConnection_a7e938dd2dbf5bbef8e2eb06bda3eeb2f}{
\index{DatabaseConnection@{DatabaseConnection}!commit@{commit}}
\index{commit@{commit}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{commit}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::commit ()}}
\label{classDatabaseConnection_a7e938dd2dbf5bbef8e2eb06bda3eeb2f}
Throws an exception to deny direct access to transaction commits.

We do not want to allow users to commit transactions at any time, only by destroying the transaction object or allowing it to go out of scope. A direct commit bypasses all of the safety checks we've built on top of PDO's transaction routines.


\begin{DoxyExceptions}{Exceptions}
\item[{\em \hyperlink{classDatabaseTransactionExplicitCommitNotAllowedException}{DatabaseTransactionExplicitCommitNotAllowedException}}]\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDatabaseTransaction}{DatabaseTransaction} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_a7dd7e76bc813c6a90a6d26a5529d67b0}{
\index{DatabaseConnection@{DatabaseConnection}!databaseType@{databaseType}}
\index{databaseType@{databaseType}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{databaseType}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::databaseType ()\hspace{0.3cm}{\ttfamily  \mbox{[}abstract\mbox{]}}}}
\label{classDatabaseConnection_a7dd7e76bc813c6a90a6d26a5529d67b0}
Returns the name of the PDO driver for this connection. 

Reimplemented in \hyperlink{classDatabaseConnection__mysql_a983f8932fcaa5f3806c78e28841e7a5b}{DatabaseConnection\_\-mysql}, \hyperlink{classDatabaseConnection__pgsql_ad8e8147530abb85983d9cfdce5d0808c}{DatabaseConnection\_\-pgsql}, and \hyperlink{classDatabaseConnection__sqlite_acafbe944024f6bbdf26c11dab3c6b534}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_a190539d6c494ef2d7ac90d21226de5a5}{
\index{DatabaseConnection@{DatabaseConnection}!defaultOptions@{defaultOptions}}
\index{defaultOptions@{defaultOptions}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{defaultOptions}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::defaultOptions ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDatabaseConnection_a190539d6c494ef2d7ac90d21226de5a5}
Returns the default query options for any given query.

A given query can be customized with a number of option flags in an associative array:
\begin{DoxyItemize}
\item target: The database \char`\"{}target\char`\"{} against which to execute a query. Valid values are \char`\"{}default\char`\"{} or \char`\"{}slave\char`\"{}. The system will first try to open a connection to a database specified with the user-\/supplied key. If one is not available, it will silently fall back to the \char`\"{}default\char`\"{} target. If multiple databases connections are specified with the same target, one will be selected at random for the duration of the request.
\item fetch: This element controls how rows from a result set will be returned. Legal values include PDO::FETCH\_\-ASSOC, PDO::FETCH\_\-BOTH, PDO::FETCH\_\-OBJ, PDO::FETCH\_\-NUM, or a string representing the name of a class. If a string is specified, each record will be fetched into a new object of that class. The behavior of all other values is defined by PDO. See \href{http://php.net/manual/pdostatement.fetch.php}{\tt http://php.net/manual/pdostatement.fetch.php}
\item return: Depending on the type of query, different return values may be meaningful. This directive instructs the system which type of return value is desired. The system will generally set the correct value automatically, so it is extremely rare that a module developer will ever need to specify this value. Setting it incorrectly will likely lead to unpredictable results or fatal errors. Legal values include:
\begin{DoxyItemize}
\item \hyperlink{classDatabase_a7b7c6f8f81159b97752412e439d957dc}{Database::RETURN\_\-STATEMENT}: Return the prepared statement object for the query. This is usually only meaningful for SELECT queries, where the statement object is how one accesses the result set returned by the query.
\item \hyperlink{classDatabase_a557879c7732a573ed395f9196afeb898}{Database::RETURN\_\-AFFECTED}: Return the number of rows affected by an UPDATE or DELETE query. Be aware that means the number of rows actually changed, not the number of rows matched by the WHERE clause.
\item \hyperlink{classDatabase_a56dab08fbf70f81aaf6f55a71922f4ef}{Database::RETURN\_\-INSERT\_\-ID}: Return the sequence ID (primary key) created by an INSERT statement on a table that contains a serial column.
\item \hyperlink{classDatabase_ae00484bf91c4447fc1b391408f7cfbd3}{Database::RETURN\_\-NULL}: Do not return anything, as there is no meaningful value to return. That is the case for INSERT queries on tables that do not contain a serial column.
\end{DoxyItemize}
\item throw\_\-exception: By default, the database system will catch any errors on a query as an \hyperlink{classException}{Exception}, log it, and then rethrow it so that code further up the call chain can take an appropriate action. To suppress that behavior and simply return NULL on failure, set this option to FALSE.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
An array of default query options. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_af8bf777ee824d3c2c5a3e18e5941ece4}{
\index{DatabaseConnection@{DatabaseConnection}!delete@{delete}}
\index{delete@{delete}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{delete}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::delete (\$ {\em table}, \/  array \$ {\em options} = {\ttfamily array()})}}
\label{classDatabaseConnection_af8bf777ee824d3c2c5a3e18e5941ece4}
Prepares and returns a DELETE query object.


\begin{DoxyParams}{Parameters}
\item[{\em \$options}]An array of options on the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classDeleteQuery}{DeleteQuery} A new \hyperlink{classDeleteQuery}{DeleteQuery} object.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDeleteQuery}{DeleteQuery} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_a20911bdaaabc2cb0d7af1992ddc96ed5}{
\index{DatabaseConnection@{DatabaseConnection}!destroy@{destroy}}
\index{destroy@{destroy}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{destroy}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::destroy ()}}
\label{classDatabaseConnection_a20911bdaaabc2cb0d7af1992ddc96ed5}
Destroys this Connection object.

PHP does not destruct an object if it is still referenced in other variables. In case of PDO database connection objects, PHP only closes the connection when the PDO object is destructed, so any references to this object may cause the number of maximum allowed connections to be exceeded. \hypertarget{classDatabaseConnection_a4a36a8d7352108c837c51a7172f966c3}{
\index{DatabaseConnection@{DatabaseConnection}!driver@{driver}}
\index{driver@{driver}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{driver}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::driver ()\hspace{0.3cm}{\ttfamily  \mbox{[}abstract\mbox{]}}}}
\label{classDatabaseConnection_a4a36a8d7352108c837c51a7172f966c3}
Returns the type of database driver.

This is not necessarily the same as the type of the database itself. For instance, there could be two MySQL drivers, mysql and mysql\_\-mock. This function would return different values for each, but both would return \char`\"{}mysql\char`\"{} for \hyperlink{classDatabaseConnection_a7dd7e76bc813c6a90a6d26a5529d67b0}{databaseType()}. 

Reimplemented in \hyperlink{classDatabaseConnection__mysql_a84daa0617157e0c291b081c7c648dc05}{DatabaseConnection\_\-mysql}, \hyperlink{classDatabaseConnection__pgsql_a60af8084115491a30ae1b6ee3552a958}{DatabaseConnection\_\-pgsql}, and \hyperlink{classDatabaseConnection__sqlite_aa941f2ff6edc55833dfa21b282c8c0dc}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_a400fea30d60f9477eb176d9fee36cfe2}{
\index{DatabaseConnection@{DatabaseConnection}!escapeAlias@{escapeAlias}}
\index{escapeAlias@{escapeAlias}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{escapeAlias}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::escapeAlias (\$ {\em field})}}
\label{classDatabaseConnection_a400fea30d60f9477eb176d9fee36cfe2}
Escapes an alias name string.

Force all alias names to be strictly alphanumeric-\/plus-\/underscore. In contrast to \hyperlink{classDatabaseConnection_aae6a7cba6988731b2b84d645ea4de11c}{DatabaseConnection::escapeField()} / \hyperlink{classDatabaseConnection_a4ea565fbd6c6d1f258594b23a2e10e20}{DatabaseConnection::escapeTable()}, this doesn't allow the period (\char`\"{}.\char`\"{}) because that is not allowed in aliases.

\begin{DoxyReturn}{Returns}
The sanitized field name string. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_aae6a7cba6988731b2b84d645ea4de11c}{
\index{DatabaseConnection@{DatabaseConnection}!escapeField@{escapeField}}
\index{escapeField@{escapeField}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{escapeField}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::escapeField (\$ {\em field})}}
\label{classDatabaseConnection_aae6a7cba6988731b2b84d645ea4de11c}
Escapes a field name string.

Force all field names to be strictly alphanumeric-\/plus-\/underscore. For some database drivers, it may also wrap the field name in database-\/specific escape characters.

\begin{DoxyReturn}{Returns}
The sanitized field name string. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a048eda663834d6303ce3e3d0fabc7e75}{
\index{DatabaseConnection@{DatabaseConnection}!escapeLike@{escapeLike}}
\index{escapeLike@{escapeLike}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{escapeLike}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::escapeLike (\$ {\em string})}}
\label{classDatabaseConnection_a048eda663834d6303ce3e3d0fabc7e75}
Escapes characters that work as wildcard characters in a LIKE pattern.

The wildcard characters \char`\"{}\%\char`\"{} and \char`\"{}\_\-\char`\"{} as well as backslash are prefixed with a backslash. Use this to do a search for a verbatim string without any wildcard behavior.

For example, the following does a case-\/insensitive query for all rows whose name starts with \$prefix: 
\begin{DoxyCode}
 $result = db_query(
   'SELECT * FROM person WHERE name LIKE :pattern',
   array(':pattern' => db_like($prefix) . '%')
 );
\end{DoxyCode}


Backslash is defined as escape character for LIKE patterns in \hyperlink{classDatabaseCondition_afb4e820b6d1719bf940526beef27dc7a}{DatabaseCondition::mapConditionOperator()}.


\begin{DoxyParams}{Parameters}
\item[{\em \$string}]The string to escape.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The escaped string. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a4ea565fbd6c6d1f258594b23a2e10e20}{
\index{DatabaseConnection@{DatabaseConnection}!escapeTable@{escapeTable}}
\index{escapeTable@{escapeTable}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{escapeTable}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::escapeTable (\$ {\em table})}}
\label{classDatabaseConnection_a4ea565fbd6c6d1f258594b23a2e10e20}
Escapes a table name string.

Force all table names to be strictly alphanumeric-\/plus-\/underscore. For some database drivers, it may also wrap the table name in database-\/specific escape characters.

\begin{DoxyReturn}{Returns}
The sanitized table name string. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a4ba47f85f7a45b83de78af6acb1c059a}{
\index{DatabaseConnection@{DatabaseConnection}!expandArguments@{expandArguments}}
\index{expandArguments@{expandArguments}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{expandArguments}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::expandArguments (\&\$ {\em query}, \/  \&\$ {\em args})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDatabaseConnection_a4ba47f85f7a45b83de78af6acb1c059a}
Expands out shorthand placeholders.

Drupal supports an alternate syntax for doing arrays of values. We therefore need to expand them out into a full, executable query string.


\begin{DoxyParams}{Parameters}
\item[{\em \$query}]The query string to modify. \item[{\em \$args}]The arguments for the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TRUE if the query was modified, FALSE otherwise. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a68426a046aed8dcc9a70fcd5734f226c}{
\index{DatabaseConnection@{DatabaseConnection}!filterComment@{filterComment}}
\index{filterComment@{filterComment}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{filterComment}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::filterComment (\$ {\em comment} = {\ttfamily ''})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDatabaseConnection_a68426a046aed8dcc9a70fcd5734f226c}
Sanitize a query comment string.

Ensure a query comment does not include strings such as \char`\"{}$\ast$ /\char`\"{} that might terminate the comment early. This avoids SQL injection attacks via the query comment. The comment strings in this example are separated by a space to avoid PHP parse errors.

For example, the comment: 
\begin{DoxyCode}
 db_update('example')
  ->condition('id', $id)
  ->fields(array('field2' => 10))
  ->comment('Exploit * / DROP TABLE node; --')
  ->execute()
\end{DoxyCode}


Would result in the following SQL statement being generated: 
\begin{DoxyCode}
 "/ * Exploit * / DROP TABLE node; -- * / UPDATE example SET field2=..."
\end{DoxyCode}


Unless the comment is sanitised first, the SQL server would drop the node table and ignore the rest of the SQL statement.


\begin{DoxyParams}{Parameters}
\item[{\em \$comment}]A query comment string.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A sanitized version of the query comment string. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a8726459b0a9478a9a80d36237fa3ba30}{
\index{DatabaseConnection@{DatabaseConnection}!generateTemporaryTableName@{generateTemporaryTableName}}
\index{generateTemporaryTableName@{generateTemporaryTableName}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{generateTemporaryTableName}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::generateTemporaryTableName ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDatabaseConnection_a8726459b0a9478a9a80d36237fa3ba30}
Generates a temporary table name.

\begin{DoxyReturn}{Returns}
A table name. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_afd8209665716f8866a799ddf2e985d1b}{
\index{DatabaseConnection@{DatabaseConnection}!getConnectionOptions@{getConnectionOptions}}
\index{getConnectionOptions@{getConnectionOptions}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{getConnectionOptions}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::getConnectionOptions ()}}
\label{classDatabaseConnection_afd8209665716f8866a799ddf2e985d1b}
Returns the connection information for this connection object.

Note that \hyperlink{classDatabase_a4ddbb695ae89b6180e0390c231b70ea5}{Database::getConnectionInfo()} is for requesting information about an arbitrary database connection that is defined. This method is for requesting the connection information of this specific open connection object.

\begin{DoxyReturn}{Returns}
An array of the connection information. The exact list of properties is driver-\/dependent. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a13497769ca9329dc4a62ad51b66566d4}{
\index{DatabaseConnection@{DatabaseConnection}!getDriverClass@{getDriverClass}}
\index{getDriverClass@{getDriverClass}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{getDriverClass}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::getDriverClass (\$ {\em class}, \/  array \$ {\em files} = {\ttfamily array()}, \/  \$ {\em use\_\-autoload} = {\ttfamily FALSE})}}
\label{classDatabaseConnection_a13497769ca9329dc4a62ad51b66566d4}
Gets the driver-\/specific override class if any for the specified class.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$class The class for which we want the potentially driver-\/specific class. \item[{\em array}]\$files The name of the files in which the driver-\/specific class can be. \item[{\em \$use\_\-autoload}]If TRUE, attempt to load classes using PHP's autoload capability as well as the manual approach here. \end{DoxyParams}
\begin{DoxyReturn}{Returns}
string The name of the class that should be used for this driver. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_ad7f059f5a02c65d2d805fe0991982e90}{
\index{DatabaseConnection@{DatabaseConnection}!getKey@{getKey}}
\index{getKey@{getKey}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{getKey}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::getKey ()}}
\label{classDatabaseConnection_ad7f059f5a02c65d2d805fe0991982e90}
Returns the key this connection is associated with.

\begin{DoxyReturn}{Returns}
The key of this connection. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a9d07ce930cfc948c56fb165494c6b076}{
\index{DatabaseConnection@{DatabaseConnection}!getLogger@{getLogger}}
\index{getLogger@{getLogger}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{getLogger}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::getLogger ()}}
\label{classDatabaseConnection_a9d07ce930cfc948c56fb165494c6b076}
Gets the current logging object for this connection.

\begin{DoxyReturn}{Returns}
\hyperlink{classDatabaseLog}{DatabaseLog} The current logging object for this connection. If there isn't one, NULL is returned. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a82dfe273b945f88d173100f0f760efd9}{
\index{DatabaseConnection@{DatabaseConnection}!getTarget@{getTarget}}
\index{getTarget@{getTarget}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{getTarget}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::getTarget ()}}
\label{classDatabaseConnection_a82dfe273b945f88d173100f0f760efd9}
Returns the target this connection is associated with.

\begin{DoxyReturn}{Returns}
The target string of this connection. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_aa979bc386e0457a0cb989d762da5afde}{
\index{DatabaseConnection@{DatabaseConnection}!insert@{insert}}
\index{insert@{insert}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{insert}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::insert (\$ {\em table}, \/  array \$ {\em options} = {\ttfamily array()})}}
\label{classDatabaseConnection_aa979bc386e0457a0cb989d762da5afde}
Prepares and returns an INSERT query object.


\begin{DoxyParams}{Parameters}
\item[{\em \$options}]An array of options on the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classInsertQuery}{InsertQuery} A new \hyperlink{classInsertQuery}{InsertQuery} object.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classInsertQuery}{InsertQuery} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_ac1ff742bc653f3d67d633c3d1b256229}{
\index{DatabaseConnection@{DatabaseConnection}!inTransaction@{inTransaction}}
\index{inTransaction@{inTransaction}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{inTransaction}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::inTransaction ()}}
\label{classDatabaseConnection_ac1ff742bc653f3d67d633c3d1b256229}
Determines if there is an active transaction open.

\begin{DoxyReturn}{Returns}
TRUE if we're currently in a transaction, FALSE otherwise. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a127563f6bb26ade0aa9480a117be0356}{
\index{DatabaseConnection@{DatabaseConnection}!makeComment@{makeComment}}
\index{makeComment@{makeComment}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{makeComment}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::makeComment (\$ {\em comments})}}
\label{classDatabaseConnection_a127563f6bb26ade0aa9480a117be0356}
Flatten an array of query comments into a single comment string.

The comment string will be sanitized to avoid SQL injection attacks.


\begin{DoxyParams}{Parameters}
\item[{\em \$comments}]An array of query comment strings.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A sanitized comment string. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a5894f307c1cb799702449f30aa4a092b}{
\index{DatabaseConnection@{DatabaseConnection}!makeSequenceName@{makeSequenceName}}
\index{makeSequenceName@{makeSequenceName}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{makeSequenceName}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::makeSequenceName (\$ {\em table}, \/  \$ {\em field})}}
\label{classDatabaseConnection_a5894f307c1cb799702449f30aa4a092b}
Creates the appropriate sequence name for a given table and serial field.

This information is exposed to all database drivers, although it is only useful on some of them. This method is table prefix-\/aware.


\begin{DoxyParams}{Parameters}
\item[{\em \$table}]The table name to use for the sequence. \item[{\em \$field}]The field name to use for the sequence.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A table prefix-\/parsed string for the sequence name. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_aef82436b30fa08a6c81c34e11f3b1717}{
\index{DatabaseConnection@{DatabaseConnection}!mapConditionOperator@{mapConditionOperator}}
\index{mapConditionOperator@{mapConditionOperator}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{mapConditionOperator}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::mapConditionOperator (\$ {\em operator})\hspace{0.3cm}{\ttfamily  \mbox{[}abstract\mbox{]}}}}
\label{classDatabaseConnection_aef82436b30fa08a6c81c34e11f3b1717}
Gets any special processing requirements for the condition operator.

Some condition types require special processing, such as IN, because the value data they pass in is not a simple value. This is a simple overridable lookup function. \hyperlink{classDatabase}{Database} connections should define only those operators they wish to be handled differently than the default.


\begin{DoxyParams}{Parameters}
\item[{\em \$operator}]The condition operator, such as \char`\"{}IN\char`\"{}, \char`\"{}BETWEEN\char`\"{}, etc. Case-\/sensitive.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The extra handling directives for the specified operator, or NULL.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDatabaseCondition_a286df1af0dfaa7ab6b8b30ed4e96a830}{DatabaseCondition::compile()} 
\end{DoxySeeAlso}


Reimplemented in \hyperlink{classDatabaseConnection__mysql_a8d36611a923f44b9dd5d1ed05ba84eb3}{DatabaseConnection\_\-mysql}, \hyperlink{classDatabaseConnection__pgsql_a71d8b6a2d7d97b3e194126abe714900f}{DatabaseConnection\_\-pgsql}, and \hyperlink{classDatabaseConnection__sqlite_aed69efc240fdb031430c8afbdb6c3ba9}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_ada81b5e7e2aa5f9741dc88474a917cff}{
\index{DatabaseConnection@{DatabaseConnection}!merge@{merge}}
\index{merge@{merge}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{merge}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::merge (\$ {\em table}, \/  array \$ {\em options} = {\ttfamily array()})}}
\label{classDatabaseConnection_ada81b5e7e2aa5f9741dc88474a917cff}
Prepares and returns a MERGE query object.


\begin{DoxyParams}{Parameters}
\item[{\em \$options}]An array of options on the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classMergeQuery}{MergeQuery} A new \hyperlink{classMergeQuery}{MergeQuery} object.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classMergeQuery}{MergeQuery} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_a173e333ef1b61541cf37125468a37231}{
\index{DatabaseConnection@{DatabaseConnection}!nextId@{nextId}}
\index{nextId@{nextId}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{nextId}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::nextId (\$ {\em existing\_\-id} = {\ttfamily 0})\hspace{0.3cm}{\ttfamily  \mbox{[}abstract\mbox{]}}}}
\label{classDatabaseConnection_a173e333ef1b61541cf37125468a37231}
Retrieves an unique id from a given sequence.

Use this function if for some reason you can't use a serial field. For example, MySQL has no ways of reading of the current value of a sequence and PostgreSQL can not advance the sequence to be larger than a given value. Or sometimes you just need a unique integer.


\begin{DoxyParams}{Parameters}
\item[{\em \$existing\_\-id}]After a database import, it might be that the sequences table is behind, so by passing in the maximum existing id, it can be assured that we never issue the same id.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An integer number larger than any number returned by earlier calls and also larger than the \$existing\_\-id if one was passed in. 
\end{DoxyReturn}


Reimplemented in \hyperlink{classDatabaseConnection__mysql_a89a5362c5a53f7e2a60e75076a4cba11}{DatabaseConnection\_\-mysql}, \hyperlink{classDatabaseConnection__pgsql_a6098b360df35fec77fd8240348eb6659}{DatabaseConnection\_\-pgsql}, and \hyperlink{classDatabaseConnection__sqlite_ada0053b7801625663994ae1e0ddaabdf}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_ade8d68cea197dc7703042ab505ed940d}{
\index{DatabaseConnection@{DatabaseConnection}!popCommittableTransactions@{popCommittableTransactions}}
\index{popCommittableTransactions@{popCommittableTransactions}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{popCommittableTransactions}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::popCommittableTransactions ()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDatabaseConnection_ade8d68cea197dc7703042ab505ed940d}
Internal function: commit all the transaction layers that can commit. 

Reimplemented in \hyperlink{classDatabaseConnection__mysql_ad63915bedc73d668f05295b8572a33c0}{DatabaseConnection\_\-mysql}.\hypertarget{classDatabaseConnection_a0bca5087efb85e6480b953cc76ccfcb1}{
\index{DatabaseConnection@{DatabaseConnection}!popTransaction@{popTransaction}}
\index{popTransaction@{popTransaction}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{popTransaction}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::popTransaction (\$ {\em name})}}
\label{classDatabaseConnection_a0bca5087efb85e6480b953cc76ccfcb1}
Decreases the depth of transaction nesting.

If we pop off the last transaction layer, then we either commit or roll back the transaction as necessary. If no transaction is active, we return because the transaction may have manually been rolled back.


\begin{DoxyParams}{Parameters}
\item[{\em \$name}]The name of the savepoint\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
\item[{\em \hyperlink{classDatabaseTransactionNoActiveException}{DatabaseTransactionNoActiveException}}]\item[{\em \hyperlink{classDatabaseTransactionCommitFailedException}{DatabaseTransactionCommitFailedException}}]\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDatabaseTransaction}{DatabaseTransaction} 
\end{DoxySeeAlso}


Reimplemented in \hyperlink{classDatabaseConnection__sqlite_a92aff36a5e22c5f21258a6a2333121b4}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_a10dfbe0177bc8c79a8589cc84afe24dd}{
\index{DatabaseConnection@{DatabaseConnection}!prefixTables@{prefixTables}}
\index{prefixTables@{prefixTables}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{prefixTables}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::prefixTables (\$ {\em sql})}}
\label{classDatabaseConnection_a10dfbe0177bc8c79a8589cc84afe24dd}
Appends a database prefix to all tables in a query.

Queries sent to Drupal should wrap all table names in curly brackets. This function searches for this syntax and adds Drupal's table prefix to all tables, allowing Drupal to coexist with other systems in the same database and/or schema if necessary.


\begin{DoxyParams}{Parameters}
\item[{\em \$sql}]A string containing a partial or entire SQL query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The properly-\/prefixed string. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a3eb8c20adaffdd0f567bbe16d5226554}{
\index{DatabaseConnection@{DatabaseConnection}!prepareQuery@{prepareQuery}}
\index{prepareQuery@{prepareQuery}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{prepareQuery}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::prepareQuery (\$ {\em query})}}
\label{classDatabaseConnection_a3eb8c20adaffdd0f567bbe16d5226554}
Prepares a query string and returns the prepared statement.

This method caches prepared statements, reusing them when possible. It also prefixes tables names enclosed in curly-\/braces.


\begin{DoxyParams}{Parameters}
\item[{\em \$query}]The query string as SQL, with curly-\/braces surrounding the table names.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{interfaceDatabaseStatementInterface}{DatabaseStatementInterface} A PDO prepared statement ready for its execute() method. 
\end{DoxyReturn}


Reimplemented in \hyperlink{classDatabaseConnection__pgsql_aa777c52e9403cc39e355ede640a5cb4a}{DatabaseConnection\_\-pgsql}, and \hyperlink{classDatabaseConnection__sqlite_aac5845cb92d937ec15f435043d014a8e}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_a3aa9a595dd90a2b64d6b6c187f25828a}{
\index{DatabaseConnection@{DatabaseConnection}!pushTransaction@{pushTransaction}}
\index{pushTransaction@{pushTransaction}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{pushTransaction}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::pushTransaction (\$ {\em name})}}
\label{classDatabaseConnection_a3aa9a595dd90a2b64d6b6c187f25828a}
Increases the depth of transaction nesting.

If no transaction is already active, we begin a new transaction.


\begin{DoxyExceptions}{Exceptions}
\item[{\em \hyperlink{classDatabaseTransactionNameNonUniqueException}{DatabaseTransactionNameNonUniqueException}}]\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDatabaseTransaction}{DatabaseTransaction} 
\end{DoxySeeAlso}


Reimplemented in \hyperlink{classDatabaseConnection__sqlite_a00c6285d1c008b5aa496b046700f15a3}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_aff564097281c4496e9d10cb1bccbe98d}{
\index{DatabaseConnection@{DatabaseConnection}!query@{query}}
\index{query@{query}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{query}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::query (\$ {\em query}, \/  array \$ {\em args} = {\ttfamily array()}, \/  \$ {\em options} = {\ttfamily array()})}}
\label{classDatabaseConnection_aff564097281c4496e9d10cb1bccbe98d}
Executes a query string against the database.

This method provides a central handler for the actual execution of every query. All queries executed by Drupal are executed as PDO prepared statements.


\begin{DoxyParams}{Parameters}
\item[{\em \$query}]The query to execute. In most cases this will be a string containing an SQL query with placeholders. An already-\/prepared instance of \hyperlink{interfaceDatabaseStatementInterface}{DatabaseStatementInterface} may also be passed in order to allow calling code to manually bind variables to a query. If a \hyperlink{interfaceDatabaseStatementInterface}{DatabaseStatementInterface} is passed, the \$args array will be ignored. It is extremely rare that module code will need to pass a statement object to this method. It is used primarily for database drivers for databases that require special LOB field handling. \item[{\em \$args}]An array of arguments for the prepared statement. If the prepared statement uses ? placeholders, this array must be an indexed array. If it contains named placeholders, it must be an associative array. \item[{\em \$options}]An associative array of options to control how the query is run. See the documentation for \hyperlink{classDatabaseConnection_a190539d6c494ef2d7ac90d21226de5a5}{DatabaseConnection::defaultOptions()} for details.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{interfaceDatabaseStatementInterface}{DatabaseStatementInterface} This method will return one of: the executed statement, the number of rows affected by the query (not the number matched), or the generated insert IT of the last query, depending on the value of \$options\mbox{[}'return'\mbox{]}. Typically that value will be set by default or a query builder and should not be set by a user. If there is an error, this method will return NULL and may throw an exception if \$options\mbox{[}'throw\_\-exception'\mbox{]} is TRUE.
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
\item[{\em PDOException}]\end{DoxyExceptions}


Reimplemented in \hyperlink{classDatabaseConnection__pgsql_aa03d55a2837d71b3e832102447bc815f}{DatabaseConnection\_\-pgsql}.\hypertarget{classDatabaseConnection_a1c97c77517b969270bb92c5c7e022a5d}{
\index{DatabaseConnection@{DatabaseConnection}!queryRange@{queryRange}}
\index{queryRange@{queryRange}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{queryRange}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::queryRange (\$ {\em query}, \/  \$ {\em from}, \/  \$ {\em count}, \/  array \$ {\em args} = {\ttfamily array()}, \/  array \$ {\em options} = {\ttfamily array()})\hspace{0.3cm}{\ttfamily  \mbox{[}abstract\mbox{]}}}}
\label{classDatabaseConnection_a1c97c77517b969270bb92c5c7e022a5d}
Runs a limited-\/range query on this database object.

Use this as a substitute for -\/$>$\hyperlink{classDatabaseConnection_aff564097281c4496e9d10cb1bccbe98d}{query()} when a subset of the query is to be returned. User-\/supplied arguments to the query should be passed in as separate parameters so that they can be properly escaped to avoid SQL injection attacks.


\begin{DoxyParams}{Parameters}
\item[{\em \$query}]A string containing an SQL query. \item[{\em \$args}]An array of values to substitute into the query at placeholder markers. \item[{\em \$from}]The first result row to return. \item[{\em \$count}]The maximum number of result rows to return. \item[{\em \$options}]An array of options on the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{interfaceDatabaseStatementInterface}{DatabaseStatementInterface} A database query result resource, or NULL if the query was not executed correctly. 
\end{DoxyReturn}


Reimplemented in \hyperlink{classDatabaseConnection__mysql_a8fa3e83f5a5e85e85d2b06247a8d8a24}{DatabaseConnection\_\-mysql}, \hyperlink{classDatabaseConnection__pgsql_aabdd2246a4122962112ff37ab080eee7}{DatabaseConnection\_\-pgsql}, and \hyperlink{classDatabaseConnection__sqlite_a5c7aa6402ebb35a61c7753fa66ee6bd3}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_ae4d9ad286187f493172da04fca77ca8f}{
\index{DatabaseConnection@{DatabaseConnection}!queryTemporary@{queryTemporary}}
\index{queryTemporary@{queryTemporary}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{queryTemporary}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::queryTemporary (\$ {\em query}, \/  array \$ {\em args} = {\ttfamily array()}, \/  array \$ {\em options} = {\ttfamily array()})\hspace{0.3cm}{\ttfamily  \mbox{[}abstract\mbox{]}}}}
\label{classDatabaseConnection_ae4d9ad286187f493172da04fca77ca8f}
Runs a SELECT query and stores its results in a temporary table.

Use this as a substitute for -\/$>$\hyperlink{classDatabaseConnection_aff564097281c4496e9d10cb1bccbe98d}{query()} when the results need to stored in a temporary table. Temporary tables exist for the duration of the page request. User-\/supplied arguments to the query should be passed in as separate parameters so that they can be properly escaped to avoid SQL injection attacks.

Note that if you need to know how many results were returned, you should do a SELECT COUNT($\ast$) on the temporary table afterwards.


\begin{DoxyParams}{Parameters}
\item[{\em \$query}]A string containing a normal SELECT SQL query. \item[{\em \$args}]An array of values to substitute into the query at placeholder markers. \item[{\em \$options}]An associative array of options to control how the query is run. See the documentation for \hyperlink{classDatabaseConnection_a190539d6c494ef2d7ac90d21226de5a5}{DatabaseConnection::defaultOptions()} for details.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The name of the temporary table. 
\end{DoxyReturn}


Reimplemented in \hyperlink{classDatabaseConnection__mysql_a928309f48ddbeeca25328fec33c4ab9e}{DatabaseConnection\_\-mysql}, \hyperlink{classDatabaseConnection__pgsql_a4256f910e0d93f1fc28ea65aa1f1f145}{DatabaseConnection\_\-pgsql}, and \hyperlink{classDatabaseConnection__sqlite_a547c5fcee9fa8ef98e15f61ab83be6be}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_aef0f8cd6cbfbc304e721baaa14be14cf}{
\index{DatabaseConnection@{DatabaseConnection}!rollback@{rollback}}
\index{rollback@{rollback}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{rollback}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::rollback (\$ {\em savepoint\_\-name} = {\ttfamily 'drupal\_\-transaction'})}}
\label{classDatabaseConnection_aef0f8cd6cbfbc304e721baaa14be14cf}
Rolls back the transaction entirely or to a named savepoint.

This method throws an exception if no transaction is active.


\begin{DoxyParams}{Parameters}
\item[{\em \$savepoint\_\-name}]The name of the savepoint. The default, 'drupal\_\-transaction', will roll the entire transaction back.\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
\item[{\em \hyperlink{classDatabaseTransactionNoActiveException}{DatabaseTransactionNoActiveException}}]\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDatabaseTransaction_a51bdf8ca9423cc331e877dbf43cd6981}{DatabaseTransaction::rollback()} 
\end{DoxySeeAlso}


Reimplemented in \hyperlink{classDatabaseConnection__sqlite_aa0c95a9076d4aa2d08569d344eeb81de}{DatabaseConnection\_\-sqlite}.\hypertarget{classDatabaseConnection_a809aee6bbab9d383927be8f307b7ef7b}{
\index{DatabaseConnection@{DatabaseConnection}!schema@{schema}}
\index{schema@{schema}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{schema}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::schema ()}}
\label{classDatabaseConnection_a809aee6bbab9d383927be8f307b7ef7b}
Returns a \hyperlink{classDatabaseSchema}{DatabaseSchema} object for manipulating the schema.

This method will lazy-\/load the appropriate schema library file.

\begin{DoxyReturn}{Returns}
\hyperlink{classDatabaseSchema}{DatabaseSchema} The \hyperlink{classDatabaseSchema}{DatabaseSchema} object for this connection. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a31f271cf685087c1a45a0cf74bb2b73e}{
\index{DatabaseConnection@{DatabaseConnection}!select@{select}}
\index{select@{select}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{select}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::select (\$ {\em table}, \/  \$ {\em alias} = {\ttfamily NULL}, \/  array \$ {\em options} = {\ttfamily array()})}}
\label{classDatabaseConnection_a31f271cf685087c1a45a0cf74bb2b73e}
Prepares and returns a SELECT query object.


\begin{DoxyParams}{Parameters}
\item[{\em \$table}]The base table for this query, that is, the first table in the FROM clause. This table will also be used as the \char`\"{}base\char`\"{} table for query\_\-alter hook implementations. \item[{\em \$alias}]The alias of the base table of this query. \item[{\em \$options}]An array of options on the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{interfaceSelectQueryInterface}{SelectQueryInterface} An appropriate \hyperlink{classSelectQuery}{SelectQuery} object for this database connection. Note that it may be a driver-\/specific subclass of \hyperlink{classSelectQuery}{SelectQuery}, depending on the driver.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classSelectQuery}{SelectQuery} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_a057f1bce0514e0ce1a555bee7e61930b}{
\index{DatabaseConnection@{DatabaseConnection}!setKey@{setKey}}
\index{setKey@{setKey}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{setKey}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::setKey (\$ {\em key})}}
\label{classDatabaseConnection_a057f1bce0514e0ce1a555bee7e61930b}
Tells this connection object what its key is.


\begin{DoxyParams}{Parameters}
\item[{\em \$target}]The key this connection is for. \end{DoxyParams}
\hypertarget{classDatabaseConnection_aaa0bb7258ae1b10cf8e762bd63c15ac2}{
\index{DatabaseConnection@{DatabaseConnection}!setLogger@{setLogger}}
\index{setLogger@{setLogger}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{setLogger}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::setLogger ({\bf DatabaseLog} \$ {\em logger})}}
\label{classDatabaseConnection_aaa0bb7258ae1b10cf8e762bd63c15ac2}
Associates a logging object with this connection.


\begin{DoxyParams}{Parameters}
\item[{\em \$logger}]The logging object we want to use. \end{DoxyParams}
\hypertarget{classDatabaseConnection_a8df68d814aa91a31f57990575d8349b6}{
\index{DatabaseConnection@{DatabaseConnection}!setPrefix@{setPrefix}}
\index{setPrefix@{setPrefix}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{setPrefix}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::setPrefix (\$ {\em prefix})\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classDatabaseConnection_a8df68d814aa91a31f57990575d8349b6}
Set the list of prefixes used by this database connection.


\begin{DoxyParams}{Parameters}
\item[{\em \$prefix}]The prefixes, in any of the multiple forms documented in \hyperlink{default_8settings_8php}{default.settings.php}. \end{DoxyParams}
\hypertarget{classDatabaseConnection_ac4f67f4031517e8c1ee6acfa40427159}{
\index{DatabaseConnection@{DatabaseConnection}!setTarget@{setTarget}}
\index{setTarget@{setTarget}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{setTarget}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::setTarget (\$ {\em target} = {\ttfamily NULL})}}
\label{classDatabaseConnection_ac4f67f4031517e8c1ee6acfa40427159}
Tells this connection object what its target value is.

This is needed for logging and auditing. It's sloppy to do in the constructor because the constructor for child classes has a different signature. We therefore also ensure that this function is only ever called once.


\begin{DoxyParams}{Parameters}
\item[{\em \$target}]The target this connection is for. Set to NULL (default) to disable logging entirely. \end{DoxyParams}
\hypertarget{classDatabaseConnection_a210f69060d31ab1559a8b2231e83a318}{
\index{DatabaseConnection@{DatabaseConnection}!startTransaction@{startTransaction}}
\index{startTransaction@{startTransaction}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{startTransaction}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::startTransaction (\$ {\em name} = {\ttfamily ''})}}
\label{classDatabaseConnection_a210f69060d31ab1559a8b2231e83a318}
Returns a new \hyperlink{classDatabaseTransaction}{DatabaseTransaction} object on this connection.


\begin{DoxyParams}{Parameters}
\item[{\em \$name}]Optional name of the savepoint.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classDatabaseTransaction}{DatabaseTransaction} A \hyperlink{classDatabaseTransaction}{DatabaseTransaction} object.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDatabaseTransaction}{DatabaseTransaction} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_a9ae6d1315a680a7250444d2aa9a3d30b}{
\index{DatabaseConnection@{DatabaseConnection}!supportsTransactionalDDL@{supportsTransactionalDDL}}
\index{supportsTransactionalDDL@{supportsTransactionalDDL}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{supportsTransactionalDDL}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::supportsTransactionalDDL ()}}
\label{classDatabaseConnection_a9ae6d1315a680a7250444d2aa9a3d30b}
Determines if this driver supports transactional DDL.

DDL queries are those that change the schema, such as ALTER queries.

\begin{DoxyReturn}{Returns}
TRUE if this connection supports transactions for DDL queries, FALSE otherwise. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_a6f5f74fd00cad354a98cea3ddef509a9}{
\index{DatabaseConnection@{DatabaseConnection}!supportsTransactions@{supportsTransactions}}
\index{supportsTransactions@{supportsTransactions}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{supportsTransactions}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::supportsTransactions ()}}
\label{classDatabaseConnection_a6f5f74fd00cad354a98cea3ddef509a9}
Determines if this driver supports transactions.

\begin{DoxyReturn}{Returns}
TRUE if this connection supports transactions, FALSE otherwise. 
\end{DoxyReturn}
\hypertarget{classDatabaseConnection_af9ed26d47fbfce2a25c443c0e73295d7}{
\index{DatabaseConnection@{DatabaseConnection}!tablePrefix@{tablePrefix}}
\index{tablePrefix@{tablePrefix}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{tablePrefix}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::tablePrefix (\$ {\em table} = {\ttfamily 'default'})}}
\label{classDatabaseConnection_af9ed26d47fbfce2a25c443c0e73295d7}
Find the prefix for a table.

This function is for when you want to know the prefix of a table. This is not used in prefixTables due to performance reasons. \hypertarget{classDatabaseConnection_a6b2631c56f4951032f30a7c519a4837e}{
\index{DatabaseConnection@{DatabaseConnection}!transactionDepth@{transactionDepth}}
\index{transactionDepth@{transactionDepth}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{transactionDepth}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::transactionDepth ()}}
\label{classDatabaseConnection_a6b2631c56f4951032f30a7c519a4837e}
Determines current transaction depth. \hypertarget{classDatabaseConnection_a24e86882227b5b337daedcf20458e371}{
\index{DatabaseConnection@{DatabaseConnection}!truncate@{truncate}}
\index{truncate@{truncate}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{truncate}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::truncate (\$ {\em table}, \/  array \$ {\em options} = {\ttfamily array()})}}
\label{classDatabaseConnection_a24e86882227b5b337daedcf20458e371}
Prepares and returns a TRUNCATE query object.


\begin{DoxyParams}{Parameters}
\item[{\em \$options}]An array of options on the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classTruncateQuery}{TruncateQuery} A new \hyperlink{classTruncateQuery}{TruncateQuery} object.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classTruncateQuery}{TruncateQuery} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_a4c2fb58226e7045cc9f8a6b2edac630e}{
\index{DatabaseConnection@{DatabaseConnection}!update@{update}}
\index{update@{update}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{update}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::update (\$ {\em table}, \/  array \$ {\em options} = {\ttfamily array()})}}
\label{classDatabaseConnection_a4c2fb58226e7045cc9f8a6b2edac630e}
Prepares and returns an UPDATE query object.


\begin{DoxyParams}{Parameters}
\item[{\em \$options}]An array of options on the query.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classUpdateQuery}{UpdateQuery} A new \hyperlink{classUpdateQuery}{UpdateQuery} object.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{classUpdateQuery}{UpdateQuery} 
\end{DoxySeeAlso}
\hypertarget{classDatabaseConnection_a0c3c9a1fa27838cd1ce5d9cc8d8e6a29}{
\index{DatabaseConnection@{DatabaseConnection}!version@{version}}
\index{version@{version}!DatabaseConnection@{DatabaseConnection}}
\subsubsection[{version}]{\setlength{\rightskip}{0pt plus 5cm}DatabaseConnection::version ()}}
\label{classDatabaseConnection_a0c3c9a1fa27838cd1ce5d9cc8d8e6a29}
Returns the version of the database server. 

The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
html/includes/database/\hyperlink{database_8inc}{database.inc}\end{DoxyCompactItemize}
