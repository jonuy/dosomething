\hypertarget{date__api__elements_8inc}{
\section{html/profiles/dosomething/modules/contrib/date/date\_\-api/date\_\-api\_\-elements.inc File Reference}
\label{date__api__elements_8inc}\index{html/profiles/dosomething/modules/contrib/date/date\_\-api/date\_\-api\_\-elements.inc@{html/profiles/dosomething/modules/contrib/date/date\_\-api/date\_\-api\_\-elements.inc}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{date__api__elements_8inc_aeffcad67abcab341ed4617c76a59df43}{\_\-date\_\-api\_\-element\_\-info} ()
\item 
\hyperlink{date__api__elements_8inc_af1a4c11c288aec82c194eb7393932ee3}{date\_\-default\_\-date} (\$element)
\item 
\hyperlink{date__api__elements_8inc_a543c5f0338ae1931c7a626a896f6f2c0}{date\_\-year\_\-range\_\-element\_\-process} (\$element, \&\$form\_\-state, \$form)
\item 
\hyperlink{date__api__elements_8inc_a5d5c87e2c1dd81edff2eabdfb11224b7}{date\_\-year\_\-range\_\-element\_\-value\_\-callback} (\$element, \$input=FALSE, \&\$form\_\-state=array())
\item 
\hyperlink{date__api__elements_8inc_a2c68320d30ee6a4f5c33c623f667c305}{date\_\-year\_\-range\_\-validate} (\&\$element, \&\$form\_\-state)
\item 
\hyperlink{date__api__elements_8inc_a551fafa7951b2fb425465e4a668ef078}{date\_\-timezone\_\-element\_\-value\_\-callback} (\$element, \$input=FALSE, \&\$form\_\-state=array())
\item 
\hyperlink{date__api__elements_8inc_ac45026ff7ec5ee2113dbbeec0a079aa5}{date\_\-timezone\_\-element\_\-process} (\$element, \&\$form\_\-state, \$form)
\item 
\hyperlink{date__api__elements_8inc_a407096cd20b66a684641e1617178619c}{date\_\-timezone\_\-validate} (\$element, \&\$form\_\-state)
\item 
\hyperlink{date__api__elements_8inc_ad77d04d89a7179dba8c76133d5484709}{date\_\-text\_\-element\_\-value\_\-callback} (\$element, \$input=FALSE, \&\$form\_\-state=array())
\item 
\hyperlink{date__api__elements_8inc_ac1b734f1dbb476fe75e096be3dac5d6d}{date\_\-text\_\-element\_\-process} (\$element, \&\$form\_\-state, \$form)
\item 
\hyperlink{date__api__elements_8inc_aa6120a96cd6d04db4fe8e2ff15d39e68}{date\_\-text\_\-validate} (\$element, \&\$form\_\-state)
\item 
\hyperlink{date__api__elements_8inc_a7df91d2e64f95f23bffcb26de33d2ea8}{date\_\-text\_\-input\_\-date} (\$element, \$input)
\item 
\hyperlink{date__api__elements_8inc_a80a2f5d6b7eda94636af25ce4125142f}{date\_\-select\_\-element\_\-value\_\-callback} (\$element, \$input=FALSE, \&\$form\_\-state=array())
\item 
\hyperlink{date__api__elements_8inc_adabdb1eea05a7d11cb2108a18f01aeed}{date\_\-select\_\-element\_\-process} (\$element, \&\$form\_\-state, \$form)
\item 
\hyperlink{date__api__elements_8inc_a9d8d4e7d43727fc350dd30c42fc5fc10}{date\_\-parts\_\-element} (\$element, \$date, \$format)
\item 
\hyperlink{date__api__elements_8inc_ab2b275d606ded86988e421c9e17d4f6d}{date\_\-select\_\-validate} (\$element, \&\$form\_\-state)
\item 
\hyperlink{date__api__elements_8inc_a80414f7f53d30346edcbe82f8ad5b69c}{date\_\-select\_\-input\_\-date} (\$element, \$input)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Date API elements themes and validation. This file is only included during the edit process to reduce memory usage. 

\subsection{Function Documentation}
\hypertarget{date__api__elements_8inc_aeffcad67abcab341ed4617c76a59df43}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!\_\-date\_\-api\_\-element\_\-info@{\_\-date\_\-api\_\-element\_\-info}}
\index{\_\-date\_\-api\_\-element\_\-info@{\_\-date\_\-api\_\-element\_\-info}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{\_\-date\_\-api\_\-element\_\-info}]{\setlength{\rightskip}{0pt plus 5cm}\_\-date\_\-api\_\-element\_\-info ()}}
\label{date__api__elements_8inc_aeffcad67abcab341ed4617c76a59df43}
Implements hook\_\-element\_\-info().

Parameters for date form elements, designed to have sane defaults so any or all can be omitted.

Fill the element default\_\-value with a date in datetime format, (YYYY-\/MM-\/DD HH:MM:SS), adjusted to the proper local timezone.

NOTE -\/ Converting a date stored in the database from UTC to the local zone and converting it back to UTC before storing it is not handled by this element and must be done in pre-\/form and post-\/form processing!!

The date\_\-select element will create a collection of form elements, with a separate select or textfield for each date part. The whole collection will get reformatted back to a date value of the requested type during validation.

The date\_\-text element will create a textfield that can contain a whole date or any part of a date as text. The user input value will be re-\/formatted back into a date value of the requested type during validation.

The date\_\-timezone element will create a drop-\/down selector to pick a timezone name.

The date\_\-year\_\-range element will create two textfields (for users with JavaScript enabled they will appear as drop-\/down selectors with an option for custom text entry) to pick a range of years that will be passed to form submit handlers as a single string (e.g., -\/3:+3).

date\_\-timezone The local timezone to be used to create this date.

date\_\-format A format string that describes the format and order of date parts to display in the edit form for this element. This makes it possible to show date parts in a custom order, or to leave some of them out. Be sure to add 'A' or 'a' to get an am/pm selector. Defaults to the short site default format.

date\_\-label\_\-position Handling option for date part labels, like 'Year', 'Month', and 'Day', can be 'above' the date part, 'within' it, or 'none', default is 'above' . The 'within' option shows the label as the first option in a select list or the default value for an empty textfield, taking up less screen space.

date\_\-increment Increment minutes and seconds by this amount, default is 1.

date\_\-year\_\-range The number of years to go back and forward in a year selector, default is -\/3:+3 (3 back and 3 forward).

date\_\-text\_\-parts Array of date parts that should use textfields instead of selects i.e. array('year') will format the year as a textfield and other date parts as drop-\/down selects. \hypertarget{date__api__elements_8inc_af1a4c11c288aec82c194eb7393932ee3}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-default\_\-date@{date\_\-default\_\-date}}
\index{date\_\-default\_\-date@{date\_\-default\_\-date}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-default\_\-date}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-default\_\-date (\$ {\em element})}}
\label{date__api__elements_8inc_af1a4c11c288aec82c194eb7393932ee3}
Create a date object from a datetime string value. \hypertarget{date__api__elements_8inc_a9d8d4e7d43727fc350dd30c42fc5fc10}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-parts\_\-element@{date\_\-parts\_\-element}}
\index{date\_\-parts\_\-element@{date\_\-parts\_\-element}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-parts\_\-element}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-parts\_\-element (\$ {\em element}, \/  \$ {\em date}, \/  \$ {\em format})}}
\label{date__api__elements_8inc_a9d8d4e7d43727fc350dd30c42fc5fc10}
Creates form elements for one or more date parts.

Get the order of date elements from the provided format. If the format order omits any date parts in the granularity, alter the granularity array to match the format, then flip the \$order array to get the position for each element. Then iterate through the elements and create a sub-\/form for each part.


\begin{DoxyParams}{Parameters}
\item[{\em array}]\$element The date element. \item[{\em object}]\$date The date object. \item[{\em string}]\$format A date format string.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array The form array for the submitted date parts. 
\end{DoxyReturn}
\hypertarget{date__api__elements_8inc_adabdb1eea05a7d11cb2108a18f01aeed}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-select\_\-element\_\-process@{date\_\-select\_\-element\_\-process}}
\index{date\_\-select\_\-element\_\-process@{date\_\-select\_\-element\_\-process}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-select\_\-element\_\-process}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-select\_\-element\_\-process (\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \$ {\em form})}}
\label{date__api__elements_8inc_adabdb1eea05a7d11cb2108a18f01aeed}
Flexible date/time drop-\/down selector.

Splits date into a collection of date and time sub-\/elements, one for each date part. Each sub-\/element can be either a textfield or a select, based on the value of \mbox{[}'date\_\-settings'\mbox{]}\mbox{[}'text\_\-fields'\mbox{]}.

The exact parts displayed in the field are those in \hyperlink{date_8module_a524c8837d65b4e1b512a7ea3ae33d016}{date\_\-granularity}. The display of each part comes from \mbox{[}'date\_\-settings'\mbox{]}\mbox{[}'format'\mbox{]}. \hypertarget{date__api__elements_8inc_a80a2f5d6b7eda94636af25ce4125142f}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-select\_\-element\_\-value\_\-callback@{date\_\-select\_\-element\_\-value\_\-callback}}
\index{date\_\-select\_\-element\_\-value\_\-callback@{date\_\-select\_\-element\_\-value\_\-callback}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-select\_\-element\_\-value\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-select\_\-element\_\-value\_\-callback (\$ {\em element}, \/  \$ {\em input} = {\ttfamily FALSE}, \/  \&\$ {\em form\_\-state} = {\ttfamily array()})}}
\label{date__api__elements_8inc_a80a2f5d6b7eda94636af25ce4125142f}
Element value callback for date\_\-select element. \hypertarget{date__api__elements_8inc_a80414f7f53d30346edcbe82f8ad5b69c}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-select\_\-input\_\-date@{date\_\-select\_\-input\_\-date}}
\index{date\_\-select\_\-input\_\-date@{date\_\-select\_\-input\_\-date}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-select\_\-input\_\-date}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-select\_\-input\_\-date (\$ {\em element}, \/  \$ {\em input})}}
\label{date__api__elements_8inc_a80414f7f53d30346edcbe82f8ad5b69c}
Helper function for creating a date object out of user input. \hypertarget{date__api__elements_8inc_ab2b275d606ded86988e421c9e17d4f6d}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-select\_\-validate@{date\_\-select\_\-validate}}
\index{date\_\-select\_\-validate@{date\_\-select\_\-validate}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-select\_\-validate}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-select\_\-validate (\$ {\em element}, \/  \&\$ {\em form\_\-state})}}
\label{date__api__elements_8inc_ab2b275d606ded86988e421c9e17d4f6d}
Validation function for date selector.

When used as a Views widget, the validation step always gets triggered, even with no form submission. Before form submission \$element\mbox{[}'value'\mbox{]} contains a string, after submission it contains an array. \hypertarget{date__api__elements_8inc_ac1b734f1dbb476fe75e096be3dac5d6d}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-text\_\-element\_\-process@{date\_\-text\_\-element\_\-process}}
\index{date\_\-text\_\-element\_\-process@{date\_\-text\_\-element\_\-process}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-text\_\-element\_\-process}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-text\_\-element\_\-process (\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \$ {\em form})}}
\label{date__api__elements_8inc_ac1b734f1dbb476fe75e096be3dac5d6d}
Text date input form.

Display all or part of a date in a single textfield.

The exact parts displayed in the field are those in \hyperlink{date_8module_a524c8837d65b4e1b512a7ea3ae33d016}{date\_\-granularity}. The display of each part comes from date\_\-format. \hypertarget{date__api__elements_8inc_ad77d04d89a7179dba8c76133d5484709}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-text\_\-element\_\-value\_\-callback@{date\_\-text\_\-element\_\-value\_\-callback}}
\index{date\_\-text\_\-element\_\-value\_\-callback@{date\_\-text\_\-element\_\-value\_\-callback}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-text\_\-element\_\-value\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-text\_\-element\_\-value\_\-callback (\$ {\em element}, \/  \$ {\em input} = {\ttfamily FALSE}, \/  \&\$ {\em form\_\-state} = {\ttfamily array()})}}
\label{date__api__elements_8inc_ad77d04d89a7179dba8c76133d5484709}
Element value callback for date\_\-text element. \hypertarget{date__api__elements_8inc_a7df91d2e64f95f23bffcb26de33d2ea8}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-text\_\-input\_\-date@{date\_\-text\_\-input\_\-date}}
\index{date\_\-text\_\-input\_\-date@{date\_\-text\_\-input\_\-date}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-text\_\-input\_\-date}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-text\_\-input\_\-date (\$ {\em element}, \/  \$ {\em input})}}
\label{date__api__elements_8inc_a7df91d2e64f95f23bffcb26de33d2ea8}
Helper function for creating a date object out of user input. \hypertarget{date__api__elements_8inc_aa6120a96cd6d04db4fe8e2ff15d39e68}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-text\_\-validate@{date\_\-text\_\-validate}}
\index{date\_\-text\_\-validate@{date\_\-text\_\-validate}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-text\_\-validate}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-text\_\-validate (\$ {\em element}, \/  \&\$ {\em form\_\-state})}}
\label{date__api__elements_8inc_aa6120a96cd6d04db4fe8e2ff15d39e68}
Validation for text input.

When used as a Views widget, the validation step always gets triggered, even with no form submission. Before form submission \$element\mbox{[}'value'\mbox{]} contains a string, after submission it contains an array. \hypertarget{date__api__elements_8inc_ac45026ff7ec5ee2113dbbeec0a079aa5}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-timezone\_\-element\_\-process@{date\_\-timezone\_\-element\_\-process}}
\index{date\_\-timezone\_\-element\_\-process@{date\_\-timezone\_\-element\_\-process}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-timezone\_\-element\_\-process}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-timezone\_\-element\_\-process (\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \$ {\em form})}}
\label{date__api__elements_8inc_ac45026ff7ec5ee2113dbbeec0a079aa5}
Creates a timezone form element.


\begin{DoxyParams}{Parameters}
\item[{\em array}]\$element The timezone form element.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array the timezone form element 
\end{DoxyReturn}
\hypertarget{date__api__elements_8inc_a551fafa7951b2fb425465e4a668ef078}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-timezone\_\-element\_\-value\_\-callback@{date\_\-timezone\_\-element\_\-value\_\-callback}}
\index{date\_\-timezone\_\-element\_\-value\_\-callback@{date\_\-timezone\_\-element\_\-value\_\-callback}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-timezone\_\-element\_\-value\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-timezone\_\-element\_\-value\_\-callback (\$ {\em element}, \/  \$ {\em input} = {\ttfamily FALSE}, \/  \&\$ {\em form\_\-state} = {\ttfamily array()})}}
\label{date__api__elements_8inc_a551fafa7951b2fb425465e4a668ef078}
Element value callback for date\_\-timezone element. \hypertarget{date__api__elements_8inc_a407096cd20b66a684641e1617178619c}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-timezone\_\-validate@{date\_\-timezone\_\-validate}}
\index{date\_\-timezone\_\-validate@{date\_\-timezone\_\-validate}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-timezone\_\-validate}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-timezone\_\-validate (\$ {\em element}, \/  \&\$ {\em form\_\-state})}}
\label{date__api__elements_8inc_a407096cd20b66a684641e1617178619c}
Validation for timezone input

Move the timezone value from the nested field back to the original field. \hypertarget{date__api__elements_8inc_a543c5f0338ae1931c7a626a896f6f2c0}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-year\_\-range\_\-element\_\-process@{date\_\-year\_\-range\_\-element\_\-process}}
\index{date\_\-year\_\-range\_\-element\_\-process@{date\_\-year\_\-range\_\-element\_\-process}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-year\_\-range\_\-element\_\-process}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-year\_\-range\_\-element\_\-process (\$ {\em element}, \/  \&\$ {\em form\_\-state}, \/  \$ {\em form})}}
\label{date__api__elements_8inc_a543c5f0338ae1931c7a626a896f6f2c0}
Process callback which creates a date\_\-year\_\-range form element. \hypertarget{date__api__elements_8inc_a5d5c87e2c1dd81edff2eabdfb11224b7}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-year\_\-range\_\-element\_\-value\_\-callback@{date\_\-year\_\-range\_\-element\_\-value\_\-callback}}
\index{date\_\-year\_\-range\_\-element\_\-value\_\-callback@{date\_\-year\_\-range\_\-element\_\-value\_\-callback}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-year\_\-range\_\-element\_\-value\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-year\_\-range\_\-element\_\-value\_\-callback (\$ {\em element}, \/  \$ {\em input} = {\ttfamily FALSE}, \/  \&\$ {\em form\_\-state} = {\ttfamily array()})}}
\label{date__api__elements_8inc_a5d5c87e2c1dd81edff2eabdfb11224b7}
Element value callback for the date\_\-year\_\-range form element. \hypertarget{date__api__elements_8inc_a2c68320d30ee6a4f5c33c623f667c305}{
\index{date\_\-api\_\-elements.inc@{date\_\-api\_\-elements.inc}!date\_\-year\_\-range\_\-validate@{date\_\-year\_\-range\_\-validate}}
\index{date\_\-year\_\-range\_\-validate@{date\_\-year\_\-range\_\-validate}!date_api_elements.inc@{date\_\-api\_\-elements.inc}}
\subsubsection[{date\_\-year\_\-range\_\-validate}]{\setlength{\rightskip}{0pt plus 5cm}date\_\-year\_\-range\_\-validate (\&\$ {\em element}, \/  \&\$ {\em form\_\-state})}}
\label{date__api__elements_8inc_a2c68320d30ee6a4f5c33c623f667c305}
Element validation function for the date\_\-year\_\-range form element. 