\hypertarget{group__http__handling}{
\section{HTTP handling}
\label{group__http__handling}\index{HTTP handling@{HTTP handling}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__http__handling_ga2e632373cf469e513c0b6b7095f0e4dd}{drupal\_\-get\_\-query\_\-parameters} (array \$query=NULL, array \$exclude=array('q'), \$parent= '')
\item 
\hyperlink{group__http__handling_ga0ef58c019ee4bf4e1166e876f9721c12}{drupal\_\-get\_\-query\_\-array} (\$query)
\item 
\hyperlink{group__http__handling_ga0c95c16e75ac4df882686daccc1f8ac5}{drupal\_\-get\_\-destination} ()
\item 
\hyperlink{group__http__handling_gab333a51385bd4e339c464943553a6670}{drupal\_\-encode\_\-path} (\$path)
\item 
\hyperlink{group__http__handling_ga5b68d7a934713d1d623b2b32a732235d}{drupal\_\-goto} (\$path= '', array \$options=array(), \$http\_\-response\_\-code=302)
\item 
\hyperlink{group__http__handling_gafc3a1915f45be2ac8666778eef0e9758}{drupal\_\-site\_\-offline} ()
\item 
\hyperlink{group__http__handling_ga52b08cd98e1756326c1bd5b56c39a884}{drupal\_\-not\_\-found} ()
\item 
\hyperlink{group__http__handling_ga0bbff371f9373002e71f2e1347fcf481}{drupal\_\-access\_\-denied} ()
\item 
\hyperlink{group__http__handling_gaad3affacd718b960300dcdddefa518aa}{drupal\_\-http\_\-request} (\$url, array \$options=array())
\item 
\hyperlink{group__http__handling_gadfd5b8902a9838e814df472cdd930106}{\_\-drupal\_\-http\_\-use\_\-proxy} (\$host)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions to properly handle HTTP responses. 

\subsection{Function Documentation}
\hypertarget{group__http__handling_gadfd5b8902a9838e814df472cdd930106}{
\index{http\_\-handling@{http\_\-handling}!\_\-drupal\_\-http\_\-use\_\-proxy@{\_\-drupal\_\-http\_\-use\_\-proxy}}
\index{\_\-drupal\_\-http\_\-use\_\-proxy@{\_\-drupal\_\-http\_\-use\_\-proxy}!http_handling@{http\_\-handling}}
\subsubsection[{\_\-drupal\_\-http\_\-use\_\-proxy}]{\setlength{\rightskip}{0pt plus 5cm}\_\-drupal\_\-http\_\-use\_\-proxy (\$ {\em host})}}
\label{group__http__handling_gadfd5b8902a9838e814df472cdd930106}
Helper function for determining hosts excluded from needing a proxy.

\begin{DoxyReturn}{Returns}
TRUE if a proxy should be used for this host. 
\end{DoxyReturn}
\hypertarget{group__http__handling_ga0bbff371f9373002e71f2e1347fcf481}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-access\_\-denied@{drupal\_\-access\_\-denied}}
\index{drupal\_\-access\_\-denied@{drupal\_\-access\_\-denied}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-access\_\-denied}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-access\_\-denied ()}}
\label{group__http__handling_ga0bbff371f9373002e71f2e1347fcf481}
Delivers an \char`\"{}access denied\char`\"{} error to the browser.

Page callback functions wanting to report an \char`\"{}access denied\char`\"{} message should return MENU\_\-ACCESS\_\-DENIED instead of calling \hyperlink{group__http__handling_ga0bbff371f9373002e71f2e1347fcf481}{drupal\_\-access\_\-denied()}. However, functions that are invoked in contexts where that return value might not bubble up to \hyperlink{group__menu_gae33bae24fcac6126aa272d1c437f947c}{menu\_\-execute\_\-active\_\-handler()} should call \hyperlink{group__http__handling_ga0bbff371f9373002e71f2e1347fcf481}{drupal\_\-access\_\-denied()}. \hypertarget{group__http__handling_gab333a51385bd4e339c464943553a6670}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-encode\_\-path@{drupal\_\-encode\_\-path}}
\index{drupal\_\-encode\_\-path@{drupal\_\-encode\_\-path}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-encode\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-encode\_\-path (\$ {\em path})}}
\label{group__http__handling_gab333a51385bd4e339c464943553a6670}
Encodes a Drupal path for use in a URL.

For aesthetic reasons slashes are not escaped.

Note that \hyperlink{common_8inc_a43b2a0594431556db49df980801d8807}{url()} takes care of calling this function, so a path passed to that function should not be encoded in advance.


\begin{DoxyParams}{Parameters}
\item[{\em \$path}]The Drupal path to encode. \end{DoxyParams}
\hypertarget{group__http__handling_ga0c95c16e75ac4df882686daccc1f8ac5}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-get\_\-destination@{drupal\_\-get\_\-destination}}
\index{drupal\_\-get\_\-destination@{drupal\_\-get\_\-destination}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-get\_\-destination}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-get\_\-destination ()}}
\label{group__http__handling_ga0c95c16e75ac4df882686daccc1f8ac5}
Prepares a 'destination' URL query parameter for use with \hyperlink{group__http__handling_ga5b68d7a934713d1d623b2b32a732235d}{drupal\_\-goto()}.

Used to direct the user back to the referring page after completing a form. By default the current URL is returned. If a destination exists in the previous request, that destination is returned. As such, a destination can persist across multiple pages.

\begin{DoxyReturn}{Returns}
An associative array containing the key:
\begin{DoxyItemize}
\item destination: The path provided via the destination query string or, if not available, the current path.
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{path_8inc_a97aaa03027cbf6f0ffdd9a4bf5c9a31c}{current\_\-path()} 

\hyperlink{group__http__handling_ga5b68d7a934713d1d623b2b32a732235d}{drupal\_\-goto()} 
\end{DoxySeeAlso}
\hypertarget{group__http__handling_ga0ef58c019ee4bf4e1166e876f9721c12}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-get\_\-query\_\-array@{drupal\_\-get\_\-query\_\-array}}
\index{drupal\_\-get\_\-query\_\-array@{drupal\_\-get\_\-query\_\-array}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-get\_\-query\_\-array}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-get\_\-query\_\-array (\$ {\em query})}}
\label{group__http__handling_ga0ef58c019ee4bf4e1166e876f9721c12}
Splits a URL-\/encoded query string into an array.


\begin{DoxyParams}{Parameters}
\item[{\em \$query}]The query string to split.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array of URL decoded couples \$param\_\-name =$>$ \$value. 
\end{DoxyReturn}
\hypertarget{group__http__handling_ga2e632373cf469e513c0b6b7095f0e4dd}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-get\_\-query\_\-parameters@{drupal\_\-get\_\-query\_\-parameters}}
\index{drupal\_\-get\_\-query\_\-parameters@{drupal\_\-get\_\-query\_\-parameters}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-get\_\-query\_\-parameters}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-get\_\-query\_\-parameters (array \$ {\em query} = {\ttfamily NULL}, \/  array \$ {\em exclude} = {\ttfamily array('q')}, \/  \$ {\em parent} = {\ttfamily ''})}}
\label{group__http__handling_ga2e632373cf469e513c0b6b7095f0e4dd}
Processes a URL query parameter array to remove unwanted elements.


\begin{DoxyParams}{Parameters}
\item[{\em \$query}](optional) An array to be processed. Defaults to \$\_\-GET. \item[{\em \$exclude}](optional) A list of \$query array keys to remove. Use \char`\"{}parent\mbox{[}child\mbox{]}\char`\"{} to exclude nested items. Defaults to array('q'). \item[{\em \$parent}]Internal use only. Used to build the \$query array key for nested items.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array containing query parameters, which can be used for \hyperlink{common_8inc_a43b2a0594431556db49df980801d8807}{url()}. 
\end{DoxyReturn}
\hypertarget{group__http__handling_ga5b68d7a934713d1d623b2b32a732235d}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-goto@{drupal\_\-goto}}
\index{drupal\_\-goto@{drupal\_\-goto}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-goto}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-goto (\$ {\em path} = {\ttfamily ''}, \/  array \$ {\em options} = {\ttfamily array()}, \/  \$ {\em http\_\-response\_\-code} = {\ttfamily 302})}}
\label{group__http__handling_ga5b68d7a934713d1d623b2b32a732235d}
Sends the user to a different page.

This issues an on-\/site HTTP redirect. The function makes sure the redirected URL is formatted correctly.

Usually the redirected URL is constructed from this function's input parameters. However you may override that behavior by setting a destination in either the \$\_\-REQUEST-\/array (i.e. by using the query string of an URI) This is used to direct the user back to the proper page after completing a form. For example, after editing a post on the 'admin/content'-\/page or after having logged on using the 'user login'-\/block in a sidebar. The function \hyperlink{group__http__handling_ga0c95c16e75ac4df882686daccc1f8ac5}{drupal\_\-get\_\-destination()} can be used to help set the destination URL.

Drupal will ensure that messages set by \hyperlink{bootstrap_8inc_ad9223d86c7b08b1288274ce211d9bfa6}{drupal\_\-set\_\-message()} and other session data are written to the database before the user is redirected.

This function ends the request; use it instead of a return in your menu callback.


\begin{DoxyParams}{Parameters}
\item[{\em \$path}](optional) A Drupal path or a full URL, which will be passed to \hyperlink{common_8inc_a43b2a0594431556db49df980801d8807}{url()} to compute the redirect for the URL. \item[{\em \$options}](optional) An associative array of additional URL options to pass to \hyperlink{common_8inc_a43b2a0594431556db49df980801d8807}{url()}. \item[{\em \$http\_\-response\_\-code}](optional) The HTTP status code to use for the redirection, defaults to 302. The valid values for 3xx redirection status codes are defined in \hyperlink{}{RFC 2616 } and the \hyperlink{}{draft for the new HTTP status codes: }
\begin{DoxyItemize}
\item 301: Moved Permanently (the recommended value for most redirects).
\item 302: Found (default in Drupal and PHP, sometimes used for spamming search engines).
\item 303: See Other.
\item 304: Not Modified.
\item 305: Use Proxy.
\item 307: Temporary Redirect.
\end{DoxyItemize}\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__http__handling_ga0c95c16e75ac4df882686daccc1f8ac5}{drupal\_\-get\_\-destination()} 

\hyperlink{common_8inc_a43b2a0594431556db49df980801d8807}{url()} 
\end{DoxySeeAlso}
\hypertarget{group__http__handling_gaad3affacd718b960300dcdddefa518aa}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-http\_\-request@{drupal\_\-http\_\-request}}
\index{drupal\_\-http\_\-request@{drupal\_\-http\_\-request}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-http\_\-request}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-http\_\-request (\$ {\em url}, \/  array \$ {\em options} = {\ttfamily array()})}}
\label{group__http__handling_gaad3affacd718b960300dcdddefa518aa}
Performs an HTTP request.

This is a flexible and powerful HTTP client implementation. Correctly handles GET, POST, PUT or any other HTTP requests. Handles redirects.


\begin{DoxyParams}{Parameters}
\item[{\em \$url}]A string containing a fully qualified URI. \item[{\em array}]\$options (optional) An array that can have one or more of the following elements:
\begin{DoxyItemize}
\item headers: An array containing request headers to send as name/value pairs.
\item method: A string containing the request method. Defaults to 'GET'.
\item data: A string containing the request body, formatted as 'param=value\&param=value\&...'. Defaults to NULL.
\item max\_\-redirects: An integer representing how many times a redirect may be followed. Defaults to 3.
\item timeout: A float representing the maximum number of seconds the function call may take. The default is 30 seconds. If a timeout occurs, the error code is set to the HTTP\_\-REQUEST\_\-TIMEOUT constant.
\item context: A context resource created with stream\_\-context\_\-create().
\end{DoxyItemize}\end{DoxyParams}
\begin{DoxyReturn}{Returns}
object An object that can have one or more of the following components:
\begin{DoxyItemize}
\item request: A string containing the request body that was sent.
\item code: An integer containing the response status code, or the error code if an error occurred.
\item protocol: The response protocol (e.g. HTTP/1.1 or HTTP/1.0).
\item status\_\-message: The status message from the response, if a response was received.
\item redirect\_\-code: If redirected, an integer containing the initial response status code.
\item redirect\_\-url: If redirected, a string containing the URL of the redirect target.
\item error: If an error occurred, the error message. Otherwise not set.
\item headers: An array containing the response headers as name/value pairs. HTTP header names are case-\/insensitive (RFC 2616, section 4.2), so for easy access the array keys are returned in lower case.
\item data: A string containing the response body that was received. 
\end{DoxyItemize}
\end{DoxyReturn}
\hypertarget{group__http__handling_ga52b08cd98e1756326c1bd5b56c39a884}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-not\_\-found@{drupal\_\-not\_\-found}}
\index{drupal\_\-not\_\-found@{drupal\_\-not\_\-found}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-not\_\-found}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-not\_\-found ()}}
\label{group__http__handling_ga52b08cd98e1756326c1bd5b56c39a884}
Delivers a \char`\"{}page not found\char`\"{} error to the browser.

Page callback functions wanting to report a \char`\"{}page not found\char`\"{} message should return MENU\_\-NOT\_\-FOUND instead of calling \hyperlink{group__http__handling_ga52b08cd98e1756326c1bd5b56c39a884}{drupal\_\-not\_\-found()}. However, functions that are invoked in contexts where that return value might not bubble up to \hyperlink{group__menu_gae33bae24fcac6126aa272d1c437f947c}{menu\_\-execute\_\-active\_\-handler()} should call \hyperlink{group__http__handling_ga52b08cd98e1756326c1bd5b56c39a884}{drupal\_\-not\_\-found()}. \hypertarget{group__http__handling_gafc3a1915f45be2ac8666778eef0e9758}{
\index{http\_\-handling@{http\_\-handling}!drupal\_\-site\_\-offline@{drupal\_\-site\_\-offline}}
\index{drupal\_\-site\_\-offline@{drupal\_\-site\_\-offline}!http_handling@{http\_\-handling}}
\subsubsection[{drupal\_\-site\_\-offline}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-site\_\-offline ()}}
\label{group__http__handling_gafc3a1915f45be2ac8666778eef0e9758}
Delivers a \char`\"{}site is under maintenance\char`\"{} message to the browser.

Page callback functions wanting to report a \char`\"{}site offline\char`\"{} message should return MENU\_\-SITE\_\-OFFLINE instead of calling \hyperlink{group__http__handling_gafc3a1915f45be2ac8666778eef0e9758}{drupal\_\-site\_\-offline()}. However, functions that are invoked in contexts where that return value might not bubble up to \hyperlink{group__menu_gae33bae24fcac6126aa272d1c437f947c}{menu\_\-execute\_\-active\_\-handler()} should call \hyperlink{group__http__handling_gafc3a1915f45be2ac8666778eef0e9758}{drupal\_\-site\_\-offline()}. 