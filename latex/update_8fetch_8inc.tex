\hypertarget{update_8fetch_8inc}{
\section{html/modules/update/update.fetch.inc File Reference}
\label{update_8fetch_8inc}\index{html/modules/update/update.fetch.inc@{html/modules/update/update.fetch.inc}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{update_8fetch_8inc_acb92114e3c9f719e50f66ac62ff78e01}{update\_\-manual\_\-status} ()
\item 
\hyperlink{update_8fetch_8inc_a7975896014a8fc9b4e14306a875b97f2}{update\_\-fetch\_\-data\_\-batch} (\&\$context)
\item 
\hyperlink{update_8fetch_8inc_ac901625f220862b797fb5c5cc4dcb654}{update\_\-fetch\_\-data\_\-finished} (\$success, \$results)
\item 
\hyperlink{update_8fetch_8inc_a3a3122bc6fdfe23091d8db56e4430aeb}{\_\-update\_\-fetch\_\-data} ()
\item 
\hyperlink{update_8fetch_8inc_a49b627a7dcb3c714f088bc0e7ef40e85}{\_\-update\_\-process\_\-fetch\_\-task} (\$project)
\item 
\hyperlink{update_8fetch_8inc_aa9814236d331f2e6822435215e9acd8e}{\_\-update\_\-refresh} ()
\item 
\hyperlink{update_8fetch_8inc_a8b22762aaa27e7a0927f4f3ad09ad5e1}{\_\-update\_\-create\_\-fetch\_\-task} (\$project)
\item 
\hyperlink{update_8fetch_8inc_a6d937d41a6ccf645109deefae0f6e5d3}{\_\-update\_\-build\_\-fetch\_\-url} (\$project, \$site\_\-key= '')
\item 
\hyperlink{update_8fetch_8inc_a53552af8849428ac6faba273936eb00a}{\_\-update\_\-get\_\-fetch\_\-url\_\-base} (\$project)
\item 
\hyperlink{update_8fetch_8inc_a55d78e25faf69f49cfc88f2642c06f4e}{\_\-update\_\-cron\_\-notify} ()
\item 
\hyperlink{update_8fetch_8inc_a3d8f5a924c1de0728c829d3c92d60d19}{update\_\-parse\_\-xml} (\$raw\_\-xml)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Code required only when fetching information about available updates. 

\subsection{Function Documentation}
\hypertarget{update_8fetch_8inc_a6d937d41a6ccf645109deefae0f6e5d3}{
\index{update.fetch.inc@{update.fetch.inc}!\_\-update\_\-build\_\-fetch\_\-url@{\_\-update\_\-build\_\-fetch\_\-url}}
\index{\_\-update\_\-build\_\-fetch\_\-url@{\_\-update\_\-build\_\-fetch\_\-url}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{\_\-update\_\-build\_\-fetch\_\-url}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-build\_\-fetch\_\-url (\$ {\em project}, \/  \$ {\em site\_\-key} = {\ttfamily ''})}}
\label{update_8fetch_8inc_a6d937d41a6ccf645109deefae0f6e5d3}
Generates the URL to fetch information about project updates.

This figures out the right URL to use, based on the project's .info file and the global defaults. Appends optional query arguments when the site is configured to report usage stats.


\begin{DoxyParams}{Parameters}
\item[{\em \$project}]The array of project information from \hyperlink{update_8compare_8inc_a7e1ea49d91f2d2b81b8101d481d10300}{update\_\-get\_\-projects()}. \item[{\em \$site\_\-key}](optional) The anonymous site key hash. Defaults to an empty string.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The URL for fetching information about updates to the specified project.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{update_8module_a88528fa85108af5a0b26ab5b1d6fa8c2}{update\_\-fetch\_\-data()} 

\hyperlink{update_8fetch_8inc_a49b627a7dcb3c714f088bc0e7ef40e85}{\_\-update\_\-process\_\-fetch\_\-task()} 

\hyperlink{update_8compare_8inc_a7e1ea49d91f2d2b81b8101d481d10300}{update\_\-get\_\-projects()} 
\end{DoxySeeAlso}
\hypertarget{update_8fetch_8inc_a8b22762aaa27e7a0927f4f3ad09ad5e1}{
\index{update.fetch.inc@{update.fetch.inc}!\_\-update\_\-create\_\-fetch\_\-task@{\_\-update\_\-create\_\-fetch\_\-task}}
\index{\_\-update\_\-create\_\-fetch\_\-task@{\_\-update\_\-create\_\-fetch\_\-task}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{\_\-update\_\-create\_\-fetch\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-create\_\-fetch\_\-task (\$ {\em project})}}
\label{update_8fetch_8inc_a8b22762aaa27e7a0927f4f3ad09ad5e1}
Adds a task to the queue for fetching release history data for a project.

We only create a new fetch task if there's no task already in the queue for this particular project (based on 'fetch\_\-task::' entries in the \{cache\_\-update\} table).


\begin{DoxyParams}{Parameters}
\item[{\em \$project}]Associative array of information about a project as created by \hyperlink{update_8compare_8inc_a7e1ea49d91f2d2b81b8101d481d10300}{update\_\-get\_\-projects()}, including keys such as 'name' (short name), and the 'info' array with data from a .info file for the project.\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{update_8compare_8inc_a7e1ea49d91f2d2b81b8101d481d10300}{update\_\-get\_\-projects()} 

\hyperlink{update_8module_a683663ab0739a0d67fe3eb98f532c11c}{update\_\-get\_\-available()} 

\hyperlink{update_8module_a601f9ec9c404ec41711b00884e7d0573}{update\_\-refresh()} 

\hyperlink{update_8module_a88528fa85108af5a0b26ab5b1d6fa8c2}{update\_\-fetch\_\-data()} 

\hyperlink{update_8fetch_8inc_a49b627a7dcb3c714f088bc0e7ef40e85}{\_\-update\_\-process\_\-fetch\_\-task()} 
\end{DoxySeeAlso}
\hypertarget{update_8fetch_8inc_a55d78e25faf69f49cfc88f2642c06f4e}{
\index{update.fetch.inc@{update.fetch.inc}!\_\-update\_\-cron\_\-notify@{\_\-update\_\-cron\_\-notify}}
\index{\_\-update\_\-cron\_\-notify@{\_\-update\_\-cron\_\-notify}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{\_\-update\_\-cron\_\-notify}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-cron\_\-notify ()}}
\label{update_8fetch_8inc_a55d78e25faf69f49cfc88f2642c06f4e}
Performs any notifications that should be done once cron fetches new data.

This method checks the status of the site using the new data and, depending on the configuration of the site, notifies administrators via e-\/mail if there are new releases or missing security updates.

\begin{DoxySeeAlso}{See also}
update\_\-requirements() 
\end{DoxySeeAlso}
\hypertarget{update_8fetch_8inc_a3a3122bc6fdfe23091d8db56e4430aeb}{
\index{update.fetch.inc@{update.fetch.inc}!\_\-update\_\-fetch\_\-data@{\_\-update\_\-fetch\_\-data}}
\index{\_\-update\_\-fetch\_\-data@{\_\-update\_\-fetch\_\-data}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{\_\-update\_\-fetch\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-fetch\_\-data ()}}
\label{update_8fetch_8inc_a3a3122bc6fdfe23091d8db56e4430aeb}
Attempts to drain the queue of tasks for release history data to fetch. \hypertarget{update_8fetch_8inc_a53552af8849428ac6faba273936eb00a}{
\index{update.fetch.inc@{update.fetch.inc}!\_\-update\_\-get\_\-fetch\_\-url\_\-base@{\_\-update\_\-get\_\-fetch\_\-url\_\-base}}
\index{\_\-update\_\-get\_\-fetch\_\-url\_\-base@{\_\-update\_\-get\_\-fetch\_\-url\_\-base}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{\_\-update\_\-get\_\-fetch\_\-url\_\-base}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-get\_\-fetch\_\-url\_\-base (\$ {\em project})}}
\label{update_8fetch_8inc_a53552af8849428ac6faba273936eb00a}
Returns the base of the URL to fetch available update data for a project.


\begin{DoxyParams}{Parameters}
\item[{\em \$project}]The array of project information from \hyperlink{update_8compare_8inc_a7e1ea49d91f2d2b81b8101d481d10300}{update\_\-get\_\-projects()}.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The base of the URL used for fetching available update data. This does not include the path elements to specify a particular project, version, site\_\-key, etc.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{update_8fetch_8inc_a6d937d41a6ccf645109deefae0f6e5d3}{\_\-update\_\-build\_\-fetch\_\-url()} 
\end{DoxySeeAlso}
\hypertarget{update_8fetch_8inc_a49b627a7dcb3c714f088bc0e7ef40e85}{
\index{update.fetch.inc@{update.fetch.inc}!\_\-update\_\-process\_\-fetch\_\-task@{\_\-update\_\-process\_\-fetch\_\-task}}
\index{\_\-update\_\-process\_\-fetch\_\-task@{\_\-update\_\-process\_\-fetch\_\-task}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{\_\-update\_\-process\_\-fetch\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-process\_\-fetch\_\-task (\$ {\em project})}}
\label{update_8fetch_8inc_a49b627a7dcb3c714f088bc0e7ef40e85}
Processes a task to fetch available update data for a single project.

Once the release history XML data is downloaded, it is parsed and saved into the \{cache\_\-update\} table in an entry just for that project.


\begin{DoxyParams}{Parameters}
\item[{\em \$project}]Associative array of information about the project to fetch data for.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TRUE if we fetched parsable XML, otherwise FALSE. 
\end{DoxyReturn}
\hypertarget{update_8fetch_8inc_aa9814236d331f2e6822435215e9acd8e}{
\index{update.fetch.inc@{update.fetch.inc}!\_\-update\_\-refresh@{\_\-update\_\-refresh}}
\index{\_\-update\_\-refresh@{\_\-update\_\-refresh}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{\_\-update\_\-refresh}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-refresh ()}}
\label{update_8fetch_8inc_aa9814236d331f2e6822435215e9acd8e}
Clears out all the cached available update data and initiates re-\/fetching. \hypertarget{update_8fetch_8inc_a7975896014a8fc9b4e14306a875b97f2}{
\index{update.fetch.inc@{update.fetch.inc}!update\_\-fetch\_\-data\_\-batch@{update\_\-fetch\_\-data\_\-batch}}
\index{update\_\-fetch\_\-data\_\-batch@{update\_\-fetch\_\-data\_\-batch}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{update\_\-fetch\_\-data\_\-batch}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-fetch\_\-data\_\-batch (\&\$ {\em context})}}
\label{update_8fetch_8inc_a7975896014a8fc9b4e14306a875b97f2}
Batch callback: Processes a step in batch for fetching available update data.


\begin{DoxyParams}{Parameters}
\item[{\em \$context}]Reference to an array used for Batch API storage. \end{DoxyParams}
\hypertarget{update_8fetch_8inc_ac901625f220862b797fb5c5cc4dcb654}{
\index{update.fetch.inc@{update.fetch.inc}!update\_\-fetch\_\-data\_\-finished@{update\_\-fetch\_\-data\_\-finished}}
\index{update\_\-fetch\_\-data\_\-finished@{update\_\-fetch\_\-data\_\-finished}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{update\_\-fetch\_\-data\_\-finished}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-fetch\_\-data\_\-finished (\$ {\em success}, \/  \$ {\em results})}}
\label{update_8fetch_8inc_ac901625f220862b797fb5c5cc4dcb654}
Batch callback: Performs actions when all fetch tasks have been completed.


\begin{DoxyParams}{Parameters}
\item[{\em \$success}]TRUE if the batch operation was successful; FALSE if there were errors. \item[{\em \$results}]An associative array of results from the batch operation, including the key 'updated' which holds the total number of projects we fetched available update data for. \end{DoxyParams}
\hypertarget{update_8fetch_8inc_acb92114e3c9f719e50f66ac62ff78e01}{
\index{update.fetch.inc@{update.fetch.inc}!update\_\-manual\_\-status@{update\_\-manual\_\-status}}
\index{update\_\-manual\_\-status@{update\_\-manual\_\-status}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{update\_\-manual\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-manual\_\-status ()}}
\label{update_8fetch_8inc_acb92114e3c9f719e50f66ac62ff78e01}
Page callback: Checks for updates and displays the update status report.

Manually checks the update status without the use of cron.

\begin{DoxySeeAlso}{See also}
\hyperlink{update_8module_abfea1a759334c0461fa9ff2250bdfaaf}{update\_\-menu()} 
\end{DoxySeeAlso}
\hypertarget{update_8fetch_8inc_a3d8f5a924c1de0728c829d3c92d60d19}{
\index{update.fetch.inc@{update.fetch.inc}!update\_\-parse\_\-xml@{update\_\-parse\_\-xml}}
\index{update\_\-parse\_\-xml@{update\_\-parse\_\-xml}!update.fetch.inc@{update.fetch.inc}}
\subsubsection[{update\_\-parse\_\-xml}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-parse\_\-xml (\$ {\em raw\_\-xml})}}
\label{update_8fetch_8inc_a3d8f5a924c1de0728c829d3c92d60d19}
Parses the XML of the Drupal release history info files.


\begin{DoxyParams}{Parameters}
\item[{\em \$raw\_\-xml}]A raw XML string of available release data for a given project.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Array of parsed data about releases for a given project, or NULL if there was an error parsing the string. 
\end{DoxyReturn}
