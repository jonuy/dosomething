\hypertarget{unicode_8inc}{
\section{html/includes/unicode.inc File Reference}
\label{unicode_8inc}\index{html/includes/unicode.inc@{html/includes/unicode.inc}}
}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{unicode_8inc_a990de8cbc02e69c8cfe1ac1ec91a8fdc}{UNICODE\_\-ERROR} 
\item 
enum \hyperlink{unicode_8inc_a334f042af88c14fbc70643acda9c77f3}{UNICODE\_\-SINGLEBYTE} 
\item 
enum \hyperlink{unicode_8inc_aad231dfcc1dabe13a4d256cf799949e8}{UNICODE\_\-MULTIBYTE} 
\item 
enum \hyperlink{unicode_8inc_ab7e2c4336deae5e6d3798a4f96c38395}{PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY} 
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{unicode_8inc_a20a41302a4e02b802bd51c57935cef3a}{unicode\_\-check} ()
\item 
\hyperlink{unicode_8inc_a8dd710941673e87ac38417d396622cba}{\_\-unicode\_\-check} ()
\item 
\hyperlink{unicode_8inc_a4323fb60679302048119c2a43f780d3c}{unicode\_\-requirements} ()
\item 
\hyperlink{group__php__wrappers_gab0e9cf694d0d48e586c117be348f1e24}{drupal\_\-xml\_\-parser\_\-create} (\&\$data)
\item 
\hyperlink{unicode_8inc_a1e6d4fad793d53424ed9c4244953337e}{drupal\_\-convert\_\-to\_\-utf8} (\$data, \$encoding)
\item 
\hyperlink{unicode_8inc_a5642d9adcf8fc48af1894523b9c52e96}{drupal\_\-truncate\_\-bytes} (\$string, \$len)
\item 
\hyperlink{unicode_8inc_aadfc295e976cb61cb8e4f1f1cf0c781e}{truncate\_\-utf8} (\$string, \$max\_\-length, \$wordsafe=FALSE, \$add\_\-ellipsis=FALSE, \$min\_\-wordsafe\_\-length=1)
\item 
\hyperlink{unicode_8inc_a079be0dce19618c9dfe392741e6af083}{mime\_\-header\_\-encode} (\$string)
\item 
\hyperlink{unicode_8inc_ab925f3117ef3c0d5736c4c38d0346aa3}{mime\_\-header\_\-decode} (\$header)
\item 
\hyperlink{unicode_8inc_a332130b9aa6b66fab3bc19e43a0eacae}{\_\-mime\_\-header\_\-decode} (\$matches)
\item 
\hyperlink{unicode_8inc_ac16f5ce77c68cec0acc3d0e193e5229c}{decode\_\-entities} (\$text)
\item 
\hyperlink{group__php__wrappers_gae8a4670a2f9b1c67d02259a49ee3ec7e}{drupal\_\-strlen} (\$text)
\item 
\hyperlink{group__php__wrappers_ga14c13d4684fa3dbed977bdcbf8f3a5d5}{drupal\_\-strtoupper} (\$text)
\item 
\hyperlink{group__php__wrappers_gad97b9d0b7d26db7c62671e9ddce98f8f}{drupal\_\-strtolower} (\$text)
\item 
\hyperlink{unicode_8inc_a3c12a2422e0b0719d038fe9b5092413c}{\_\-unicode\_\-caseflip} (\$matches)
\item 
\hyperlink{group__php__wrappers_ga15c15887a3e78bd69a50439373823517}{drupal\_\-ucfirst} (\$text)
\item 
\hyperlink{group__php__wrappers_gabe05f7e9107211f3ad82b564b1d7d598}{drupal\_\-substr} (\$text, \$start, \$length=NULL)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provides Unicode-\/related conversions and operations. 

\subsection{Enumeration Type Documentation}
\hypertarget{unicode_8inc_ab7e2c4336deae5e6d3798a4f96c38395}{
\index{unicode.inc@{unicode.inc}!PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY@{PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY}}
\index{PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY@{PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY}!unicode.inc@{unicode.inc}}
\subsubsection[{PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY}}}
\label{unicode_8inc_ab7e2c4336deae5e6d3798a4f96c38395}
Matches Unicode characters that are word boundaries.

Characters with the following General\_\-category (gc) property values are used as word boundaries. While this does not fully conform to the Word Boundaries algorithm described in \href{http://unicode.org/reports/tr29,}{\tt http://unicode.org/reports/tr29,} as PCRE does not contain the Word\_\-Break property table, this simpler algorithm has to do.
\begin{DoxyItemize}
\item Cc, Cf, Cn, Co, Cs: Other.
\item Pc, Pd, Pe, Pf, Pi, Po, Ps: Punctuation.
\item Sc, Sk, Sm, So: Symbols.
\item Zl, Zp, Zs: Separators.
\end{DoxyItemize}

Non-\/boundary characters include the following General\_\-category (gc) property values:
\begin{DoxyItemize}
\item Ll, Lm, Lo, Lt, Lu: Letters.
\item Mc, Me, Mn: Combining Marks.
\item Nd, Nl, No: Numbers.
\end{DoxyItemize}

Note that the PCRE property matcher is not used because we wanted to be compatible with Unicode 5.2.0 regardless of the PCRE version used (and any bugs in PCRE property tables).

\begin{DoxySeeAlso}{See also}
\href{http://unicode.org/glossary}{\tt http://unicode.org/glossary} 
\end{DoxySeeAlso}
\hypertarget{unicode_8inc_a990de8cbc02e69c8cfe1ac1ec91a8fdc}{
\index{unicode.inc@{unicode.inc}!UNICODE\_\-ERROR@{UNICODE\_\-ERROR}}
\index{UNICODE\_\-ERROR@{UNICODE\_\-ERROR}!unicode.inc@{unicode.inc}}
\subsubsection[{UNICODE\_\-ERROR}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UNICODE\_\-ERROR}}}
\label{unicode_8inc_a990de8cbc02e69c8cfe1ac1ec91a8fdc}
Indicates an error during check for PHP unicode support. \hypertarget{unicode_8inc_aad231dfcc1dabe13a4d256cf799949e8}{
\index{unicode.inc@{unicode.inc}!UNICODE\_\-MULTIBYTE@{UNICODE\_\-MULTIBYTE}}
\index{UNICODE\_\-MULTIBYTE@{UNICODE\_\-MULTIBYTE}!unicode.inc@{unicode.inc}}
\subsubsection[{UNICODE\_\-MULTIBYTE}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UNICODE\_\-MULTIBYTE}}}
\label{unicode_8inc_aad231dfcc1dabe13a4d256cf799949e8}
Indicates that full unicode support with the PHP mbstring extension is being used. \hypertarget{unicode_8inc_a334f042af88c14fbc70643acda9c77f3}{
\index{unicode.inc@{unicode.inc}!UNICODE\_\-SINGLEBYTE@{UNICODE\_\-SINGLEBYTE}}
\index{UNICODE\_\-SINGLEBYTE@{UNICODE\_\-SINGLEBYTE}!unicode.inc@{unicode.inc}}
\subsubsection[{UNICODE\_\-SINGLEBYTE}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UNICODE\_\-SINGLEBYTE}}}
\label{unicode_8inc_a334f042af88c14fbc70643acda9c77f3}
Indicates that standard PHP (emulated) unicode support is being used. 

\subsection{Function Documentation}
\hypertarget{unicode_8inc_a332130b9aa6b66fab3bc19e43a0eacae}{
\index{unicode.inc@{unicode.inc}!\_\-mime\_\-header\_\-decode@{\_\-mime\_\-header\_\-decode}}
\index{\_\-mime\_\-header\_\-decode@{\_\-mime\_\-header\_\-decode}!unicode.inc@{unicode.inc}}
\subsubsection[{\_\-mime\_\-header\_\-decode}]{\setlength{\rightskip}{0pt plus 5cm}\_\-mime\_\-header\_\-decode (\$ {\em matches})}}
\label{unicode_8inc_a332130b9aa6b66fab3bc19e43a0eacae}
Decodes encoded header data passed from \hyperlink{unicode_8inc_ab925f3117ef3c0d5736c4c38d0346aa3}{mime\_\-header\_\-decode()}.

Callback for preg\_\-replace\_\-callback() within \hyperlink{unicode_8inc_ab925f3117ef3c0d5736c4c38d0346aa3}{mime\_\-header\_\-decode()}.


\begin{DoxyParams}{Parameters}
\item[{\em \$matches}]The array of matches from preg\_\-replace\_\-callback().\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string The mime-\/decoded string.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{unicode_8inc_ab925f3117ef3c0d5736c4c38d0346aa3}{mime\_\-header\_\-decode()} 
\end{DoxySeeAlso}
\hypertarget{unicode_8inc_a3c12a2422e0b0719d038fe9b5092413c}{
\index{unicode.inc@{unicode.inc}!\_\-unicode\_\-caseflip@{\_\-unicode\_\-caseflip}}
\index{\_\-unicode\_\-caseflip@{\_\-unicode\_\-caseflip}!unicode.inc@{unicode.inc}}
\subsubsection[{\_\-unicode\_\-caseflip}]{\setlength{\rightskip}{0pt plus 5cm}\_\-unicode\_\-caseflip (\$ {\em matches})}}
\label{unicode_8inc_a3c12a2422e0b0719d038fe9b5092413c}
Flips U+C0-\/U+DE to U+E0-\/U+FD and back.


\begin{DoxyParams}{Parameters}
\item[{\em \$matches}]An array of matches.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array The Latin-\/1 version of the array of matches.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__php__wrappers_gad97b9d0b7d26db7c62671e9ddce98f8f}{drupal\_\-strtolower()} 
\end{DoxySeeAlso}
\hypertarget{unicode_8inc_a8dd710941673e87ac38417d396622cba}{
\index{unicode.inc@{unicode.inc}!\_\-unicode\_\-check@{\_\-unicode\_\-check}}
\index{\_\-unicode\_\-check@{\_\-unicode\_\-check}!unicode.inc@{unicode.inc}}
\subsubsection[{\_\-unicode\_\-check}]{\setlength{\rightskip}{0pt plus 5cm}\_\-unicode\_\-check ()}}
\label{unicode_8inc_a8dd710941673e87ac38417d396622cba}
Perform checks about Unicode support in PHP, and set the right settings if needed.

Because Drupal needs to be able to handle text in various encodings, we do not support mbstring function overloading. HTTP input/output conversion must be disabled for similar reasons.


\begin{DoxyParams}{Parameters}
\item[{\em \$errors}]Whether to report any fatal errors with \hyperlink{group__form__api_ga6f4ecbec42e905390e521b393417f97f}{form\_\-set\_\-error()}. \end{DoxyParams}
\hypertarget{unicode_8inc_ac16f5ce77c68cec0acc3d0e193e5229c}{
\index{unicode.inc@{unicode.inc}!decode\_\-entities@{decode\_\-entities}}
\index{decode\_\-entities@{decode\_\-entities}!unicode.inc@{unicode.inc}}
\subsubsection[{decode\_\-entities}]{\setlength{\rightskip}{0pt plus 5cm}decode\_\-entities (\$ {\em text})}}
\label{unicode_8inc_ac16f5ce77c68cec0acc3d0e193e5229c}
Decodes all HTML entities (including numerical ones) to regular UTF-\/8 bytes.

Double-\/escaped entities will only be decoded once (\char`\"{}\&amp;lt;\char`\"{} becomes \char`\"{}\&lt;\char`\"{} , not \char`\"{}$<$\char`\"{}). Be careful when using this function, as decode\_\-entities can revert previous sanitization efforts ($<$script$>$ will become $<$script$>$).


\begin{DoxyParams}{Parameters}
\item[{\em \$text}]The text to decode entities in.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The input \$text, with all HTML entities decoded once. 
\end{DoxyReturn}
\hypertarget{unicode_8inc_a1e6d4fad793d53424ed9c4244953337e}{
\index{unicode.inc@{unicode.inc}!drupal\_\-convert\_\-to\_\-utf8@{drupal\_\-convert\_\-to\_\-utf8}}
\index{drupal\_\-convert\_\-to\_\-utf8@{drupal\_\-convert\_\-to\_\-utf8}!unicode.inc@{unicode.inc}}
\subsubsection[{drupal\_\-convert\_\-to\_\-utf8}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-convert\_\-to\_\-utf8 (\$ {\em data}, \/  \$ {\em encoding})}}
\label{unicode_8inc_a1e6d4fad793d53424ed9c4244953337e}
Converts data to UTF-\/8.

Requires the iconv, GNU recode or mbstring PHP extension.


\begin{DoxyParams}{Parameters}
\item[{\em \$data}]The data to be converted. \item[{\em \$encoding}]The encoding that the data is in.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Converted data or FALSE. 
\end{DoxyReturn}
\hypertarget{unicode_8inc_a5642d9adcf8fc48af1894523b9c52e96}{
\index{unicode.inc@{unicode.inc}!drupal\_\-truncate\_\-bytes@{drupal\_\-truncate\_\-bytes}}
\index{drupal\_\-truncate\_\-bytes@{drupal\_\-truncate\_\-bytes}!unicode.inc@{unicode.inc}}
\subsubsection[{drupal\_\-truncate\_\-bytes}]{\setlength{\rightskip}{0pt plus 5cm}drupal\_\-truncate\_\-bytes (\$ {\em string}, \/  \$ {\em len})}}
\label{unicode_8inc_a5642d9adcf8fc48af1894523b9c52e96}
Truncates a UTF-\/8-\/encoded string safely to a number of bytes.

If the end position is in the middle of a UTF-\/8 sequence, it scans backwards until the beginning of the byte sequence.

Use this function whenever you want to chop off a string at an unsure location. On the other hand, if you're sure that you're splitting on a character boundary (e.g. after using strpos() or similar), you can safely use substr() instead.


\begin{DoxyParams}{Parameters}
\item[{\em \$string}]The string to truncate. \item[{\em \$len}]An upper limit on the returned string length.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The truncated string. 
\end{DoxyReturn}
\hypertarget{unicode_8inc_ab925f3117ef3c0d5736c4c38d0346aa3}{
\index{unicode.inc@{unicode.inc}!mime\_\-header\_\-decode@{mime\_\-header\_\-decode}}
\index{mime\_\-header\_\-decode@{mime\_\-header\_\-decode}!unicode.inc@{unicode.inc}}
\subsubsection[{mime\_\-header\_\-decode}]{\setlength{\rightskip}{0pt plus 5cm}mime\_\-header\_\-decode (\$ {\em header})}}
\label{unicode_8inc_ab925f3117ef3c0d5736c4c38d0346aa3}
Decodes MIME/HTTP encoded header values.


\begin{DoxyParams}{Parameters}
\item[{\em \$header}]The header to decode.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string The mime-\/decoded header.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{unicode_8inc_a079be0dce19618c9dfe392741e6af083}{mime\_\-header\_\-encode()} 
\end{DoxySeeAlso}
\hypertarget{unicode_8inc_a079be0dce19618c9dfe392741e6af083}{
\index{unicode.inc@{unicode.inc}!mime\_\-header\_\-encode@{mime\_\-header\_\-encode}}
\index{mime\_\-header\_\-encode@{mime\_\-header\_\-encode}!unicode.inc@{unicode.inc}}
\subsubsection[{mime\_\-header\_\-encode}]{\setlength{\rightskip}{0pt plus 5cm}mime\_\-header\_\-encode (\$ {\em string})}}
\label{unicode_8inc_a079be0dce19618c9dfe392741e6af083}
Encodes MIME/HTTP header values that contain incorrectly encoded characters.

For example, mime\_\-header\_\-encode('tést.txt') returns \char`\"{}=?UTF-\/8?B?dMOpc3QudHh0?=\char`\"{}.

See \href{http://www.rfc-editor.org/rfc/rfc2047.txt}{\tt http://www.rfc-\/editor.org/rfc/rfc2047.txt} for more information.

Notes:
\begin{DoxyItemize}
\item Only encode strings that contain non-\/ASCII characters.
\item We progressively cut-\/off a chunk with \hyperlink{unicode_8inc_aadfc295e976cb61cb8e4f1f1cf0c781e}{truncate\_\-utf8()}. This is to ensure each chunk starts and ends on a character boundary.
\item Using \par
 as the chunk separator may cause problems on some systems and may have to be changed to \par
 or .
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
\item[{\em \$string}]The header to encode.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string The mime-\/encoded header.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{unicode_8inc_ab925f3117ef3c0d5736c4c38d0346aa3}{mime\_\-header\_\-decode()} 
\end{DoxySeeAlso}
\hypertarget{unicode_8inc_aadfc295e976cb61cb8e4f1f1cf0c781e}{
\index{unicode.inc@{unicode.inc}!truncate\_\-utf8@{truncate\_\-utf8}}
\index{truncate\_\-utf8@{truncate\_\-utf8}!unicode.inc@{unicode.inc}}
\subsubsection[{truncate\_\-utf8}]{\setlength{\rightskip}{0pt plus 5cm}truncate\_\-utf8 (\$ {\em string}, \/  \$ {\em max\_\-length}, \/  \$ {\em wordsafe} = {\ttfamily FALSE}, \/  \$ {\em add\_\-ellipsis} = {\ttfamily FALSE}, \/  \$ {\em min\_\-wordsafe\_\-length} = {\ttfamily 1})}}
\label{unicode_8inc_aadfc295e976cb61cb8e4f1f1cf0c781e}
Truncates a UTF-\/8-\/encoded string safely to a number of characters.


\begin{DoxyParams}{Parameters}
\item[{\em \$string}]The string to truncate. \item[{\em \$max\_\-length}]An upper limit on the returned string length, including trailing ellipsis if \$add\_\-ellipsis is TRUE. \item[{\em \$wordsafe}]If TRUE, attempt to truncate on a word boundary. Word boundaries are spaces, punctuation, and Unicode characters used as word boundaries in non-\/Latin languages; see PREG\_\-CLASS\_\-UNICODE\_\-WORD\_\-BOUNDARY for more information. If a word boundary cannot be found that would make the length of the returned string fall within length guidelines (see parameters \$max\_\-length and \$min\_\-wordsafe\_\-length), word boundaries are ignored. \item[{\em \$add\_\-ellipsis}]If TRUE, add t('...') to the end of the truncated string (defaults to FALSE). The string length will still fall within \$max\_\-length. \item[{\em \$min\_\-wordsafe\_\-length}]If \$wordsafe is TRUE, the minimum acceptable length for truncation (before adding an ellipsis, if \$add\_\-ellipsis is TRUE). Has no effect if \$wordsafe is FALSE. This can be used to prevent having a very short resulting string that will not be understandable. For instance, if you are truncating the string \char`\"{}See myverylongurlexample.com for more information\char`\"{} to a word-\/safe return length of 20, the only available word boundary within 20 characters is after the word \char`\"{}See\char`\"{}, which wouldn't leave a very informative string. If you had set \$min\_\-wordsafe\_\-length to 10, though, the function would realise that \char`\"{}See\char`\"{} alone is too short, and would then just truncate ignoring word boundaries, giving you \char`\"{}See myverylongurl...\char`\"{} (assuming you had set \$add\_\-ellipses to TRUE).\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string The truncated string. 
\end{DoxyReturn}
\hypertarget{unicode_8inc_a20a41302a4e02b802bd51c57935cef3a}{
\index{unicode.inc@{unicode.inc}!unicode\_\-check@{unicode\_\-check}}
\index{unicode\_\-check@{unicode\_\-check}!unicode.inc@{unicode.inc}}
\subsubsection[{unicode\_\-check}]{\setlength{\rightskip}{0pt plus 5cm}unicode\_\-check ()}}
\label{unicode_8inc_a20a41302a4e02b802bd51c57935cef3a}
Wrapper around \hyperlink{unicode_8inc_a8dd710941673e87ac38417d396622cba}{\_\-unicode\_\-check()}. \hypertarget{unicode_8inc_a4323fb60679302048119c2a43f780d3c}{
\index{unicode.inc@{unicode.inc}!unicode\_\-requirements@{unicode\_\-requirements}}
\index{unicode\_\-requirements@{unicode\_\-requirements}!unicode.inc@{unicode.inc}}
\subsubsection[{unicode\_\-requirements}]{\setlength{\rightskip}{0pt plus 5cm}unicode\_\-requirements ()}}
\label{unicode_8inc_a4323fb60679302048119c2a43f780d3c}
Returns Unicode library status and errors. 