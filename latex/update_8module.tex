\hypertarget{update_8module}{
\section{html/modules/update/update.module File Reference}
\label{update_8module}\index{html/modules/update/update.module@{html/modules/update/update.module}}
}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{update_8module_aebab39aae38da226a778ab47bf74ae65}{UPDATE\_\-DEFAULT\_\-URL} 
\item 
enum \hyperlink{update_8module_ac41501f4ca3307cc81bbabbcf6139b61}{UPDATE\_\-NOT\_\-SECURE} 
\item 
enum \hyperlink{update_8module_ae81bb81453c1ad2b97544aa1ccbe1b0c}{UPDATE\_\-REVOKED} 
\item 
enum \hyperlink{update_8module_a553f353b4e62f532ea5cb95a827421ac}{UPDATE\_\-NOT\_\-SUPPORTED} 
\item 
enum \hyperlink{update_8module_a1cf8c4b62d552b0c62ae317040760744}{UPDATE\_\-NOT\_\-CURRENT} 
\item 
enum \hyperlink{update_8module_a2286dc81621d0ea6c92e731930dc7492}{UPDATE\_\-CURRENT} 
\item 
enum \hyperlink{update_8module_a322f30231755ebbc7b4a8be77e574a43}{UPDATE\_\-NOT\_\-CHECKED} 
\item 
enum \hyperlink{update_8module_a00865274cb5f17217b9a4f137fe33609}{UPDATE\_\-UNKNOWN} 
\item 
enum \hyperlink{update_8module_a2cc9d3de7448a0dc6fe7a74e76fda1ac}{UPDATE\_\-NOT\_\-FETCHED} 
\item 
enum \hyperlink{update_8module_ab6032ea4bca533dbb7ff44187401349b}{UPDATE\_\-FETCH\_\-PENDING} 
\item 
enum \hyperlink{update_8module_af6288154fbed0f550434f71cf3e547d8}{UPDATE\_\-MAX\_\-FETCH\_\-ATTEMPTS} 
\item 
enum \hyperlink{update_8module_a9975bc9775cebdd7922532339997220a}{UPDATE\_\-MAX\_\-FETCH\_\-TIME} 
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{update_8module_ae87a65e26562585148f48262a4c12914}{update\_\-help} (\$path, \$arg)
\item 
\hyperlink{update_8module_a54a6a1b199a781dd0eb8620a0cd87e85}{update\_\-init} ()
\item 
\hyperlink{update_8module_abfea1a759334c0461fa9ff2250bdfaaf}{update\_\-menu} ()
\item 
\hyperlink{update_8module_a898d2cad139371b7c3ab5e9463ceedf4}{update\_\-manager\_\-access} ()
\item 
\hyperlink{update_8module_a6146aad98ab9ceb29de1d9fe71161b15}{update\_\-theme} ()
\item 
\hyperlink{update_8module_aa03db4586231db9f453bd156d3b1f242}{update\_\-cron} ()
\item 
\hyperlink{update_8module_a66cb96d284e782a3207e4773749ad3e6}{update\_\-themes\_\-enabled} (\$themes)
\item 
\hyperlink{update_8module_ace87a8222bcba4e44e36395e081bd41a}{update\_\-themes\_\-disabled} (\$themes)
\item 
\hyperlink{update_8module_ac66abd85c8fc901932b73f874bee871b}{update\_\-form\_\-system\_\-modules\_\-alter} (\&\$form, \$form\_\-state)
\item 
\hyperlink{update_8module_a3b1cd668c7aa9cc82f1e05b5a046d04f}{update\_\-cache\_\-clear\_\-submit} (\$form, \&\$form\_\-state)
\item 
\hyperlink{update_8module_a959ca989c19a2a887014b7bb774fcba9}{\_\-update\_\-no\_\-data} ()
\item 
\hyperlink{update_8module_a683663ab0739a0d67fe3eb98f532c11c}{update\_\-get\_\-available} (\$refresh=FALSE)
\item 
\hyperlink{update_8module_abec25d4ee05c73f9417a4eb6e582351d}{update\_\-create\_\-fetch\_\-task} (\$project)
\item 
\hyperlink{update_8module_a601f9ec9c404ec41711b00884e7d0573}{update\_\-refresh} ()
\item 
\hyperlink{update_8module_a88528fa85108af5a0b26ab5b1d6fa8c2}{update\_\-fetch\_\-data} ()
\item 
\hyperlink{update_8module_a75a2b891e9225f86f6a856730a633a3f}{\_\-update\_\-get\_\-cached\_\-available\_\-releases} ()
\item 
\hyperlink{update_8module_aa1257da2e008c8b616daf5cf435a274b}{update\_\-mail} (\$key, \&\$message, \$params)
\item 
\hyperlink{update_8module_aeaeb10c15564cced4147737f310a8198}{\_\-update\_\-message\_\-text} (\$msg\_\-type, \$msg\_\-reason, \$report\_\-link=FALSE, \$language=NULL)
\item 
\hyperlink{update_8module_a80bf4d8130f541b0487ce74cdcd824b8}{\_\-update\_\-project\_\-status\_\-sort} (\$a, \$b)
\item 
\hyperlink{group__themeable_ga18d1e2e6354e6240afb36496fac2239a}{theme\_\-update\_\-last\_\-check} (\$variables)
\item 
\hyperlink{update_8module_afd8be1dfd15eb83f64e1ce593a5f1756}{update\_\-verify\_\-update\_\-archive} (\$project, \$archive\_\-file, \$directory)
\item 
\hyperlink{group__update__status__cache_ga3610ff1515f81f28c69b019e5482b77b}{\_\-update\_\-cache\_\-set} (\$cid, \$data, \$expire)
\item 
\hyperlink{group__update__status__cache_ga3f305bb51be069556fa20d692e286f40}{\_\-update\_\-cache\_\-get} (\$cid)
\item 
\hyperlink{group__update__status__cache_ga11c5e3cca6cd9eb1dc328f757448885f}{\_\-update\_\-get\_\-cache\_\-multiple} (\$cid\_\-prefix)
\item 
\hyperlink{group__update__status__cache_ga45fc31b5f9949fc0081ed148a9f378dd}{\_\-update\_\-cache\_\-clear} (\$cid=NULL, \$wildcard=FALSE)
\item 
\hyperlink{group__update__status__cache_ga9c94b82fd5dfa8483267b9af6042bbb2}{update\_\-flush\_\-caches} ()
\item 
\hyperlink{update_8module_aa0bce789c1af82be02444e68642d9fa2}{\_\-update\_\-manager\_\-unique\_\-identifier} ()
\item 
\hyperlink{update_8module_a4a2bc7d471c60456416dcf60978be1d9}{\_\-update\_\-manager\_\-extract\_\-directory} (\$create=TRUE)
\item 
\hyperlink{update_8module_a7ccc53a1e104d2b7b8a6b6b87e7b65f5}{\_\-update\_\-manager\_\-cache\_\-directory} (\$create=TRUE)
\item 
\hyperlink{update_8module_a8983ea011eb38001c6265043b2c793d2}{update\_\-clear\_\-update\_\-disk\_\-cache} ()
\item 
\hyperlink{update_8module_a22563c9c7f601f21fe7d2dc89aa73e2e}{update\_\-delete\_\-file\_\-if\_\-stale} (\$path)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Handles updates of Drupal core and contributed projects.

The module checks for available updates of Drupal core and any installed contributed modules and themes. It warns site administrators if newer releases are available via the system status report (admin/reports/status), the module and theme pages, and optionally via e-\/mail. It also provides the ability to install contributed modules and themes via an user interface. 

\subsection{Enumeration Type Documentation}
\hypertarget{update_8module_a2286dc81621d0ea6c92e731930dc7492}{
\index{update.module@{update.module}!UPDATE\_\-CURRENT@{UPDATE\_\-CURRENT}}
\index{UPDATE\_\-CURRENT@{UPDATE\_\-CURRENT}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-CURRENT}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-CURRENT}}}
\label{update_8module_a2286dc81621d0ea6c92e731930dc7492}
Project is up to date. \hypertarget{update_8module_aebab39aae38da226a778ab47bf74ae65}{
\index{update.module@{update.module}!UPDATE\_\-DEFAULT\_\-URL@{UPDATE\_\-DEFAULT\_\-URL}}
\index{UPDATE\_\-DEFAULT\_\-URL@{UPDATE\_\-DEFAULT\_\-URL}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-DEFAULT\_\-URL}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-DEFAULT\_\-URL}}}
\label{update_8module_aebab39aae38da226a778ab47bf74ae65}
URL to check for updates, if a given project doesn't define its own. \hypertarget{update_8module_ab6032ea4bca533dbb7ff44187401349b}{
\index{update.module@{update.module}!UPDATE\_\-FETCH\_\-PENDING@{UPDATE\_\-FETCH\_\-PENDING}}
\index{UPDATE\_\-FETCH\_\-PENDING@{UPDATE\_\-FETCH\_\-PENDING}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-FETCH\_\-PENDING}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-FETCH\_\-PENDING}}}
\label{update_8module_ab6032ea4bca533dbb7ff44187401349b}
We need to (re)fetch available update data for this project. \hypertarget{update_8module_af6288154fbed0f550434f71cf3e547d8}{
\index{update.module@{update.module}!UPDATE\_\-MAX\_\-FETCH\_\-ATTEMPTS@{UPDATE\_\-MAX\_\-FETCH\_\-ATTEMPTS}}
\index{UPDATE\_\-MAX\_\-FETCH\_\-ATTEMPTS@{UPDATE\_\-MAX\_\-FETCH\_\-ATTEMPTS}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-MAX\_\-FETCH\_\-ATTEMPTS}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-MAX\_\-FETCH\_\-ATTEMPTS}}}
\label{update_8module_af6288154fbed0f550434f71cf3e547d8}
Maximum number of attempts to fetch available update data from a given host. \hypertarget{update_8module_a9975bc9775cebdd7922532339997220a}{
\index{update.module@{update.module}!UPDATE\_\-MAX\_\-FETCH\_\-TIME@{UPDATE\_\-MAX\_\-FETCH\_\-TIME}}
\index{UPDATE\_\-MAX\_\-FETCH\_\-TIME@{UPDATE\_\-MAX\_\-FETCH\_\-TIME}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-MAX\_\-FETCH\_\-TIME}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-MAX\_\-FETCH\_\-TIME}}}
\label{update_8module_a9975bc9775cebdd7922532339997220a}
Maximum number of seconds to try fetching available update data at a time. \hypertarget{update_8module_a322f30231755ebbc7b4a8be77e574a43}{
\index{update.module@{update.module}!UPDATE\_\-NOT\_\-CHECKED@{UPDATE\_\-NOT\_\-CHECKED}}
\index{UPDATE\_\-NOT\_\-CHECKED@{UPDATE\_\-NOT\_\-CHECKED}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-NOT\_\-CHECKED}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-NOT\_\-CHECKED}}}
\label{update_8module_a322f30231755ebbc7b4a8be77e574a43}
Project's status cannot be checked. \hypertarget{update_8module_a1cf8c4b62d552b0c62ae317040760744}{
\index{update.module@{update.module}!UPDATE\_\-NOT\_\-CURRENT@{UPDATE\_\-NOT\_\-CURRENT}}
\index{UPDATE\_\-NOT\_\-CURRENT@{UPDATE\_\-NOT\_\-CURRENT}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-NOT\_\-CURRENT}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-NOT\_\-CURRENT}}}
\label{update_8module_a1cf8c4b62d552b0c62ae317040760744}
Project has a new release available, but it is not a security release. \hypertarget{update_8module_a2cc9d3de7448a0dc6fe7a74e76fda1ac}{
\index{update.module@{update.module}!UPDATE\_\-NOT\_\-FETCHED@{UPDATE\_\-NOT\_\-FETCHED}}
\index{UPDATE\_\-NOT\_\-FETCHED@{UPDATE\_\-NOT\_\-FETCHED}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-NOT\_\-FETCHED}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-NOT\_\-FETCHED}}}
\label{update_8module_a2cc9d3de7448a0dc6fe7a74e76fda1ac}
There was a failure fetching available update data for this project. \hypertarget{update_8module_ac41501f4ca3307cc81bbabbcf6139b61}{
\index{update.module@{update.module}!UPDATE\_\-NOT\_\-SECURE@{UPDATE\_\-NOT\_\-SECURE}}
\index{UPDATE\_\-NOT\_\-SECURE@{UPDATE\_\-NOT\_\-SECURE}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-NOT\_\-SECURE}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-NOT\_\-SECURE}}}
\label{update_8module_ac41501f4ca3307cc81bbabbcf6139b61}
Project is missing security update(s). \hypertarget{update_8module_a553f353b4e62f532ea5cb95a827421ac}{
\index{update.module@{update.module}!UPDATE\_\-NOT\_\-SUPPORTED@{UPDATE\_\-NOT\_\-SUPPORTED}}
\index{UPDATE\_\-NOT\_\-SUPPORTED@{UPDATE\_\-NOT\_\-SUPPORTED}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-NOT\_\-SUPPORTED}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-NOT\_\-SUPPORTED}}}
\label{update_8module_a553f353b4e62f532ea5cb95a827421ac}
Current release is no longer supported by the project maintainer. \hypertarget{update_8module_ae81bb81453c1ad2b97544aa1ccbe1b0c}{
\index{update.module@{update.module}!UPDATE\_\-REVOKED@{UPDATE\_\-REVOKED}}
\index{UPDATE\_\-REVOKED@{UPDATE\_\-REVOKED}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-REVOKED}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-REVOKED}}}
\label{update_8module_ae81bb81453c1ad2b97544aa1ccbe1b0c}
Current release has been unpublished and is no longer available. \hypertarget{update_8module_a00865274cb5f17217b9a4f137fe33609}{
\index{update.module@{update.module}!UPDATE\_\-UNKNOWN@{UPDATE\_\-UNKNOWN}}
\index{UPDATE\_\-UNKNOWN@{UPDATE\_\-UNKNOWN}!update.module@{update.module}}
\subsubsection[{UPDATE\_\-UNKNOWN}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf UPDATE\_\-UNKNOWN}}}
\label{update_8module_a00865274cb5f17217b9a4f137fe33609}
No available update data was found for project. 

\subsection{Function Documentation}
\hypertarget{update_8module_a75a2b891e9225f86f6a856730a633a3f}{
\index{update.module@{update.module}!\_\-update\_\-get\_\-cached\_\-available\_\-releases@{\_\-update\_\-get\_\-cached\_\-available\_\-releases}}
\index{\_\-update\_\-get\_\-cached\_\-available\_\-releases@{\_\-update\_\-get\_\-cached\_\-available\_\-releases}!update.module@{update.module}}
\subsubsection[{\_\-update\_\-get\_\-cached\_\-available\_\-releases}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-get\_\-cached\_\-available\_\-releases ()}}
\label{update_8module_a75a2b891e9225f86f6a856730a633a3f}
Returns all currently cached data about available releases for all projects.

\begin{DoxyReturn}{Returns}
Array of data about available releases, keyed by project shortname. 
\end{DoxyReturn}
\hypertarget{update_8module_a7ccc53a1e104d2b7b8a6b6b87e7b65f5}{
\index{update.module@{update.module}!\_\-update\_\-manager\_\-cache\_\-directory@{\_\-update\_\-manager\_\-cache\_\-directory}}
\index{\_\-update\_\-manager\_\-cache\_\-directory@{\_\-update\_\-manager\_\-cache\_\-directory}!update.module@{update.module}}
\subsubsection[{\_\-update\_\-manager\_\-cache\_\-directory}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-manager\_\-cache\_\-directory (\$ {\em create} = {\ttfamily TRUE})}}
\label{update_8module_a7ccc53a1e104d2b7b8a6b6b87e7b65f5}
Returns the directory where update archive files should be cached.


\begin{DoxyParams}{Parameters}
\item[{\em \$create}](optional) Whether to attempt to create the directory if it does not already exist. Defaults to TRUE.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The full path to the temporary directory where update file archives should be cached. 
\end{DoxyReturn}
\hypertarget{update_8module_a4a2bc7d471c60456416dcf60978be1d9}{
\index{update.module@{update.module}!\_\-update\_\-manager\_\-extract\_\-directory@{\_\-update\_\-manager\_\-extract\_\-directory}}
\index{\_\-update\_\-manager\_\-extract\_\-directory@{\_\-update\_\-manager\_\-extract\_\-directory}!update.module@{update.module}}
\subsubsection[{\_\-update\_\-manager\_\-extract\_\-directory}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-manager\_\-extract\_\-directory (\$ {\em create} = {\ttfamily TRUE})}}
\label{update_8module_a4a2bc7d471c60456416dcf60978be1d9}
Returns the directory where update archive files should be extracted.


\begin{DoxyParams}{Parameters}
\item[{\em \$create}](optional) Whether to attempt to create the directory if it does not already exist. Defaults to TRUE.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The full path to the temporary directory where update file archives should be extracted. 
\end{DoxyReturn}
\hypertarget{update_8module_aa0bce789c1af82be02444e68642d9fa2}{
\index{update.module@{update.module}!\_\-update\_\-manager\_\-unique\_\-identifier@{\_\-update\_\-manager\_\-unique\_\-identifier}}
\index{\_\-update\_\-manager\_\-unique\_\-identifier@{\_\-update\_\-manager\_\-unique\_\-identifier}!update.module@{update.module}}
\subsubsection[{\_\-update\_\-manager\_\-unique\_\-identifier}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-manager\_\-unique\_\-identifier ()}}
\label{update_8module_aa0bce789c1af82be02444e68642d9fa2}
End of \char`\"{}defgroup update\_\-status\_\-cache\char`\"{}. Returns a short unique identifier for this Drupal installation.

\begin{DoxyReturn}{Returns}
An eight character string uniquely identifying this Drupal installation. 
\end{DoxyReturn}
\hypertarget{update_8module_aeaeb10c15564cced4147737f310a8198}{
\index{update.module@{update.module}!\_\-update\_\-message\_\-text@{\_\-update\_\-message\_\-text}}
\index{\_\-update\_\-message\_\-text@{\_\-update\_\-message\_\-text}!update.module@{update.module}}
\subsubsection[{\_\-update\_\-message\_\-text}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-message\_\-text (\$ {\em msg\_\-type}, \/  \$ {\em msg\_\-reason}, \/  \$ {\em report\_\-link} = {\ttfamily FALSE}, \/  \$ {\em language} = {\ttfamily NULL})}}
\label{update_8module_aeaeb10c15564cced4147737f310a8198}
Returns the appropriate message text when site is out of date or not secure.

These error messages are shared by both update\_\-requirements() for the site-\/wide status report at admin/reports/status and in the body of the notification e-\/mail messages generated by \hyperlink{update_8module_aa03db4586231db9f453bd156d3b1f242}{update\_\-cron()}.


\begin{DoxyParams}{Parameters}
\item[{\em \$msg\_\-type}]String to indicate what kind of message to generate. Can be either 'core' or 'contrib'. \item[{\em \$msg\_\-reason}]Integer constant specifying why message is generated. \item[{\em \$report\_\-link}](optional) Boolean that controls if a link to the updates report should be added. Defaults to FALSE. \item[{\em \$language}](optional) A language object to use. Defaults to NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The properly translated error message for the given key. 
\end{DoxyReturn}
\hypertarget{update_8module_a959ca989c19a2a887014b7bb774fcba9}{
\index{update.module@{update.module}!\_\-update\_\-no\_\-data@{\_\-update\_\-no\_\-data}}
\index{\_\-update\_\-no\_\-data@{\_\-update\_\-no\_\-data}!update.module@{update.module}}
\subsubsection[{\_\-update\_\-no\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-no\_\-data ()}}
\label{update_8module_a959ca989c19a2a887014b7bb774fcba9}
Returns a warning message when there is no data about available updates. \hypertarget{update_8module_a80bf4d8130f541b0487ce74cdcd824b8}{
\index{update.module@{update.module}!\_\-update\_\-project\_\-status\_\-sort@{\_\-update\_\-project\_\-status\_\-sort}}
\index{\_\-update\_\-project\_\-status\_\-sort@{\_\-update\_\-project\_\-status\_\-sort}!update.module@{update.module}}
\subsubsection[{\_\-update\_\-project\_\-status\_\-sort}]{\setlength{\rightskip}{0pt plus 5cm}\_\-update\_\-project\_\-status\_\-sort (\$ {\em a}, \/  \$ {\em b})}}
\label{update_8module_a80bf4d8130f541b0487ce74cdcd824b8}
Orders projects based on their status.

Callback for uasort() within update\_\-requirements(). \hypertarget{update_8module_a3b1cd668c7aa9cc82f1e05b5a046d04f}{
\index{update.module@{update.module}!update\_\-cache\_\-clear\_\-submit@{update\_\-cache\_\-clear\_\-submit}}
\index{update\_\-cache\_\-clear\_\-submit@{update\_\-cache\_\-clear\_\-submit}!update.module@{update.module}}
\subsubsection[{update\_\-cache\_\-clear\_\-submit}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-cache\_\-clear\_\-submit (\$ {\em form}, \/  \&\$ {\em form\_\-state})}}
\label{update_8module_a3b1cd668c7aa9cc82f1e05b5a046d04f}
Form submission handler for \hyperlink{group__forms_gaf4691243ea56e10a971d3d04a94c47b1}{system\_\-modules()}.

\begin{DoxySeeAlso}{See also}
\hyperlink{update_8module_ac66abd85c8fc901932b73f874bee871b}{update\_\-form\_\-system\_\-modules\_\-alter()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_a8983ea011eb38001c6265043b2c793d2}{
\index{update.module@{update.module}!update\_\-clear\_\-update\_\-disk\_\-cache@{update\_\-clear\_\-update\_\-disk\_\-cache}}
\index{update\_\-clear\_\-update\_\-disk\_\-cache@{update\_\-clear\_\-update\_\-disk\_\-cache}!update.module@{update.module}}
\subsubsection[{update\_\-clear\_\-update\_\-disk\_\-cache}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-clear\_\-update\_\-disk\_\-cache ()}}
\label{update_8module_a8983ea011eb38001c6265043b2c793d2}
Clears the temporary files and directories based on file age from disk. \hypertarget{update_8module_abec25d4ee05c73f9417a4eb6e582351d}{
\index{update.module@{update.module}!update\_\-create\_\-fetch\_\-task@{update\_\-create\_\-fetch\_\-task}}
\index{update\_\-create\_\-fetch\_\-task@{update\_\-create\_\-fetch\_\-task}!update.module@{update.module}}
\subsubsection[{update\_\-create\_\-fetch\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-create\_\-fetch\_\-task (\$ {\em project})}}
\label{update_8module_abec25d4ee05c73f9417a4eb6e582351d}
Creates a new fetch task after loading the necessary include file.


\begin{DoxyParams}{Parameters}
\item[{\em \$project}]Associative array of information about a project. See \hyperlink{update_8compare_8inc_a7e1ea49d91f2d2b81b8101d481d10300}{update\_\-get\_\-projects()} for the keys used.\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{update_8fetch_8inc_a8b22762aaa27e7a0927f4f3ad09ad5e1}{\_\-update\_\-create\_\-fetch\_\-task()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_aa03db4586231db9f453bd156d3b1f242}{
\index{update.module@{update.module}!update\_\-cron@{update\_\-cron}}
\index{update\_\-cron@{update\_\-cron}!update.module@{update.module}}
\subsubsection[{update\_\-cron}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-cron ()}}
\label{update_8module_aa03db4586231db9f453bd156d3b1f242}
Implements \hyperlink{group__hooks_gaf07f1e3d98112fc2ba6920cf7ee6fb16}{hook\_\-cron()}. \hypertarget{update_8module_a22563c9c7f601f21fe7d2dc89aa73e2e}{
\index{update.module@{update.module}!update\_\-delete\_\-file\_\-if\_\-stale@{update\_\-delete\_\-file\_\-if\_\-stale}}
\index{update\_\-delete\_\-file\_\-if\_\-stale@{update\_\-delete\_\-file\_\-if\_\-stale}!update.module@{update.module}}
\subsubsection[{update\_\-delete\_\-file\_\-if\_\-stale}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-delete\_\-file\_\-if\_\-stale (\$ {\em path})}}
\label{update_8module_a22563c9c7f601f21fe7d2dc89aa73e2e}
Deletes stale files and directories from the update manager disk cache.

Files and directories older than 6 hours and development snapshots older than 5 minutes are considered stale. We only cache development snapshots for 5 minutes since otherwise updated snapshots might not be downloaded as expected.

When checking file ages, we need to use the ctime, not the mtime (modification time) since many (all?) tar implementations go out of their way to set the mtime on the files they create to the timestamps recorded in the tarball. We want to see the last time the file was changed on disk, which is left alone by tar and correctly set to the time the archive file was unpacked.


\begin{DoxyParams}{Parameters}
\item[{\em \$path}]A string containing a file path or (streamwrapper) URI. \end{DoxyParams}
\hypertarget{update_8module_a88528fa85108af5a0b26ab5b1d6fa8c2}{
\index{update.module@{update.module}!update\_\-fetch\_\-data@{update\_\-fetch\_\-data}}
\index{update\_\-fetch\_\-data@{update\_\-fetch\_\-data}!update.module@{update.module}}
\subsubsection[{update\_\-fetch\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-fetch\_\-data ()}}
\label{update_8module_a88528fa85108af5a0b26ab5b1d6fa8c2}
Attempts to fetch update data after loading the necessary include file.

\begin{DoxySeeAlso}{See also}
\hyperlink{update_8fetch_8inc_a3a3122bc6fdfe23091d8db56e4430aeb}{\_\-update\_\-fetch\_\-data()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_ac66abd85c8fc901932b73f874bee871b}{
\index{update.module@{update.module}!update\_\-form\_\-system\_\-modules\_\-alter@{update\_\-form\_\-system\_\-modules\_\-alter}}
\index{update\_\-form\_\-system\_\-modules\_\-alter@{update\_\-form\_\-system\_\-modules\_\-alter}!update.module@{update.module}}
\subsubsection[{update\_\-form\_\-system\_\-modules\_\-alter}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-form\_\-system\_\-modules\_\-alter (\&\$ {\em form}, \/  \$ {\em form\_\-state})}}
\label{update_8module_ac66abd85c8fc901932b73f874bee871b}
Implements \hyperlink{group__hooks_ga8d4a4089551493d55911bd5c4f218264}{hook\_\-form\_\-FORM\_\-ID\_\-alter()} for \hyperlink{group__forms_gaf4691243ea56e10a971d3d04a94c47b1}{system\_\-modules()}.

Adds a form submission handler to the system modules form, so that if a site admin saves the form, we invalidate the cache of available updates.

\begin{DoxySeeAlso}{See also}
\hyperlink{group__update__status__cache_ga45fc31b5f9949fc0081ed148a9f378dd}{\_\-update\_\-cache\_\-clear()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_a683663ab0739a0d67fe3eb98f532c11c}{
\index{update.module@{update.module}!update\_\-get\_\-available@{update\_\-get\_\-available}}
\index{update\_\-get\_\-available@{update\_\-get\_\-available}!update.module@{update.module}}
\subsubsection[{update\_\-get\_\-available}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-get\_\-available (\$ {\em refresh} = {\ttfamily FALSE})}}
\label{update_8module_a683663ab0739a0d67fe3eb98f532c11c}
Tries to get update information from cache and refreshes it when necessary.

In addition to checking the cache lifetime, this function also ensures that there are no .info files for enabled modules or themes that have a newer modification timestamp than the last time we checked for available update data. If any .info file was modified, it almost certainly means a new version of something was installed. Without fresh available update data, the logic in \hyperlink{update_8compare_8inc_aa0663304dc4634e4109c896f214ea791}{update\_\-calculate\_\-project\_\-data()} will be wrong and produce confusing, bogus results.


\begin{DoxyParams}{Parameters}
\item[{\em \$refresh}](optional) Boolean to indicate if this method should refresh the cache automatically if there's no data. Defaults to FALSE.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Array of data about available releases, keyed by project shortname.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{update_8module_a601f9ec9c404ec41711b00884e7d0573}{update\_\-refresh()} 

\hyperlink{update_8compare_8inc_a7e1ea49d91f2d2b81b8101d481d10300}{update\_\-get\_\-projects()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_ae87a65e26562585148f48262a4c12914}{
\index{update.module@{update.module}!update\_\-help@{update\_\-help}}
\index{update\_\-help@{update\_\-help}!update.module@{update.module}}
\subsubsection[{update\_\-help}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-help (\$ {\em path}, \/  \$ {\em arg})}}
\label{update_8module_ae87a65e26562585148f48262a4c12914}
Implements \hyperlink{group__hooks_ga5589c2714a782738e8851c4c90231f0e}{hook\_\-help()}. \hypertarget{update_8module_a54a6a1b199a781dd0eb8620a0cd87e85}{
\index{update.module@{update.module}!update\_\-init@{update\_\-init}}
\index{update\_\-init@{update\_\-init}!update.module@{update.module}}
\subsubsection[{update\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-init ()}}
\label{update_8module_a54a6a1b199a781dd0eb8620a0cd87e85}
Implements \hyperlink{group__hooks_ga74edef0c463436fdbb1f92ef367db051}{hook\_\-init()}. \hypertarget{update_8module_aa1257da2e008c8b616daf5cf435a274b}{
\index{update.module@{update.module}!update\_\-mail@{update\_\-mail}}
\index{update\_\-mail@{update\_\-mail}!update.module@{update.module}}
\subsubsection[{update\_\-mail}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-mail (\$ {\em key}, \/  \&\$ {\em message}, \/  \$ {\em params})}}
\label{update_8module_aa1257da2e008c8b616daf5cf435a274b}
Implements \hyperlink{group__hooks_gacdeb1cba0d0a86ac4de3fff7d4765777}{hook\_\-mail()}.

Constructs the e-\/mail notification message when the site is out of date.


\begin{DoxyParams}{Parameters}
\item[{\em \$key}]Unique key to indicate what message to build, always 'status\_\-notify'. \item[{\em \$message}]Reference to the message array being built. \item[{\em \$params}]Array of parameters to indicate what kind of text to include in the message body. This is a keyed array of message type ('core' or 'contrib') as the keys, and the status reason constant (UPDATE\_\-NOT\_\-SECURE, etc) for the values.\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{mail_8inc_ab80781fd7273975a77cbbd13300eddbf}{drupal\_\-mail()} 

\hyperlink{update_8fetch_8inc_a55d78e25faf69f49cfc88f2642c06f4e}{\_\-update\_\-cron\_\-notify()} 

\hyperlink{update_8module_aeaeb10c15564cced4147737f310a8198}{\_\-update\_\-message\_\-text()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_a898d2cad139371b7c3ab5e9463ceedf4}{
\index{update.module@{update.module}!update\_\-manager\_\-access@{update\_\-manager\_\-access}}
\index{update\_\-manager\_\-access@{update\_\-manager\_\-access}!update.module@{update.module}}
\subsubsection[{update\_\-manager\_\-access}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-manager\_\-access ()}}
\label{update_8module_a898d2cad139371b7c3ab5e9463ceedf4}
Access callback: Resolves if the current user can access updater menu items.

It both enforces the 'administer software updates' permission and the global kill switch for the \hyperlink{authorize_8php}{authorize.php} script.

\begin{DoxyReturn}{Returns}
TRUE if the current user can access the updater menu items; FALSE otherwise.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{update_8module_abfea1a759334c0461fa9ff2250bdfaaf}{update\_\-menu()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_abfea1a759334c0461fa9ff2250bdfaaf}{
\index{update.module@{update.module}!update\_\-menu@{update\_\-menu}}
\index{update\_\-menu@{update\_\-menu}!update.module@{update.module}}
\subsubsection[{update\_\-menu}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-menu ()}}
\label{update_8module_abfea1a759334c0461fa9ff2250bdfaaf}
Implements \hyperlink{group__hooks_ga5c95244fea59b25666e409759e133ded}{hook\_\-menu()}. \hypertarget{update_8module_a601f9ec9c404ec41711b00884e7d0573}{
\index{update.module@{update.module}!update\_\-refresh@{update\_\-refresh}}
\index{update\_\-refresh@{update\_\-refresh}!update.module@{update.module}}
\subsubsection[{update\_\-refresh}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-refresh ()}}
\label{update_8module_a601f9ec9c404ec41711b00884e7d0573}
Refreshes the release data after loading the necessary include file.

\begin{DoxySeeAlso}{See also}
\hyperlink{update_8fetch_8inc_aa9814236d331f2e6822435215e9acd8e}{\_\-update\_\-refresh()} 
\end{DoxySeeAlso}
\hypertarget{update_8module_a6146aad98ab9ceb29de1d9fe71161b15}{
\index{update.module@{update.module}!update\_\-theme@{update\_\-theme}}
\index{update\_\-theme@{update\_\-theme}!update.module@{update.module}}
\subsubsection[{update\_\-theme}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-theme ()}}
\label{update_8module_a6146aad98ab9ceb29de1d9fe71161b15}
Implements \hyperlink{group__hooks_ga013ccb45c7aaab1c16cf9691428c910d}{hook\_\-theme()}. \hypertarget{update_8module_ace87a8222bcba4e44e36395e081bd41a}{
\index{update.module@{update.module}!update\_\-themes\_\-disabled@{update\_\-themes\_\-disabled}}
\index{update\_\-themes\_\-disabled@{update\_\-themes\_\-disabled}!update.module@{update.module}}
\subsubsection[{update\_\-themes\_\-disabled}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-themes\_\-disabled (\$ {\em themes})}}
\label{update_8module_ace87a8222bcba4e44e36395e081bd41a}
Implements hook\_\-themes\_\-disabled().

If themes are disabled, we invalidate the cache of available updates. \hypertarget{update_8module_a66cb96d284e782a3207e4773749ad3e6}{
\index{update.module@{update.module}!update\_\-themes\_\-enabled@{update\_\-themes\_\-enabled}}
\index{update\_\-themes\_\-enabled@{update\_\-themes\_\-enabled}!update.module@{update.module}}
\subsubsection[{update\_\-themes\_\-enabled}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-themes\_\-enabled (\$ {\em themes})}}
\label{update_8module_a66cb96d284e782a3207e4773749ad3e6}
Implements hook\_\-themes\_\-enabled().

If themes are enabled, we invalidate the cache of available updates. \hypertarget{update_8module_afd8be1dfd15eb83f64e1ce593a5f1756}{
\index{update.module@{update.module}!update\_\-verify\_\-update\_\-archive@{update\_\-verify\_\-update\_\-archive}}
\index{update\_\-verify\_\-update\_\-archive@{update\_\-verify\_\-update\_\-archive}!update.module@{update.module}}
\subsubsection[{update\_\-verify\_\-update\_\-archive}]{\setlength{\rightskip}{0pt plus 5cm}update\_\-verify\_\-update\_\-archive (\$ {\em project}, \/  \$ {\em archive\_\-file}, \/  \$ {\em directory})}}
\label{update_8module_afd8be1dfd15eb83f64e1ce593a5f1756}
Implements \hyperlink{group__update__manager__file_ga68a5dd6bec824909f46d9458991eaf42}{hook\_\-verify\_\-update\_\-archive()}.

First, we ensure that the archive isn't a copy of Drupal core, which the update manager does not yet support. See \href{http://drupal.org/node/606592}{\tt http://drupal.org/node/606592}

Then, we make sure that at least one module included in the archive file has an .info file which claims that the code is compatible with the current version of Drupal core.

\begin{DoxySeeAlso}{See also}
\hyperlink{common_8inc_a60d1237b23d4e84a59656003596add4b}{drupal\_\-system\_\-listing()} 

\hyperlink{system_8module_aec98f44cde3933b35e0cb066d387c54c}{\_\-system\_\-rebuild\_\-module\_\-data()} 
\end{DoxySeeAlso}
