\hypertarget{group__node__api__hooks}{
\section{Node API Hooks}
\label{group__node__api__hooks}\index{Node API Hooks@{Node API Hooks}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__node__api__hooks_ga66ea0473a9950dc961802e801e5042e9}{hook\_\-node\_\-delete} (\$node)
\item 
\hyperlink{group__node__api__hooks_gad7e8c6941181366016058771ae841bc9}{hook\_\-node\_\-revision\_\-delete} (\$node)
\item 
\hyperlink{group__node__api__hooks_ga8b40dc62e46e5055c205d2a723dc3548}{hook\_\-node\_\-insert} (\$node)
\item 
\hyperlink{group__node__api__hooks_gad48bb14b68ed38526029d1f7ac2d2de4}{hook\_\-node\_\-load} (\$nodes, \$types)
\item 
\hyperlink{group__node__api__hooks_ga4bbe7320bd52fc6183920c8be2d9d4f6}{hook\_\-node\_\-prepare} (\$node)
\item 
\hyperlink{group__node__api__hooks_ga8644320a0e04e3a503c99626d4223725}{hook\_\-node\_\-search\_\-result} (\$node)
\item 
\hyperlink{group__node__api__hooks_gab339b1a1ce0e235d4a9c5a05e410dcd6}{hook\_\-node\_\-presave} (\$node)
\item 
\hyperlink{group__node__api__hooks_gac66c767cc922fcbfdaf17252e5d87d9d}{hook\_\-node\_\-update} (\$node)
\item 
\hyperlink{group__node__api__hooks_gac8420f204c69a4dc641f4d809a870b05}{hook\_\-node\_\-update\_\-index} (\$node)
\item 
\hyperlink{group__node__api__hooks_gad26227eaf0dd513134767a11be40ab1d}{hook\_\-node\_\-validate} (\$node, \$form, \&\$form\_\-state)
\item 
\hyperlink{group__node__api__hooks_ga1b479b731ecb3f9eec0c92e3e1a8e01d}{hook\_\-node\_\-submit} (\$node, \$form, \&\$form\_\-state)
\item 
\hyperlink{group__node__api__hooks_ga475290ee8e81a2373ea17c512cc3f9a9}{hook\_\-node\_\-view} (\$node, \$view\_\-mode, \$langcode)
\item 
\hyperlink{group__node__api__hooks_gad5ece824736be57bf0020af900398b94}{hook\_\-node\_\-view\_\-alter} (\&\$build)
\item 
\hyperlink{group__node__api__hooks_ga3b6ad51d7815d1cdd093b0e0f350cbd0}{hook\_\-node\_\-info} ()
\item 
\hyperlink{group__node__api__hooks_gaf7a28ce3230dc96833ea5338fd26f43c}{hook\_\-ranking} ()
\item 
\hyperlink{group__node__api__hooks_ga8588d8a814e8aef059d9e0f842904b35}{hook\_\-delete} (\$node)
\item 
\hyperlink{group__node__api__hooks_ga2dff6dd92802df6b776a4eeb0b1a737c}{hook\_\-prepare} (\$node)
\item 
\hyperlink{group__node__api__hooks_ga52618ef4643a60878dd5a76ff9bbff30}{hook\_\-form} (\$node, \&\$form\_\-state)
\item 
\hyperlink{group__node__api__hooks_ga3c6a28d33e07d3506e1eb99718ef4e39}{hook\_\-insert} (\$node)
\item 
\hyperlink{group__node__api__hooks_ga49065b040d7fb3e02889eda6361dac34}{hook\_\-load} (\$nodes)
\item 
\hyperlink{group__node__api__hooks_gaf9c98e3839e9405df42b50c8cdfa9dca}{hook\_\-update} (\$node)
\item 
\hyperlink{group__node__api__hooks_gacaf7cff104c642c28f76ce7ec5f33f40}{hook\_\-validate} (\$node, \$form, \&\$form\_\-state)
\item 
\hyperlink{group__node__api__hooks_gab1f229603b5e0f2f9d9e2a3ab53dcbda}{hook\_\-view} (\$node, \$view\_\-mode)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions to define and modify content types.

Each content type is maintained by a primary module, which is either \hyperlink{node_8module}{node.module} (for content types created in the user interface) or the module that implements \hyperlink{group__node__api__hooks_ga3b6ad51d7815d1cdd093b0e0f350cbd0}{hook\_\-node\_\-info()} to define the content type.

During node operations (create, update, \hyperlink{classview}{view}, delete, etc.), there are several sets of hooks that get invoked to allow modules to modify the base node operation:
\begin{DoxyItemize}
\item Node-\/type-\/specific hooks: These hooks are only invoked on the primary module, using the \char`\"{}base\char`\"{} return component of \hyperlink{group__node__api__hooks_ga3b6ad51d7815d1cdd093b0e0f350cbd0}{hook\_\-node\_\-info()} as the function prefix. For example, \hyperlink{poll_8module}{poll.module} defines the base for the Poll content type as \char`\"{}poll\char`\"{}, so during creation of a poll node, \hyperlink{group__node__api__hooks_ga3c6a28d33e07d3506e1eb99718ef4e39}{hook\_\-insert()} is only invoked by calling \hyperlink{poll_8module_ad302f1defb634370507bb6e4faf99a77}{poll\_\-insert()}.
\item All-\/module hooks: This set of hooks is invoked on all implementing modules, to allow other modules to modify what the primary node module is doing. For example, \hyperlink{group__node__api__hooks_ga8b40dc62e46e5055c205d2a723dc3548}{hook\_\-node\_\-insert()} is invoked on all modules when creating a poll node.
\item Field hooks: Hooks related to the fields attached to the node. These are invoked from the field operations functions described below, and can be either field-\/type-\/specific or all-\/module hooks.
\item Entity hooks: Generic hooks for \char`\"{}entity\char`\"{} operations. These are always invoked on all modules.
\end{DoxyItemize}

Here is a list of the node and entity hooks that are invoked, field operations, and other steps that take place during node operations:
\begin{DoxyItemize}
\item Creating a new node (calling \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} on a new node):
\begin{DoxyItemize}
\item \hyperlink{group__field__attach_ga8f3ecf532dc49f8aed138695489fc81d}{field\_\-attach\_\-presave()}
\item \hyperlink{group__node__api__hooks_gab339b1a1ce0e235d4a9c5a05e410dcd6}{hook\_\-node\_\-presave()} (all)
\item \hyperlink{group__hooks_ga1837f8059e89f6b0c00826f3e06e24f7}{hook\_\-entity\_\-presave()} (all)
\item Node and revision records are written to the database
\item \hyperlink{group__node__api__hooks_ga3c6a28d33e07d3506e1eb99718ef4e39}{hook\_\-insert()} (node-\/type-\/specific)
\item \hyperlink{group__field__attach_gad7c37d577b97db5e0c182bc570ed7cf4}{field\_\-attach\_\-insert()}
\item \hyperlink{group__node__api__hooks_ga8b40dc62e46e5055c205d2a723dc3548}{hook\_\-node\_\-insert()} (all)
\item \hyperlink{group__hooks_ga38882255a4252e0e87d77ecd9c75a0dd}{hook\_\-entity\_\-insert()} (all)
\item \hyperlink{group__node__access_ga3fe7744d74446e40e9b9ad2a782b4269}{hook\_\-node\_\-access\_\-records()} (all)
\item \hyperlink{group__node__access_ga37c90bf0e1dccad0deefa368dd94cc83}{hook\_\-node\_\-access\_\-records\_\-alter()} (all)
\end{DoxyItemize}
\item Updating an existing node (calling \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} on an existing node):
\begin{DoxyItemize}
\item \hyperlink{group__field__attach_ga8f3ecf532dc49f8aed138695489fc81d}{field\_\-attach\_\-presave()}
\item \hyperlink{group__node__api__hooks_gab339b1a1ce0e235d4a9c5a05e410dcd6}{hook\_\-node\_\-presave()} (all)
\item \hyperlink{group__hooks_ga1837f8059e89f6b0c00826f3e06e24f7}{hook\_\-entity\_\-presave()} (all)
\item Node and revision records are written to the database
\item \hyperlink{group__node__api__hooks_gaf9c98e3839e9405df42b50c8cdfa9dca}{hook\_\-update()} (node-\/type-\/specific)
\item \hyperlink{group__field__attach_ga8d15efdca36306ea04552bed4986e77b}{field\_\-attach\_\-update()}
\item \hyperlink{group__node__api__hooks_gac66c767cc922fcbfdaf17252e5d87d9d}{hook\_\-node\_\-update()} (all)
\item \hyperlink{group__hooks_ga4b7c83c8b2e4f3719327ae794d0964ef}{hook\_\-entity\_\-update()} (all)
\item \hyperlink{group__node__access_ga3fe7744d74446e40e9b9ad2a782b4269}{hook\_\-node\_\-access\_\-records()} (all)
\item \hyperlink{group__node__access_ga37c90bf0e1dccad0deefa368dd94cc83}{hook\_\-node\_\-access\_\-records\_\-alter()} (all)
\end{DoxyItemize}
\item Loading a node (calling \hyperlink{node_8module_a492ddfc12843e71242bb484a44e51a19}{node\_\-load()}, \hyperlink{node_8module_a12f29f65250380f9e592d8d5497313e3}{node\_\-load\_\-multiple()} or \hyperlink{common_8inc_a78b89cf93f9710a68d02f86adccf1898}{entity\_\-load()} with \$entity\_\-type of 'node'):
\begin{DoxyItemize}
\item Node and revision information is read from database.
\item \hyperlink{group__node__api__hooks_ga49065b040d7fb3e02889eda6361dac34}{hook\_\-load()} (node-\/type-\/specific)
\item \hyperlink{group__field__attach_gac79dd0f29910835c653b068233fa429b}{field\_\-attach\_\-load\_\-revision()} and \hyperlink{group__field__attach_ga1e92543395961c912eb293b50e991586}{field\_\-attach\_\-load()}
\item \hyperlink{group__hooks_ga1f594647c8cbb27f75b77cc4118da8d6}{hook\_\-entity\_\-load()} (all)
\item \hyperlink{group__node__api__hooks_gad48bb14b68ed38526029d1f7ac2d2de4}{hook\_\-node\_\-load()} (all)
\end{DoxyItemize}
\item Viewing a single node (calling \hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()} -\/ note that the input to \hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()} is a loaded node, so the Loading steps above are already done):
\begin{DoxyItemize}
\item \hyperlink{group__node__api__hooks_gab1f229603b5e0f2f9d9e2a3ab53dcbda}{hook\_\-view()} (node-\/type-\/specific)
\item \hyperlink{group__field__attach_ga12b5fce5e2b2adb487c485c63bfe0298}{field\_\-attach\_\-prepare\_\-view()}
\item \hyperlink{group__hooks_ga7e60ef817e60b20497bda315d2f30163}{hook\_\-entity\_\-prepare\_\-view()} (all)
\item \hyperlink{group__field__attach_gaa752a8fd31173fd2308d71eb059e00c7}{field\_\-attach\_\-view()}
\item \hyperlink{group__node__api__hooks_ga475290ee8e81a2373ea17c512cc3f9a9}{hook\_\-node\_\-view()} (all)
\item \hyperlink{group__hooks_gae273ba271c2ef1192fe135afa9da5d49}{hook\_\-entity\_\-view()} (all)
\item \hyperlink{group__node__api__hooks_gad5ece824736be57bf0020af900398b94}{hook\_\-node\_\-view\_\-alter()} (all)
\item \hyperlink{group__hooks_ga2c2be6c70815b426f0eb13b0b68edb40}{hook\_\-entity\_\-view\_\-alter()} (all)
\end{DoxyItemize}
\item Viewing multiple nodes (calling \hyperlink{node_8module_a2296e973f0df6c4c1961891b05c0d5d4}{node\_\-view\_\-multiple()} -\/ note that the input to \hyperlink{node_8module_a2296e973f0df6c4c1961891b05c0d5d4}{node\_\-view\_\-multiple()} is a set of loaded nodes, so the Loading steps above are already done):
\begin{DoxyItemize}
\item \hyperlink{group__field__attach_ga12b5fce5e2b2adb487c485c63bfe0298}{field\_\-attach\_\-prepare\_\-view()}
\item \hyperlink{group__hooks_ga7e60ef817e60b20497bda315d2f30163}{hook\_\-entity\_\-prepare\_\-view()} (all)
\item \hyperlink{group__node__api__hooks_gab1f229603b5e0f2f9d9e2a3ab53dcbda}{hook\_\-view()} (node-\/type-\/specific)
\item \hyperlink{group__field__attach_gaa752a8fd31173fd2308d71eb059e00c7}{field\_\-attach\_\-view()}
\item \hyperlink{group__node__api__hooks_ga475290ee8e81a2373ea17c512cc3f9a9}{hook\_\-node\_\-view()} (all)
\item \hyperlink{group__hooks_gae273ba271c2ef1192fe135afa9da5d49}{hook\_\-entity\_\-view()} (all)
\item \hyperlink{group__node__api__hooks_gad5ece824736be57bf0020af900398b94}{hook\_\-node\_\-view\_\-alter()} (all)
\item \hyperlink{group__hooks_ga2c2be6c70815b426f0eb13b0b68edb40}{hook\_\-entity\_\-view\_\-alter()} (all)
\end{DoxyItemize}
\item Deleting a node (calling \hyperlink{node_8module_a707438913046b4959fa531386beb8024}{node\_\-delete()} or \hyperlink{node_8module_ab7b4bed8dc18cfa2d8e1839b0429effa}{node\_\-delete\_\-multiple()}):
\begin{DoxyItemize}
\item Node is loaded (see Loading section above)
\item \hyperlink{group__node__api__hooks_ga8588d8a814e8aef059d9e0f842904b35}{hook\_\-delete()} (node-\/type-\/specific)
\item \hyperlink{group__node__api__hooks_ga66ea0473a9950dc961802e801e5042e9}{hook\_\-node\_\-delete()} (all)
\item \hyperlink{group__hooks_gac329b7f9d18e7fbccb6057e6f4bc4cb9}{hook\_\-entity\_\-delete()} (all)
\item \hyperlink{group__field__attach_gac2e3658c9c02d0d0e71359f9ef2f207a}{field\_\-attach\_\-delete()}
\item Node and revision information are deleted from database
\end{DoxyItemize}
\item Deleting a node revision (calling \hyperlink{node_8module_a0f00bdfa980e632ef1346027b9064b37}{node\_\-revision\_\-delete()}):
\begin{DoxyItemize}
\item Node is loaded (see Loading section above)
\item Revision information is deleted from database
\item \hyperlink{group__node__api__hooks_gad7e8c6941181366016058771ae841bc9}{hook\_\-node\_\-revision\_\-delete()} (all)
\item \hyperlink{group__field__attach_gaa9eae65e6d9f1996cb27a55ba25b56e9}{field\_\-attach\_\-delete\_\-revision()}
\end{DoxyItemize}
\item Preparing a node for editing (calling \hyperlink{group__forms_ga267299500e205db099ee4e8396769d3f}{node\_\-form()} -\/ note that if it is an existing node, it will already be loaded; see the Loading section above):
\begin{DoxyItemize}
\item \hyperlink{group__node__api__hooks_ga2dff6dd92802df6b776a4eeb0b1a737c}{hook\_\-prepare()} (node-\/type-\/specific)
\item \hyperlink{group__node__api__hooks_ga4bbe7320bd52fc6183920c8be2d9d4f6}{hook\_\-node\_\-prepare()} (all)
\item \hyperlink{group__node__api__hooks_ga52618ef4643a60878dd5a76ff9bbff30}{hook\_\-form()} (node-\/type-\/specific)
\item \hyperlink{group__field__attach_gac5bd0213dae78f7c1b3235f3acdde2c6}{field\_\-attach\_\-form()}
\end{DoxyItemize}
\item Validating a node during editing form submit (calling \hyperlink{node_8pages_8inc_aedf9f810594bc4c402a92cb197930bd9}{node\_\-form\_\-validate()}):
\begin{DoxyItemize}
\item \hyperlink{group__node__api__hooks_gacaf7cff104c642c28f76ce7ec5f33f40}{hook\_\-validate()} (node-\/type-\/specific)
\item \hyperlink{group__node__api__hooks_gad26227eaf0dd513134767a11be40ab1d}{hook\_\-node\_\-validate()} (all)
\item \hyperlink{group__field__attach_ga8c9a9775772774cefae4f6b9959d477e}{field\_\-attach\_\-form\_\-validate()}
\end{DoxyItemize}
\item Searching (calling \hyperlink{node_8module_ad7047dcdd1c1934351adb73de080c640}{node\_\-search\_\-execute()}):
\begin{DoxyItemize}
\item \hyperlink{group__node__api__hooks_gaf7a28ce3230dc96833ea5338fd26f43c}{hook\_\-ranking()} (all)
\item \hyperlink{classQuery}{Query} is executed to find matching nodes
\item Resulting node is loaded (see Loading section above)
\item Resulting node is prepared for viewing (see Viewing a single node above)
\item \hyperlink{comment_8module_a8810ffc5ce0ed7c78b997fe4e712913d}{comment\_\-node\_\-update\_\-index()} is called.
\item \hyperlink{group__node__api__hooks_ga8644320a0e04e3a503c99626d4223725}{hook\_\-node\_\-search\_\-result()} (all)
\end{DoxyItemize}
\item Search indexing (calling \hyperlink{node_8module_a4310054ba3c28aad3c32f497898fb744}{node\_\-update\_\-index()}):
\begin{DoxyItemize}
\item Node is loaded (see Loading section above)
\item Node is prepared for viewing (see Viewing a single node above)
\item \hyperlink{group__node__api__hooks_gac8420f204c69a4dc641f4d809a870b05}{hook\_\-node\_\-update\_\-index()} (all) 
\end{DoxyItemize}
\end{DoxyItemize}

\subsection{Function Documentation}
\hypertarget{group__node__api__hooks_ga8588d8a814e8aef059d9e0f842904b35}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-delete@{hook\_\-delete}}
\index{hook\_\-delete@{hook\_\-delete}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-delete}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-delete (\$ {\em node})}}
\label{group__node__api__hooks_ga8588d8a814e8aef059d9e0f842904b35}
Respond to node deletion.

This hook is invoked only on the module that defines the node's content type (use \hyperlink{group__node__api__hooks_ga66ea0473a9950dc961802e801e5042e9}{hook\_\-node\_\-delete()} to respond to all node deletions).

This hook is invoked from \hyperlink{node_8module_ab7b4bed8dc18cfa2d8e1839b0429effa}{node\_\-delete\_\-multiple()} after the node has been removed from the node table in the database, before \hyperlink{group__node__api__hooks_ga66ea0473a9950dc961802e801e5042e9}{hook\_\-node\_\-delete()} is invoked, and before \hyperlink{group__field__attach_gac2e3658c9c02d0d0e71359f9ef2f207a}{field\_\-attach\_\-delete()} is called.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being deleted. \end{DoxyParams}
\hypertarget{group__node__api__hooks_ga52618ef4643a60878dd5a76ff9bbff30}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-form@{hook\_\-form}}
\index{hook\_\-form@{hook\_\-form}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-form}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-form (\$ {\em node}, \/  \&\$ {\em form\_\-state})}}
\label{group__node__api__hooks_ga52618ef4643a60878dd5a76ff9bbff30}
Display a node editing form.

This hook, implemented by node modules, is called to retrieve the form that is displayed to create or edit a node. This form is displayed at path node/add/\mbox{[}node type\mbox{]} or node/\mbox{[}node ID\mbox{]}/edit.

The submit and preview buttons, administrative and display controls, and sections added by other modules (such as path settings, menu settings, comment settings, and fields managed by the Field UI module) are displayed automatically by the node module. This hook just needs to return the node title and form editing fields specific to the node type.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node being added or edited. \item[{\em \$form\_\-state}]The form state array.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An array containing the title and any custom form elements to be displayed in the node editing form. 
\end{DoxyReturn}
\hypertarget{group__node__api__hooks_ga3c6a28d33e07d3506e1eb99718ef4e39}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-insert@{hook\_\-insert}}
\index{hook\_\-insert@{hook\_\-insert}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-insert}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-insert (\$ {\em node})}}
\label{group__node__api__hooks_ga3c6a28d33e07d3506e1eb99718ef4e39}
Respond to creation of a new node.

This hook is invoked only on the module that defines the node's content type (use \hyperlink{group__node__api__hooks_ga8b40dc62e46e5055c205d2a723dc3548}{hook\_\-node\_\-insert()} to act on all node insertions).

This hook is invoked from \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} after the node is inserted into the node table in the database, before \hyperlink{group__field__attach_gad7c37d577b97db5e0c182bc570ed7cf4}{field\_\-attach\_\-insert()} is called, and before \hyperlink{group__node__api__hooks_ga8b40dc62e46e5055c205d2a723dc3548}{hook\_\-node\_\-insert()} is invoked.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being created. \end{DoxyParams}
\hypertarget{group__node__api__hooks_ga49065b040d7fb3e02889eda6361dac34}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-load@{hook\_\-load}}
\index{hook\_\-load@{hook\_\-load}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-load (\$ {\em nodes})}}
\label{group__node__api__hooks_ga49065b040d7fb3e02889eda6361dac34}
Act on nodes being loaded from the database.

This hook is invoked only on the module that defines the node's content type (use \hyperlink{group__node__api__hooks_gad48bb14b68ed38526029d1f7ac2d2de4}{hook\_\-node\_\-load()} to respond to all node loads).

This hook is invoked during node loading, which is handled by \hyperlink{common_8inc_a78b89cf93f9710a68d02f86adccf1898}{entity\_\-load()}, via classes \hyperlink{classNodeController}{NodeController} and \hyperlink{classDrupalDefaultEntityController}{DrupalDefaultEntityController}. After the node information is read from the database or the entity cache, \hyperlink{group__node__api__hooks_ga49065b040d7fb3e02889eda6361dac34}{hook\_\-load()} is invoked on the node's content type module, then field\_\-attach\_\-node\_\-revision() or \hyperlink{group__field__attach_ga1e92543395961c912eb293b50e991586}{field\_\-attach\_\-load()} is called, then \hyperlink{group__hooks_ga1f594647c8cbb27f75b77cc4118da8d6}{hook\_\-entity\_\-load()} is invoked on all implementing modules, and finally \hyperlink{group__node__api__hooks_gad48bb14b68ed38526029d1f7ac2d2de4}{hook\_\-node\_\-load()} is invoked on all implementing modules.

This hook should only be used to add information that is not in the node or node revisions table, not to replace information that is in these tables (which could interfere with the entity cache). For performance reasons, information for all available nodes should be loaded in a single query where possible.


\begin{DoxyParams}{Parameters}
\item[{\em \$nodes}]An array of the nodes being loaded, keyed by nid.\end{DoxyParams}
For a detailed usage example, see node\_\-example.module. \hypertarget{group__node__api__hooks_ga66ea0473a9950dc961802e801e5042e9}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-delete@{hook\_\-node\_\-delete}}
\index{hook\_\-node\_\-delete@{hook\_\-node\_\-delete}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-delete}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-delete (\$ {\em node})}}
\label{group__node__api__hooks_ga66ea0473a9950dc961802e801e5042e9}
Respond to node deletion.

This hook is invoked from \hyperlink{node_8module_ab7b4bed8dc18cfa2d8e1839b0429effa}{node\_\-delete\_\-multiple()} after the type-\/specific \hyperlink{group__node__api__hooks_ga8588d8a814e8aef059d9e0f842904b35}{hook\_\-delete()} has been invoked, but before hook\_\-entity\_\-delete and \hyperlink{group__field__attach_gac2e3658c9c02d0d0e71359f9ef2f207a}{field\_\-attach\_\-delete()} are called, and before the node is removed from the node table in the database.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being deleted. \end{DoxyParams}
\hypertarget{group__node__api__hooks_ga3b6ad51d7815d1cdd093b0e0f350cbd0}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-info@{hook\_\-node\_\-info}}
\index{hook\_\-node\_\-info@{hook\_\-node\_\-info}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-info}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-info ()}}
\label{group__node__api__hooks_ga3b6ad51d7815d1cdd093b0e0f350cbd0}
Define module-\/provided node types.

This hook allows a module to define one or more of its own node types. For example, the blog module uses it to define a blog node-\/type named \char`\"{}Blog
 entry.\char`\"{} The name and attributes of each desired node type are specified in an array returned by the hook.

Only module-\/provided node types should be defined through this hook. User-\/ provided (or 'custom') node types should be defined only in the 'node\_\-type' database table, and should be maintained by using the \hyperlink{node_8module_a9a5c06f9903cea586bd44a7d6e9e086c}{node\_\-type\_\-save()} and \hyperlink{node_8module_a7fe2d244b6635513800a027053144425}{node\_\-type\_\-delete()} functions.

\begin{DoxyReturn}{Returns}
An array of information defining the module's node types. The array contains a sub-\/array for each node type, with the machine-\/readable type name as the key. Each sub-\/array has up to 10 attributes. Possible attributes:
\begin{DoxyItemize}
\item name: (required) The human-\/readable name of the node type.
\item base: (required) The base string used to construct callbacks corresponding to this node type (for example, if base is defined as example\_\-foo, then example\_\-foo\_\-insert will be called when inserting a node of that type). This string is usually the name of the module, but not always.
\item description: (required) A brief description of the node type.
\item help: (optional) Help information shown to the user when creating a node of this type.
\item has\_\-title: (optional) A Boolean indicating whether or not this node type has a title field.
\item title\_\-label: (optional) The label for the title field of this content type.
\item locked: (optional) A Boolean indicating whether the administrator can change the machine name of this type. FALSE = changeable (not locked), TRUE = unchangeable (locked).
\end{DoxyItemize}
\end{DoxyReturn}
The machine name of a node type should contain only letters, numbers, and underscores. Underscores will be converted into hyphens for the purpose of constructing URLs.

All attributes of a node type that are defined through this hook (except for 'locked') can be edited by a site administrator. This includes the machine-\/readable name of a node type, if 'locked' is set to FALSE. \hypertarget{group__node__api__hooks_ga8b40dc62e46e5055c205d2a723dc3548}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-insert@{hook\_\-node\_\-insert}}
\index{hook\_\-node\_\-insert@{hook\_\-node\_\-insert}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-insert}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-insert (\$ {\em node})}}
\label{group__node__api__hooks_ga8b40dc62e46e5055c205d2a723dc3548}
Respond to creation of a new node.

This hook is invoked from \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} after the database query that will insert the node into the node table is scheduled for execution, after the type-\/specific \hyperlink{group__node__api__hooks_ga3c6a28d33e07d3506e1eb99718ef4e39}{hook\_\-insert()} is invoked, and after \hyperlink{group__field__attach_gad7c37d577b97db5e0c182bc570ed7cf4}{field\_\-attach\_\-insert()} is called.

Note that when this hook is invoked, the changes have not yet been written to the database, because a database transaction is still in progress. The transaction is not finalized until the save operation is entirely completed and \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} goes out of scope. You should not rely on data in the database at this time as it is not updated yet. You should also note that any write/update database queries executed from this hook are also not committed immediately. Check \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} and \hyperlink{group__database_gabdd0e69f5b2c63f8ad9e76f0fdf552be}{db\_\-transaction()} for more info.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being created. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gad48bb14b68ed38526029d1f7ac2d2de4}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-load@{hook\_\-node\_\-load}}
\index{hook\_\-node\_\-load@{hook\_\-node\_\-load}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-load (\$ {\em nodes}, \/  \$ {\em types})}}
\label{group__node__api__hooks_gad48bb14b68ed38526029d1f7ac2d2de4}
Act on arbitrary nodes being loaded from the database.

This hook should be used to add information that is not in the node or node revisions table, not to replace information that is in these tables (which could interfere with the entity cache). For performance reasons, information for all available nodes should be loaded in a single query where possible.

This hook is invoked during node loading, which is handled by \hyperlink{common_8inc_a78b89cf93f9710a68d02f86adccf1898}{entity\_\-load()}, via classes \hyperlink{classNodeController}{NodeController} and \hyperlink{classDrupalDefaultEntityController}{DrupalDefaultEntityController}. After the node information is read from the database or the entity cache, \hyperlink{group__node__api__hooks_ga49065b040d7fb3e02889eda6361dac34}{hook\_\-load()} is invoked on the node's content type module, then \hyperlink{group__field__attach_gac79dd0f29910835c653b068233fa429b}{field\_\-attach\_\-load\_\-revision()} or \hyperlink{group__field__attach_ga1e92543395961c912eb293b50e991586}{field\_\-attach\_\-load()} is called, then \hyperlink{group__hooks_ga1f594647c8cbb27f75b77cc4118da8d6}{hook\_\-entity\_\-load()} is invoked on all implementing modules, and finally \hyperlink{group__node__api__hooks_gad48bb14b68ed38526029d1f7ac2d2de4}{hook\_\-node\_\-load()} is invoked on all implementing modules.


\begin{DoxyParams}{Parameters}
\item[{\em \$nodes}]An array of the nodes being loaded, keyed by nid. \item[{\em \$types}]An array containing the node types present in \$nodes. Allows for an early return for modules that only support certain node types. However, if your module defines a content type, you can use \hyperlink{group__node__api__hooks_ga49065b040d7fb3e02889eda6361dac34}{hook\_\-load()} to respond to loading of just that content type.\end{DoxyParams}
For a detailed usage example, see nodeapi\_\-example.module. \hypertarget{group__node__api__hooks_ga4bbe7320bd52fc6183920c8be2d9d4f6}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-prepare@{hook\_\-node\_\-prepare}}
\index{hook\_\-node\_\-prepare@{hook\_\-node\_\-prepare}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-prepare}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-prepare (\$ {\em node})}}
\label{group__node__api__hooks_ga4bbe7320bd52fc6183920c8be2d9d4f6}
Act on a node object about to be shown on the add/edit form.

This hook is invoked from \hyperlink{node_8module_ac12e464390fef44e55ddc2e0a35e9fe2}{node\_\-object\_\-prepare()} after the type-\/specific \hyperlink{group__node__api__hooks_ga2dff6dd92802df6b776a4eeb0b1a737c}{hook\_\-prepare()} is invoked.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is about to be shown on the add/edit form. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gab339b1a1ce0e235d4a9c5a05e410dcd6}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-presave@{hook\_\-node\_\-presave}}
\index{hook\_\-node\_\-presave@{hook\_\-node\_\-presave}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-presave}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-presave (\$ {\em node})}}
\label{group__node__api__hooks_gab339b1a1ce0e235d4a9c5a05e410dcd6}
Act on a node being inserted or updated.

This hook is invoked from \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} before the node is saved to the database.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being inserted or updated. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gad7e8c6941181366016058771ae841bc9}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-revision\_\-delete@{hook\_\-node\_\-revision\_\-delete}}
\index{hook\_\-node\_\-revision\_\-delete@{hook\_\-node\_\-revision\_\-delete}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-revision\_\-delete}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-revision\_\-delete (\$ {\em node})}}
\label{group__node__api__hooks_gad7e8c6941181366016058771ae841bc9}
Respond to deletion of a node revision.

This hook is invoked from \hyperlink{node_8module_a0f00bdfa980e632ef1346027b9064b37}{node\_\-revision\_\-delete()} after the revision has been removed from the node\_\-revision table, and before \hyperlink{group__field__attach_gaa9eae65e6d9f1996cb27a55ba25b56e9}{field\_\-attach\_\-delete\_\-revision()} is called.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node revision (node object) that is being deleted. \end{DoxyParams}
\hypertarget{group__node__api__hooks_ga8644320a0e04e3a503c99626d4223725}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-search\_\-result@{hook\_\-node\_\-search\_\-result}}
\index{hook\_\-node\_\-search\_\-result@{hook\_\-node\_\-search\_\-result}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-search\_\-result}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-search\_\-result (\$ {\em node})}}
\label{group__node__api__hooks_ga8644320a0e04e3a503c99626d4223725}
Act on a node being displayed as a search result.

This hook is invoked from \hyperlink{node_8module_ad7047dcdd1c1934351adb73de080c640}{node\_\-search\_\-execute()}, after \hyperlink{node_8module_a492ddfc12843e71242bb484a44e51a19}{node\_\-load()} and \hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()} have been called.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node being displayed in a search result.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array Extra information to be displayed with search result. This information should be presented as an associative array. It will be concatenated with the post information (last updated, author) in the default search result theming.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{search_8pages_8inc_a45d5ee9444aba311056f3949e503b426}{template\_\-preprocess\_\-search\_\-result()} 

\hyperlink{search-result_8tpl_8php}{search-\/result.tpl.php} 
\end{DoxySeeAlso}
\hypertarget{group__node__api__hooks_ga1b479b731ecb3f9eec0c92e3e1a8e01d}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-submit@{hook\_\-node\_\-submit}}
\index{hook\_\-node\_\-submit@{hook\_\-node\_\-submit}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-submit}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-submit (\$ {\em node}, \/  \$ {\em form}, \/  \&\$ {\em form\_\-state})}}
\label{group__node__api__hooks_ga1b479b731ecb3f9eec0c92e3e1a8e01d}
Act on a node after validated form values have been copied to it.

This hook is invoked when a node form is submitted with either the \char`\"{}Save\char`\"{} or \char`\"{}Preview\char`\"{} button, after form values have been copied to the form state's node object, but before the node is saved or previewed. It is a chance for modules to adjust the node's properties from what they are simply after a copy from \$form\_\-state\mbox{[}'values'\mbox{]}. This hook is intended for adjusting non-\/field-\/related properties. See \hyperlink{group__field__attach_ga368ea58ca800b1e1f69f4b88e82f9ae0}{hook\_\-field\_\-attach\_\-submit()} for customizing field-\/related properties.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node object being updated in response to a form submission. \item[{\em \$form}]The form being used to edit the node. \item[{\em \$form\_\-state}]The form state array. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gac66c767cc922fcbfdaf17252e5d87d9d}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-update@{hook\_\-node\_\-update}}
\index{hook\_\-node\_\-update@{hook\_\-node\_\-update}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-update}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-update (\$ {\em node})}}
\label{group__node__api__hooks_gac66c767cc922fcbfdaf17252e5d87d9d}
Respond to updates to a node.

This hook is invoked from \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} after the database query that will update node in the node table is scheduled for execution, after the type-\/specific \hyperlink{group__node__api__hooks_gaf9c98e3839e9405df42b50c8cdfa9dca}{hook\_\-update()} is invoked, and after \hyperlink{group__field__attach_ga8d15efdca36306ea04552bed4986e77b}{field\_\-attach\_\-update()} is called.

Note that when this hook is invoked, the changes have not yet been written to the database, because a database transaction is still in progress. The transaction is not finalized until the save operation is entirely completed and \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} goes out of scope. You should not rely on data in the database at this time as it is not updated yet. You should also note that any write/update database queries executed from this hook are also not committed immediately. Check \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} and \hyperlink{group__database_gabdd0e69f5b2c63f8ad9e76f0fdf552be}{db\_\-transaction()} for more info.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being updated. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gac8420f204c69a4dc641f4d809a870b05}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-update\_\-index@{hook\_\-node\_\-update\_\-index}}
\index{hook\_\-node\_\-update\_\-index@{hook\_\-node\_\-update\_\-index}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-update\_\-index}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-update\_\-index (\$ {\em node})}}
\label{group__node__api__hooks_gac8420f204c69a4dc641f4d809a870b05}
Act on a node being indexed for searching.

This hook is invoked during search indexing, after \hyperlink{node_8module_a492ddfc12843e71242bb484a44e51a19}{node\_\-load()}, and after the result of \hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()} is added as \$node-\/$>$rendered to the node object.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node being indexed.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string Additional node information to be indexed. 
\end{DoxyReturn}
\hypertarget{group__node__api__hooks_gad26227eaf0dd513134767a11be40ab1d}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-validate@{hook\_\-node\_\-validate}}
\index{hook\_\-node\_\-validate@{hook\_\-node\_\-validate}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-validate}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-validate (\$ {\em node}, \/  \$ {\em form}, \/  \&\$ {\em form\_\-state})}}
\label{group__node__api__hooks_gad26227eaf0dd513134767a11be40ab1d}
Perform node validation before a node is created or updated.

This hook is invoked from \hyperlink{node_8module_a9f5f6b14ffa70a478e11e60b1fe9d254}{node\_\-validate()}, after a user has has finished editing the node and is previewing or submitting it. It is invoked at the end of all the standard validation steps, and after the type-\/specific \hyperlink{group__node__api__hooks_gacaf7cff104c642c28f76ce7ec5f33f40}{hook\_\-validate()} is invoked.

To indicate a validation error, use \hyperlink{group__form__api_ga6f4ecbec42e905390e521b393417f97f}{form\_\-set\_\-error()}.

Note: Changes made to the \$node object within your hook implementation will have no effect. The preferred method to change a node's content is to use \hyperlink{group__node__api__hooks_gab339b1a1ce0e235d4a9c5a05e410dcd6}{hook\_\-node\_\-presave()} instead. If it is really necessary to change the node at the validate stage, you can use \hyperlink{group__form__api_ga2a377a1fcccea79d06d1a735dea433f3}{form\_\-set\_\-value()}.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node being validated. \item[{\em \$form}]The form being used to edit the node. \item[{\em \$form\_\-state}]The form state array. \end{DoxyParams}
\hypertarget{group__node__api__hooks_ga475290ee8e81a2373ea17c512cc3f9a9}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-view@{hook\_\-node\_\-view}}
\index{hook\_\-node\_\-view@{hook\_\-node\_\-view}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-view}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-view (\$ {\em node}, \/  \$ {\em view\_\-mode}, \/  \$ {\em langcode})}}
\label{group__node__api__hooks_ga475290ee8e81a2373ea17c512cc3f9a9}
Act on a node that is being assembled before rendering.

The module may add elements to \$node-\/$>$content prior to rendering. This hook will be called after \hyperlink{group__node__api__hooks_gab1f229603b5e0f2f9d9e2a3ab53dcbda}{hook\_\-view()}. The structure of \$node-\/$>$content is a renderable array as expected by \hyperlink{common_8inc_a05798b44e8d6c496d4bee5cc32fa7851}{drupal\_\-render()}.

When \$view\_\-mode is 'rss', modules can also add extra RSS elements and namespaces to \$node-\/$>$rss\_\-elements and \$node-\/$>$rss\_\-namespaces respectively for the RSS item generated for this node. For details on how this is used, see \hyperlink{node_8module_acad30bd6d2afbf584f622957c8f4718f}{node\_\-feed()}.

\begin{DoxySeeAlso}{See also}
\hyperlink{blog_8module_aef07831d7585949a6c1fffae85571598}{blog\_\-node\_\-view()} 

\hyperlink{forum_8module_a76349348d79c1557db47ffe253587ffd}{forum\_\-node\_\-view()} 

\hyperlink{comment_8module_af67cef07b57f84e54b8b26c38fe0fda0}{comment\_\-node\_\-view()}
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being assembled for rendering. \item[{\em \$view\_\-mode}]The \$view\_\-mode parameter from \hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()}. \item[{\em \$langcode}]The language code used for rendering.\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__hooks_gae273ba271c2ef1192fe135afa9da5d49}{hook\_\-entity\_\-view()} 
\end{DoxySeeAlso}
\hypertarget{group__node__api__hooks_gad5ece824736be57bf0020af900398b94}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-node\_\-view\_\-alter@{hook\_\-node\_\-view\_\-alter}}
\index{hook\_\-node\_\-view\_\-alter@{hook\_\-node\_\-view\_\-alter}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-node\_\-view\_\-alter}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-node\_\-view\_\-alter (\&\$ {\em build})}}
\label{group__node__api__hooks_gad5ece824736be57bf0020af900398b94}
Alter the results of \hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()}.

This hook is called after the content has been assembled in a structured array and may be used for doing processing which requires that the complete node content structure has been built.

If the module wishes to act on the rendered HTML of the node rather than the structured content array, it may use this hook to add a post\_\-render callback. Alternatively, it could also implement hook\_\-preprocess\_\-node(). See \hyperlink{common_8inc_a05798b44e8d6c496d4bee5cc32fa7851}{drupal\_\-render()} and \hyperlink{includes_2theme_8inc_a7c25609a935874541a19657affd30fff}{theme()} documentation respectively for details.


\begin{DoxyParams}{Parameters}
\item[{\em \$build}]A renderable array representing the node content.\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()} 

\hyperlink{group__hooks_ga2c2be6c70815b426f0eb13b0b68edb40}{hook\_\-entity\_\-view\_\-alter()} 
\end{DoxySeeAlso}
\hypertarget{group__node__api__hooks_ga2dff6dd92802df6b776a4eeb0b1a737c}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-prepare@{hook\_\-prepare}}
\index{hook\_\-prepare@{hook\_\-prepare}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-prepare}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-prepare (\$ {\em node})}}
\label{group__node__api__hooks_ga2dff6dd92802df6b776a4eeb0b1a737c}
Act on a node object about to be shown on the add/edit form.

This hook is invoked only on the module that defines the node's content type (use \hyperlink{group__node__api__hooks_ga4bbe7320bd52fc6183920c8be2d9d4f6}{hook\_\-node\_\-prepare()} to act on all node preparations).

This hook is invoked from \hyperlink{node_8module_ac12e464390fef44e55ddc2e0a35e9fe2}{node\_\-object\_\-prepare()} before the general \hyperlink{group__node__api__hooks_ga4bbe7320bd52fc6183920c8be2d9d4f6}{hook\_\-node\_\-prepare()} is invoked.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is about to be shown on the add/edit form. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gaf7a28ce3230dc96833ea5338fd26f43c}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-ranking@{hook\_\-ranking}}
\index{hook\_\-ranking@{hook\_\-ranking}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-ranking}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-ranking ()}}
\label{group__node__api__hooks_gaf7a28ce3230dc96833ea5338fd26f43c}
Provide additional methods of scoring for core search results for nodes.

A node's search score is used to rank it among other nodes matched by the search, with the highest-\/ranked nodes appearing first in the search listing.

For example, a module allowing users to vote on content could expose an option to allow search results' rankings to be influenced by the average voting score of a node.

All scoring mechanisms are provided as options to site administrators, and may be tweaked based on individual sites or disabled altogether if they do not make sense. Individual scoring mechanisms, if enabled, are assigned a weight from 1 to 10. The weight represents the factor of magnification of the ranking mechanism, with higher-\/weighted ranking mechanisms having more influence. In order for the weight system to work, each scoring mechanism must return a value between 0 and 1 for every node. That value is then multiplied by the administrator-\/assigned weight for the ranking mechanism, and then the weighted scores from all ranking mechanisms are added, which brings about the same result as a weighted average.

\begin{DoxyReturn}{Returns}
An associative array of ranking data. The keys should be strings, corresponding to the internal name of the ranking mechanism, such as 'recent', or 'comments'. The values should be arrays themselves, with the following keys available:
\begin{DoxyItemize}
\item title: (required) The human readable name of the ranking mechanism.
\item join: (optional) The part of a query string to join to any additional necessary table. This is not necessary if the table required is already joined to by the base query, such as for the \{node\} table. Other tables should use the full table name as an alias to avoid naming collisions.
\item score: (required) The part of a query string to calculate the score for the ranking mechanism based on values in the database. This does not need to be wrapped in parentheses, as it will be done automatically; it also does not need to take the weighted system into account, as it will be done automatically. It does, however, need to calculate a decimal between 0 and 1; be careful not to cast the entire score to an integer by inadvertently introducing a variable argument.
\item arguments: (optional) If any arguments are required for the score, they can be specified in an array here. 
\end{DoxyItemize}
\end{DoxyReturn}
\hypertarget{group__node__api__hooks_gaf9c98e3839e9405df42b50c8cdfa9dca}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-update@{hook\_\-update}}
\index{hook\_\-update@{hook\_\-update}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-update}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-update (\$ {\em node})}}
\label{group__node__api__hooks_gaf9c98e3839e9405df42b50c8cdfa9dca}
Respond to updates to a node.

This hook is invoked only on the module that defines the node's content type (use \hyperlink{group__node__api__hooks_gac66c767cc922fcbfdaf17252e5d87d9d}{hook\_\-node\_\-update()} to act on all node updates).

This hook is invoked from \hyperlink{node_8module_a26add7591be64b30a18232927ef14faf}{node\_\-save()} after the node is updated in the node table in the database, before \hyperlink{group__field__attach_ga8d15efdca36306ea04552bed4986e77b}{field\_\-attach\_\-update()} is called, and before \hyperlink{group__node__api__hooks_gac66c767cc922fcbfdaf17252e5d87d9d}{hook\_\-node\_\-update()} is invoked.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node that is being updated. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gacaf7cff104c642c28f76ce7ec5f33f40}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-validate@{hook\_\-validate}}
\index{hook\_\-validate@{hook\_\-validate}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-validate}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-validate (\$ {\em node}, \/  \$ {\em form}, \/  \&\$ {\em form\_\-state})}}
\label{group__node__api__hooks_gacaf7cff104c642c28f76ce7ec5f33f40}
Perform node validation before a node is created or updated.

This hook is invoked only on the module that defines the node's content type (use \hyperlink{group__node__api__hooks_gad26227eaf0dd513134767a11be40ab1d}{hook\_\-node\_\-validate()} to act on all node validations).

This hook is invoked from \hyperlink{node_8module_a9f5f6b14ffa70a478e11e60b1fe9d254}{node\_\-validate()}, after a user has finished editing the node and is previewing or submitting it. It is invoked at the end of all the standard validation steps, and before \hyperlink{group__node__api__hooks_gad26227eaf0dd513134767a11be40ab1d}{hook\_\-node\_\-validate()} is invoked.

To indicate a validation error, use \hyperlink{group__form__api_ga6f4ecbec42e905390e521b393417f97f}{form\_\-set\_\-error()}.

Note: Changes made to the \$node object within your hook implementation will have no effect. The preferred method to change a node's content is to use \hyperlink{group__node__api__hooks_gab339b1a1ce0e235d4a9c5a05e410dcd6}{hook\_\-node\_\-presave()} instead.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node being validated. \item[{\em \$form}]The form being used to edit the node. \item[{\em \$form\_\-state}]The form state array. \end{DoxyParams}
\hypertarget{group__node__api__hooks_gab1f229603b5e0f2f9d9e2a3ab53dcbda}{
\index{node\_\-api\_\-hooks@{node\_\-api\_\-hooks}!hook\_\-view@{hook\_\-view}}
\index{hook\_\-view@{hook\_\-view}!node_api_hooks@{node\_\-api\_\-hooks}}
\subsubsection[{hook\_\-view}]{\setlength{\rightskip}{0pt plus 5cm}hook\_\-view (\$ {\em node}, \/  \$ {\em view\_\-mode})}}
\label{group__node__api__hooks_gab1f229603b5e0f2f9d9e2a3ab53dcbda}
Display a node.

This hook is invoked only on the module that defines the node's content type (use \hyperlink{group__node__api__hooks_ga475290ee8e81a2373ea17c512cc3f9a9}{hook\_\-node\_\-view()} to act on all node views).

This hook is invoked during node viewing after the node is fully loaded, so that the node type module can define a custom method for display, or add to the default display.


\begin{DoxyParams}{Parameters}
\item[{\em \$node}]The node to be displayed, as returned by \hyperlink{node_8module_a492ddfc12843e71242bb484a44e51a19}{node\_\-load()}. \item[{\em \$view\_\-mode}]View mode, e.g. 'full', 'teaser', ... \end{DoxyParams}
\begin{DoxyReturn}{Returns}
The passed \$node parameter should be modified as necessary and returned so it can be properly presented. Nodes are prepared for display by assembling a structured array, formatted as in the Form API, in \$node-\/$>$content. As with Form API arrays, the weight property can be used to control the relative positions of added elements. After this hook is invoked, \hyperlink{node_8module_ac2c64fdfacc25be79a6ecf406ab62320}{node\_\-view()} calls \hyperlink{group__field__attach_gaa752a8fd31173fd2308d71eb059e00c7}{field\_\-attach\_\-view()} to add field views to \$node-\/$>$content, and then invokes \hyperlink{group__node__api__hooks_ga475290ee8e81a2373ea17c512cc3f9a9}{hook\_\-node\_\-view()} and \hyperlink{group__node__api__hooks_gad5ece824736be57bf0020af900398b94}{hook\_\-node\_\-view\_\-alter()}, so if you want to affect the final \hyperlink{classview}{view} of the node, you might consider implementing one of these hooks instead. 
\end{DoxyReturn}
